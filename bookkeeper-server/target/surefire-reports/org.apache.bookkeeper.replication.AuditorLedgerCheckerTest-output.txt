2020-08-10 23:20:03,610 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:03,620 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:03,863 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:03,973 - INFO  - [Time-limited test:MetadataDrivers@105] - BookKeeper metadata driver manager initialized
2020-08-10 23:20:03,978 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:43633/ledgers : zkServers = localhost:43633, ledgersRootPath = /ledgers.
2020-08-10 23:20:03,987 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:04,064 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:04,089 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:04,090 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:04,093 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:04,130 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:04,254 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie15694301775598410999test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:43633/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie15694301775598410999test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:04,389 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:43633/ledgers : zkServers = localhost:43633, ledgersRootPath = /ledgers.
2020-08-10 23:20:04,397 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:04,404 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:04,417 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie15694301775598410999test/current] [/tmp/bookie15694301775598410999test/current]
2020-08-10 23:20:04,511 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:04,522 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie15694301775598410999test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:04,523 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:04,540 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:04,545 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:04,549 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:04,554 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:04,554 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:04,580 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:45865 to become writable
2020-08-10 23:20:04,585 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 1 ms.
2020-08-10 23:20:04,586 - INFO  - [SyncThread-13-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:04,589 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:04,590 - INFO  - [BookieJournal-45865:Journal@909] - Starting journal on /tmp/bookie15694301775598410999test/current
2020-08-10 23:20:04,596 - INFO  - [BookieJournal-45865:JournalChannel@157] - Opening journal /tmp/bookie15694301775598410999test/current/173da3ea1f4.txn
2020-08-10 23:20:04,596 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:04,633 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45865
2020-08-10 23:20:04,882 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:45865' has been created.
2020-08-10 23:20:04,884 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:04,885 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie4752802203635947110test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:43633/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie4752802203635947110test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:04,889 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:43633/ledgers : zkServers = localhost:43633, ledgersRootPath = /ledgers.
2020-08-10 23:20:04,899 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:04,905 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:04,915 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie4752802203635947110test/current] [/tmp/bookie4752802203635947110test/current]
2020-08-10 23:20:04,926 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:04,929 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie4752802203635947110test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:04,929 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:04,929 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:04,930 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:04,932 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:04,932 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:04,933 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:04,948 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:39659 to become writable
2020-08-10 23:20:04,949 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:04,950 - INFO  - [SyncThread-23-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:04,954 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:04,957 - INFO  - [BookieJournal-39659:Journal@909] - Starting journal on /tmp/bookie4752802203635947110test/current
2020-08-10 23:20:04,958 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:04,958 - INFO  - [BookieJournal-39659:JournalChannel@157] - Opening journal /tmp/bookie4752802203635947110test/current/173da3ea35f.txn
2020-08-10 23:20:04,973 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39659
2020-08-10 23:20:05,227 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:39659' has been created.
2020-08-10 23:20:05,229 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:05,229 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie17479582202892923555test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:43633/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie17479582202892923555test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:05,233 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:43633/ledgers : zkServers = localhost:43633, ledgersRootPath = /ledgers.
2020-08-10 23:20:05,275 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:05,279 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:05,286 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie17479582202892923555test/current] [/tmp/bookie17479582202892923555test/current]
2020-08-10 23:20:05,294 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:05,296 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie17479582202892923555test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:05,296 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:05,296 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:05,297 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:05,298 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:05,298 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:05,298 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:05,321 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:37863 to become writable
2020-08-10 23:20:05,322 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:05,325 - INFO  - [SyncThread-33-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:05,329 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:05,332 - INFO  - [BookieJournal-37863:Journal@909] - Starting journal on /tmp/bookie17479582202892923555test/current
2020-08-10 23:20:05,333 - INFO  - [BookieJournal-37863:JournalChannel@157] - Opening journal /tmp/bookie17479582202892923555test/current/173da3ea4d6.txn
2020-08-10 23:20:05,336 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:05,350 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37863
2020-08-10 23:20:05,598 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:37863' has been created.
2020-08-10 23:20:05,599 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testMultipleBookieFailures @ metadata service zk://localhost:43633/ledgers in 1957 ms.
2020-08-10 23:20:05,638 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:43633/ledgers : zkServers = localhost:43633, ledgersRootPath = /ledgers.
2020-08-10 23:20:05,644 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:05,647 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:05,648 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:05,649 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:05,649 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:05,654 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37863
2020-08-10 23:20:05,654 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39659
2020-08-10 23:20:05,655 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45865
2020-08-10 23:20:05,678 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:43633/ledgers : zkServers = localhost:43633, ledgersRootPath = /ledgers.
2020-08-10 23:20:05,689 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:05,695 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:05,696 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:05,696 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:05,697 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:05,703 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37863
2020-08-10 23:20:05,703 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39659
2020-08-10 23:20:05,703 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45865
2020-08-10 23:20:05,723 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:43633/ledgers : zkServers = localhost:43633, ledgersRootPath = /ledgers.
2020-08-10 23:20:05,723 - INFO  - [AuditorElector-127.0.0.1:45865:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:05,730 - INFO  - [AuditorElector-127.0.0.1:45865:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:05,734 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:05,734 - INFO  - [AuditorElector-127.0.0.1:45865:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:45865
2020-08-10 23:20:05,744 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:05,746 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:05,746 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:05,746 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:05,748 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37863
2020-08-10 23:20:05,749 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39659
2020-08-10 23:20:05,749 - INFO  - [AuditorElector-127.0.0.1:45865:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:05,749 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45865
2020-08-10 23:20:05,750 - INFO  - [AuditorElector-127.0.0.1:45865:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:05,751 - INFO  - [AuditorElector-127.0.0.1:45865:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094405626 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:05,752 - INFO  - [AuditorElector-127.0.0.1:45865:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:05,752 - INFO  - [AuditorElector-127.0.0.1:45865:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:05,753 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:05,776 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:37863, 127.0.0.1:45865, 127.0.0.1:39659] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:20:05,778 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:05,829 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:37863, 127.0.0.1:45865, 127.0.0.1:39659] for ledger: 0
2020-08-10 23:20:05,831 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:20:05,897 - INFO  - [bookie-io-18-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:05,898 - INFO  - [bookie-io-28-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:05,897 - INFO  - [bookie-io-8-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:05,915 - INFO  - [bookkeeper-io-3-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xe2917925, L:/127.0.0.1:50336 - R:127.0.0.1/127.0.0.1:45865]
2020-08-10 23:20:05,916 - INFO  - [bookkeeper-io-3-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xe2ffd429, L:/127.0.0.1:49460 - R:127.0.0.1/127.0.0.1:39659]
2020-08-10 23:20:05,916 - INFO  - [bookkeeper-io-3-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:39659
2020-08-10 23:20:05,915 - INFO  - [bookie-io-18-2:BookieRequestHandler@50] - Channel connected  [id: 0xd173f84d, L:/127.0.0.1:39659 - R:/127.0.0.1:49460]
2020-08-10 23:20:05,915 - INFO  - [bookie-io-8-2:BookieRequestHandler@50] - Channel connected  [id: 0xbd9a98da, L:/127.0.0.1:45865 - R:/127.0.0.1:50336]
2020-08-10 23:20:05,915 - INFO  - [bookkeeper-io-3-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x42888f4b, L:/127.0.0.1:46924 - R:127.0.0.1/127.0.0.1:37863]
2020-08-10 23:20:05,917 - INFO  - [bookkeeper-io-3-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:37863
2020-08-10 23:20:05,915 - INFO  - [bookie-io-28-2:BookieRequestHandler@50] - Channel connected  [id: 0x335daff3, L:/127.0.0.1:37863 - R:/127.0.0.1:46924]
2020-08-10 23:20:05,925 - INFO  - [bookkeeper-io-3-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:45865
2020-08-10 23:20:05,945 - INFO  - [bookkeeper-io-3-1:PerChannelBookieClient$1@471] - connection [id: 0x42888f4b, L:/127.0.0.1:46924 - R:127.0.0.1/127.0.0.1:37863] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:05,949 - INFO  - [bookkeeper-io-3-2:PerChannelBookieClient$1@471] - connection [id: 0xe2917925, L:/127.0.0.1:50336 - R:127.0.0.1/127.0.0.1:45865] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:05,964 - INFO  - [bookkeeper-io-3-3:PerChannelBookieClient$1@471] - connection [id: 0xe2ffd429, L:/127.0.0.1:49460 - R:127.0.0.1/127.0.0.1:39659] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:06,127 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:06,128 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:06,130 - INFO  - [bookie-io-28-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x335daff3, L:/127.0.0.1:37863 ! R:/127.0.0.1:46924]
2020-08-10 23:20:06,130 - WARN  - [bookkeeper-io-3-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0x42888f4b, L:/127.0.0.1:46924 - R:127.0.0.1/127.0.0.1:37863] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:20:06,130 - INFO  - [bookkeeper-io-3-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x42888f4b, L:/127.0.0.1:46924 ! R:127.0.0.1/127.0.0.1:37863]
2020-08-10 23:20:06,155 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-37863 with exitCode 0
2020-08-10 23:20:06,156 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:06,156 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:06,156 - INFO  - [SyncThread-33-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:06,158 - INFO  - [SyncThread-33-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie17479582202892923555test/current/0.log for logId 0.
2020-08-10 23:20:06,161 - INFO  - [pool-23-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie17479582202892923555test/current/1.log for logId 1.
2020-08-10 23:20:06,175 - INFO  - [SyncThread-33-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094405334 , logFileOffset - 24576]}.
2020-08-10 23:20:06,178 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:06,179 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:06,179 - INFO  - [BookieJournal-37863:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:06,180 - INFO  - [BookieJournal-37863:Journal@1144] - Journal exited loop!
2020-08-10 23:20:06,180 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:06,180 - INFO  - [Bookie-37863:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:06,181 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:06,181 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:06,181 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:06,181 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:06,182 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:06,184 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:06,197 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:06,197 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:06,203 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37863
2020-08-10 23:20:06,204 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37863
2020-08-10 23:20:06,204 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37863
2020-08-10 23:20:06,204 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37863
2020-08-10 23:20:06,312 - INFO  - [AuditorElector-127.0.0.1:37863:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:06,317 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:06,333 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1114] - Following are the failed bookies: [127.0.0.1:37863], and searching its ledgers for re-replication
2020-08-10 23:20:06,340 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:37863] are identified as underreplicated
2020-08-10 23:20:06,351 - INFO  - [BookieDeathWatcher-37863:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:06,357 - INFO  - [BookieDeathWatcher-37863:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-37863
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:06,359 - INFO  - [BookieDeathWatcher-37863:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:06,359 - INFO  - [BookieDeathWatcher-37863:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:06,390 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:06,485 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:06,486 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:06,487 - WARN  - [bookkeeper-io-3-3:PerChannelBookieClient@1270] - Exception caught on:[id: 0xe2ffd429, L:/127.0.0.1:49460 - R:127.0.0.1/127.0.0.1:39659] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:20:06,487 - INFO  - [bookkeeper-io-3-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xe2ffd429, L:/127.0.0.1:49460 ! R:127.0.0.1/127.0.0.1:39659]
2020-08-10 23:20:06,488 - INFO  - [bookie-io-18-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xd173f84d, L:/127.0.0.1:39659 ! R:/127.0.0.1:49460]
2020-08-10 23:20:06,500 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-39659 with exitCode 0
2020-08-10 23:20:06,501 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:06,501 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:06,501 - INFO  - [SyncThread-23-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:06,502 - INFO  - [SyncThread-23-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4752802203635947110test/current/0.log for logId 0.
2020-08-10 23:20:06,504 - INFO  - [pool-16-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4752802203635947110test/current/1.log for logId 1.
2020-08-10 23:20:06,512 - INFO  - [SyncThread-23-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094404959 , logFileOffset - 27136]}.
2020-08-10 23:20:06,515 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:06,516 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:06,516 - INFO  - [BookieJournal-39659:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:06,516 - INFO  - [BookieJournal-39659:Journal@1144] - Journal exited loop!
2020-08-10 23:20:06,517 - INFO  - [Bookie-39659:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:06,517 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:06,517 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:06,517 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:06,518 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:06,518 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:06,518 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:06,520 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:06,522 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:06,522 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:06,527 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:39659
2020-08-10 23:20:06,527 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:39659
2020-08-10 23:20:06,635 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:39659
2020-08-10 23:20:06,636 - INFO  - [AuditorElector-127.0.0.1:39659:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:06,648 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:06,658 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1114] - Following are the failed bookies: [127.0.0.1:37863, 127.0.0.1:39659], and searching its ledgers for re-replication
2020-08-10 23:20:06,658 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:37863] are identified as underreplicated
2020-08-10 23:20:06,680 - INFO  - [Time-limited test-EventThread:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:39659] are identified as underreplicated
2020-08-10 23:20:06,690 - INFO  - [AuditorBookie-127.0.0.1:45865:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:06,768 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:06,768 - INFO  - [AuditorElector-127.0.0.1:45865:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:06,883 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:20:06,884 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:37863
2020-08-10 23:20:06,884 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:39659
2020-08-10 23:20:06,885 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:45865
2020-08-10 23:20:06,886 - INFO  - [bookkeeper-io-3-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xe2917925, L:/127.0.0.1:50336 ! R:127.0.0.1/127.0.0.1:45865]
2020-08-10 23:20:06,887 - INFO  - [bookie-io-8-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xbd9a98da, L:/127.0.0.1:45865 ! R:/127.0.0.1:50336]
2020-08-10 23:20:06,973 - INFO  - [BookieDeathWatcher-39659:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:06,973 - INFO  - [BookieDeathWatcher-39659:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-39659
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:06,973 - INFO  - [BookieDeathWatcher-39659:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:06,973 - INFO  - [BookieDeathWatcher-39659:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:07,000 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:07,001 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:07,008 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-45865 with exitCode 0
2020-08-10 23:20:07,008 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:07,008 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:07,008 - INFO  - [SyncThread-13-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:07,009 - INFO  - [SyncThread-13-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15694301775598410999test/current/0.log for logId 0.
2020-08-10 23:20:07,010 - INFO  - [pool-9-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15694301775598410999test/current/1.log for logId 1.
2020-08-10 23:20:07,022 - INFO  - [SyncThread-13-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094404596 , logFileOffset - 33280]}.
2020-08-10 23:20:07,025 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:07,026 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:07,026 - INFO  - [BookieJournal-45865:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:07,026 - INFO  - [BookieJournal-45865:Journal@1144] - Journal exited loop!
2020-08-10 23:20:07,028 - INFO  - [Bookie-45865:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:07,028 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:07,029 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:07,029 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:07,029 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:07,029 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:07,029 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:07,035 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:07,038 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:07,038 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:07,267 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testMultipleBookieFailures in 384 ms.
2020-08-10 23:20:07,269 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:07,270 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:07,284 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:07,292 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:34829/ledgers : zkServers = localhost:34829, ledgersRootPath = /ledgers.
2020-08-10 23:20:07,299 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:07,303 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:07,303 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:07,303 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:07,303 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:07,309 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:07,310 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie4411069906554386610test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:34829/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie4411069906554386610test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:07,312 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:34829/ledgers : zkServers = localhost:34829, ledgersRootPath = /ledgers.
2020-08-10 23:20:07,317 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:07,323 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:07,329 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie4411069906554386610test/current] [/tmp/bookie4411069906554386610test/current]
2020-08-10 23:20:07,339 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:07,341 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie4411069906554386610test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:07,341 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:07,341 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:07,342 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:07,342 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:07,343 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:07,343 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:07,357 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:35847 to become writable
2020-08-10 23:20:07,358 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:07,360 - INFO  - [SyncThread-70-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:07,364 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:07,366 - INFO  - [BookieJournal-35847:Journal@909] - Starting journal on /tmp/bookie4411069906554386610test/current
2020-08-10 23:20:07,368 - INFO  - [BookieJournal-35847:JournalChannel@157] - Opening journal /tmp/bookie4411069906554386610test/current/173da3eacc9.txn
2020-08-10 23:20:07,369 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:07,372 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35847
2020-08-10 23:20:07,626 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:35847' has been created.
2020-08-10 23:20:07,628 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:07,628 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie11137212199942689864test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:34829/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie11137212199942689864test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:07,631 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:34829/ledgers : zkServers = localhost:34829, ledgersRootPath = /ledgers.
2020-08-10 23:20:07,633 - INFO  - [BookieDeathWatcher-45865:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:07,634 - INFO  - [BookieDeathWatcher-45865:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-45865
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:07,634 - INFO  - [BookieDeathWatcher-45865:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:07,635 - INFO  - [BookieDeathWatcher-45865:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:07,638 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:07,641 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:07,648 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie11137212199942689864test/current] [/tmp/bookie11137212199942689864test/current]
2020-08-10 23:20:07,655 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:07,656 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie11137212199942689864test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:07,656 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:07,657 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:07,657 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:07,658 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:07,658 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:07,658 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:07,675 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:37885 to become writable
2020-08-10 23:20:07,676 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:07,677 - INFO  - [SyncThread-80-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:07,680 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:07,689 - INFO  - [BookieJournal-37885:Journal@909] - Starting journal on /tmp/bookie11137212199942689864test/current
2020-08-10 23:20:07,689 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:07,689 - INFO  - [BookieJournal-37885:JournalChannel@157] - Opening journal /tmp/bookie11137212199942689864test/current/173da3eae0a.txn
2020-08-10 23:20:07,697 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37885
2020-08-10 23:20:07,947 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:37885' has been created.
2020-08-10 23:20:07,949 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:07,949 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie11549330037083128214test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:34829/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie11549330037083128214test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:07,952 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:34829/ledgers : zkServers = localhost:34829, ledgersRootPath = /ledgers.
2020-08-10 23:20:07,959 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:07,964 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:07,969 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie11549330037083128214test/current] [/tmp/bookie11549330037083128214test/current]
2020-08-10 23:20:08,148 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:08,150 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie11549330037083128214test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:08,151 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:08,152 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:08,152 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:08,154 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:08,154 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:08,154 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:08,162 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:44313 to become writable
2020-08-10 23:20:08,163 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 1 ms.
2020-08-10 23:20:08,165 - INFO  - [SyncThread-90-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:08,169 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:08,172 - INFO  - [BookieJournal-44313:Journal@909] - Starting journal on /tmp/bookie11549330037083128214test/current
2020-08-10 23:20:08,172 - INFO  - [BookieJournal-44313:JournalChannel@157] - Opening journal /tmp/bookie11549330037083128214test/current/173da3eafed.txn
2020-08-10 23:20:08,173 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:08,181 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44313
2020-08-10 23:20:08,431 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:44313' has been created.
2020-08-10 23:20:08,432 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testTriggerAuditorBySettingDelayToZeroWithPendingAuditTask @ metadata service zk://localhost:34829/ledgers in 1161 ms.
2020-08-10 23:20:08,458 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:34829/ledgers : zkServers = localhost:34829, ledgersRootPath = /ledgers.
2020-08-10 23:20:08,462 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:08,465 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:08,465 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:08,465 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:08,465 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:08,467 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35847
2020-08-10 23:20:08,467 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37885
2020-08-10 23:20:08,468 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44313
2020-08-10 23:20:08,483 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:34829/ledgers : zkServers = localhost:34829, ledgersRootPath = /ledgers.
2020-08-10 23:20:08,493 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:08,496 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:08,496 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:08,497 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:08,497 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:08,505 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35847
2020-08-10 23:20:08,505 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37885
2020-08-10 23:20:08,505 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44313
2020-08-10 23:20:08,508 - INFO  - [AuditorElector-127.0.0.1:35847:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:08,510 - INFO  - [AuditorElector-127.0.0.1:35847:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:08,512 - INFO  - [AuditorElector-127.0.0.1:35847:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:35847
2020-08-10 23:20:08,517 - INFO  - [AuditorElector-127.0.0.1:35847:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:08,521 - INFO  - [AuditorElector-127.0.0.1:35847:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:08,523 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:08,523 - INFO  - [AuditorElector-127.0.0.1:35847:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094408449 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:08,524 - INFO  - [AuditorElector-127.0.0.1:35847:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:08,524 - INFO  - [AuditorElector-127.0.0.1:35847:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:08,529 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:34829/ledgers : zkServers = localhost:34829, ledgersRootPath = /ledgers.
2020-08-10 23:20:08,540 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:08,544 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:08,545 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:08,545 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:08,545 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:08,545 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:08,551 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35847
2020-08-10 23:20:08,551 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37885
2020-08-10 23:20:08,552 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44313
2020-08-10 23:20:09,565 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:37885, 127.0.0.1:44313, 127.0.0.1:35847] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:20:09,594 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:37885, 127.0.0.1:44313, 127.0.0.1:35847] for ledger: 0
2020-08-10 23:20:09,597 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:20:09,611 - INFO  - [bookie-io-75-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:09,612 - INFO  - [bookie-io-75-2:BookieRequestHandler@50] - Channel connected  [id: 0x4a56eb03, L:/127.0.0.1:37885 - R:/127.0.0.1:54372]
2020-08-10 23:20:09,613 - INFO  - [bookkeeper-io-61-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xa2e8dcea, L:/127.0.0.1:52432 - R:127.0.0.1/127.0.0.1:44313]
2020-08-10 23:20:09,614 - INFO  - [bookkeeper-io-61-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:44313
2020-08-10 23:20:09,614 - INFO  - [bookkeeper-io-61-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xe395fa83, L:/127.0.0.1:54372 - R:127.0.0.1/127.0.0.1:37885]
2020-08-10 23:20:09,615 - INFO  - [bookkeeper-io-61-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:37885
2020-08-10 23:20:09,617 - INFO  - [bookie-io-85-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:09,617 - INFO  - [bookie-io-85-2:BookieRequestHandler@50] - Channel connected  [id: 0x9bcbca7d, L:/127.0.0.1:44313 - R:/127.0.0.1:52432]
2020-08-10 23:20:09,618 - INFO  - [bookkeeper-io-61-2:PerChannelBookieClient$1@471] - connection [id: 0xa2e8dcea, L:/127.0.0.1:52432 - R:127.0.0.1/127.0.0.1:44313] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:09,620 - INFO  - [bookkeeper-io-61-1:PerChannelBookieClient$1@471] - connection [id: 0xe395fa83, L:/127.0.0.1:54372 - R:127.0.0.1/127.0.0.1:37885] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:09,626 - INFO  - [bookkeeper-io-61-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xe7ce4565, L:/127.0.0.1:42452 - R:127.0.0.1/127.0.0.1:35847]
2020-08-10 23:20:09,626 - INFO  - [bookkeeper-io-61-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:35847
2020-08-10 23:20:09,630 - INFO  - [bookkeeper-io-61-3:PerChannelBookieClient$1@471] - connection [id: 0xe7ce4565, L:/127.0.0.1:42452 - R:127.0.0.1/127.0.0.1:35847] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:09,633 - INFO  - [bookie-io-65-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:09,633 - INFO  - [bookie-io-65-2:BookieRequestHandler@50] - Channel connected  [id: 0xd68f2655, L:/127.0.0.1:35847 - R:/127.0.0.1:42452]
2020-08-10 23:20:09,727 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:09,727 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:09,728 - WARN  - [bookkeeper-io-61-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0xe395fa83, L:/127.0.0.1:54372 - R:127.0.0.1/127.0.0.1:37885] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:20:09,728 - INFO  - [bookkeeper-io-61-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xe395fa83, L:/127.0.0.1:54372 ! R:127.0.0.1/127.0.0.1:37885]
2020-08-10 23:20:09,730 - INFO  - [bookie-io-75-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x4a56eb03, L:/127.0.0.1:37885 ! R:/127.0.0.1:54372]
2020-08-10 23:20:09,741 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-37885 with exitCode 0
2020-08-10 23:20:09,741 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:09,741 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:09,741 - INFO  - [SyncThread-80-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:09,742 - INFO  - [SyncThread-80-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie11137212199942689864test/current/0.log for logId 0.
2020-08-10 23:20:09,743 - INFO  - [pool-51-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie11137212199942689864test/current/1.log for logId 1.
2020-08-10 23:20:09,753 - INFO  - [SyncThread-80-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094407690 , logFileOffset - 28672]}.
2020-08-10 23:20:09,756 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:09,757 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:09,757 - INFO  - [BookieJournal-37885:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:09,758 - INFO  - [BookieJournal-37885:Journal@1144] - Journal exited loop!
2020-08-10 23:20:09,759 - INFO  - [Bookie-37885:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:09,759 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:09,759 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:09,759 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:09,759 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:09,760 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:09,760 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:09,762 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:09,765 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:09,765 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:09,771 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37885
2020-08-10 23:20:09,771 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37885
2020-08-10 23:20:09,771 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37885
2020-08-10 23:20:09,874 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37885
2020-08-10 23:20:09,875 - INFO  - [AuditorElector-127.0.0.1:37885:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:09,882 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor$9@583] - Delaying bookie audit by 5 secs for [127.0.0.1:37885]
2020-08-10 23:20:10,702 - INFO  - [BookieDeathWatcher-37885:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:10,702 - INFO  - [BookieDeathWatcher-37885:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-37885
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:10,702 - INFO  - [BookieDeathWatcher-37885:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:10,702 - INFO  - [BookieDeathWatcher-37885:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:12,001 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor$10@615] - lostBookieRecoveryDelay period has been changed so canceling the pending AuditTask
2020-08-10 23:20:12,001 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor$10@624] - lostBookieRecoveryDelay has been set to 0 or reset to its previous value, so starting AuditTask. Current lostBookieRecoveryDelay: 0, previous lostBookieRecoveryDelay: 5
2020-08-10 23:20:12,003 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:12,013 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor@1114] - Following are the failed bookies: [127.0.0.1:37885], and searching its ledgers for re-replication
2020-08-10 23:20:12,014 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:37885] are identified as underreplicated
2020-08-10 23:20:12,031 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:20:12,031 - INFO  - [AuditorBookie-127.0.0.1:35847:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:12,136 - INFO  - [AuditorElector-127.0.0.1:44313:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:12,246 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:12,246 - INFO  - [AuditorElector-127.0.0.1:35847:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:12,362 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:20:12,362 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:35847
2020-08-10 23:20:12,363 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:37885
2020-08-10 23:20:12,364 - INFO  - [bookie-io-65-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xd68f2655, L:/127.0.0.1:35847 ! R:/127.0.0.1:42452]
2020-08-10 23:20:12,364 - INFO  - [bookkeeper-io-61-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xe7ce4565, L:/127.0.0.1:42452 ! R:127.0.0.1/127.0.0.1:35847]
2020-08-10 23:20:12,364 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:44313
2020-08-10 23:20:12,365 - INFO  - [bookkeeper-io-61-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xa2e8dcea, L:/127.0.0.1:52432 ! R:127.0.0.1/127.0.0.1:44313]
2020-08-10 23:20:12,365 - INFO  - [bookie-io-85-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x9bcbca7d, L:/127.0.0.1:44313 ! R:/127.0.0.1:52432]
2020-08-10 23:20:12,483 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:12,483 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:12,493 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-35847 with exitCode 0
2020-08-10 23:20:12,493 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:12,493 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:12,494 - INFO  - [SyncThread-70-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:12,497 - INFO  - [SyncThread-70-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4411069906554386610test/current/0.log for logId 0.
2020-08-10 23:20:12,498 - INFO  - [pool-44-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4411069906554386610test/current/1.log for logId 1.
2020-08-10 23:20:12,506 - INFO  - [SyncThread-70-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094407369 , logFileOffset - 32256]}.
2020-08-10 23:20:12,509 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:12,510 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:12,510 - INFO  - [BookieJournal-35847:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:12,511 - INFO  - [BookieJournal-35847:Journal@1144] - Journal exited loop!
2020-08-10 23:20:12,511 - INFO  - [Bookie-35847:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:12,511 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:12,512 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:12,512 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:12,512 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:12,512 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:12,512 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:12,517 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:12,519 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:12,519 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:12,627 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:12,627 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:12,632 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-44313 with exitCode 0
2020-08-10 23:20:12,632 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:12,632 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:12,632 - INFO  - [SyncThread-90-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:12,633 - INFO  - [SyncThread-90-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie11549330037083128214test/current/0.log for logId 0.
2020-08-10 23:20:12,635 - INFO  - [pool-58-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie11549330037083128214test/current/1.log for logId 1.
2020-08-10 23:20:12,643 - INFO  - [SyncThread-90-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094408173 , logFileOffset - 32768]}.
2020-08-10 23:20:12,646 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:12,647 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:12,647 - INFO  - [BookieJournal-44313:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:12,647 - INFO  - [BookieJournal-44313:Journal@1144] - Journal exited loop!
2020-08-10 23:20:12,648 - INFO  - [Bookie-44313:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:12,648 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:12,648 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:12,648 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:12,648 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:12,648 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:12,648 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:12,651 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:12,653 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:12,653 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:12,881 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testTriggerAuditorBySettingDelayToZeroWithPendingAuditTask in 518 ms.
2020-08-10 23:20:12,882 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:12,883 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:12,898 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:12,904 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:45659/ledgers : zkServers = localhost:45659, ledgersRootPath = /ledgers.
2020-08-10 23:20:12,909 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:12,911 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:12,912 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:12,912 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:12,912 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:12,924 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:12,926 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie8563986266350931337test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:45659/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie8563986266350931337test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:12,929 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:45659/ledgers : zkServers = localhost:45659, ledgersRootPath = /ledgers.
2020-08-10 23:20:12,934 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:12,936 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:12,941 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie8563986266350931337test/current] [/tmp/bookie8563986266350931337test/current]
2020-08-10 23:20:12,960 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:12,961 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie8563986266350931337test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:12,962 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:12,962 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:12,962 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:12,963 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:12,964 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:12,964 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:12,972 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:45607 to become writable
2020-08-10 23:20:12,973 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:12,974 - INFO  - [SyncThread-127-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:12,977 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:12,979 - INFO  - [BookieJournal-45607:Journal@909] - Starting journal on /tmp/bookie8563986266350931337test/current
2020-08-10 23:20:12,983 - INFO  - [BookieJournal-45607:JournalChannel@157] - Opening journal /tmp/bookie8563986266350931337test/current/173da3ec2b8.txn
2020-08-10 23:20:12,983 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:12,985 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45607
2020-08-10 23:20:13,185 - INFO  - [BookieDeathWatcher-44313:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:13,185 - INFO  - [BookieDeathWatcher-44313:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-44313
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:13,185 - INFO  - [BookieDeathWatcher-44313:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:13,185 - INFO  - [BookieDeathWatcher-44313:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:13,236 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:45607' has been created.
2020-08-10 23:20:13,237 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:13,238 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie13484664122234415458test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:45659/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie13484664122234415458test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:13,241 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:45659/ledgers : zkServers = localhost:45659, ledgersRootPath = /ledgers.
2020-08-10 23:20:13,248 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:13,254 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:13,261 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie13484664122234415458test/current] [/tmp/bookie13484664122234415458test/current]
2020-08-10 23:20:13,268 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:13,269 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie13484664122234415458test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:13,269 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:13,270 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:13,270 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:13,271 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:13,271 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:13,271 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:13,284 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:37209 to become writable
2020-08-10 23:20:13,285 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:13,285 - INFO  - [SyncThread-137-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:13,289 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:13,290 - INFO  - [BookieJournal-37209:Journal@909] - Starting journal on /tmp/bookie13484664122234415458test/current
2020-08-10 23:20:13,292 - INFO  - [BookieJournal-37209:JournalChannel@157] - Opening journal /tmp/bookie13484664122234415458test/current/173da3ec3ed.txn
2020-08-10 23:20:13,292 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:13,297 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37209
2020-08-10 23:20:13,375 - INFO  - [BookieDeathWatcher-35847:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:13,375 - INFO  - [BookieDeathWatcher-35847:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-35847
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:13,376 - INFO  - [BookieDeathWatcher-35847:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:13,376 - INFO  - [BookieDeathWatcher-35847:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:13,547 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:37209' has been created.
2020-08-10 23:20:13,549 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:13,549 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie2360150472091575986test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:45659/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie2360150472091575986test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:13,552 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:45659/ledgers : zkServers = localhost:45659, ledgersRootPath = /ledgers.
2020-08-10 23:20:13,556 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:13,560 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:13,566 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie2360150472091575986test/current] [/tmp/bookie2360150472091575986test/current]
2020-08-10 23:20:13,573 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:13,575 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie2360150472091575986test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:13,575 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:13,576 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:13,576 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:13,578 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:13,578 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:13,578 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:13,594 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:40895 to become writable
2020-08-10 23:20:13,594 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:13,595 - INFO  - [SyncThread-147-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:13,599 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:13,601 - INFO  - [BookieJournal-40895:Journal@909] - Starting journal on /tmp/bookie2360150472091575986test/current
2020-08-10 23:20:13,602 - INFO  - [BookieJournal-40895:JournalChannel@157] - Opening journal /tmp/bookie2360150472091575986test/current/173da3ec523.txn
2020-08-10 23:20:13,604 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:13,606 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:40895
2020-08-10 23:20:13,858 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:40895' has been created.
2020-08-10 23:20:13,859 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testReadOnlyBookieExclusionFromURLedgersCheck @ metadata service zk://localhost:45659/ledgers in 976 ms.
2020-08-10 23:20:13,882 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:45659/ledgers : zkServers = localhost:45659, ledgersRootPath = /ledgers.
2020-08-10 23:20:13,887 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:13,889 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:13,889 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:13,889 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:13,890 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:13,892 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45607
2020-08-10 23:20:13,892 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37209
2020-08-10 23:20:13,892 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:40895
2020-08-10 23:20:14,143 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:45659/ledgers : zkServers = localhost:45659, ledgersRootPath = /ledgers.
2020-08-10 23:20:14,151 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:14,155 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:14,155 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:14,155 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:14,155 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:14,157 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45607
2020-08-10 23:20:14,158 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37209
2020-08-10 23:20:14,158 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:40895
2020-08-10 23:20:14,162 - INFO  - [AuditorElector-127.0.0.1:45607:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:14,169 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:45659/ledgers : zkServers = localhost:45659, ledgersRootPath = /ledgers.
2020-08-10 23:20:14,170 - INFO  - [AuditorElector-127.0.0.1:45607:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:14,171 - INFO  - [AuditorElector-127.0.0.1:45607:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:45607
2020-08-10 23:20:14,175 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:14,177 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:14,178 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:14,178 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:14,178 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:14,179 - INFO  - [AuditorElector-127.0.0.1:45607:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:14,180 - INFO  - [AuditorElector-127.0.0.1:45607:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:14,184 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45607
2020-08-10 23:20:14,185 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37209
2020-08-10 23:20:14,185 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:40895
2020-08-10 23:20:14,185 - INFO  - [AuditorBookie-127.0.0.1:45607:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:14,186 - INFO  - [AuditorElector-127.0.0.1:45607:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094413874 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:14,186 - INFO  - [AuditorElector-127.0.0.1:45607:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:14,186 - INFO  - [AuditorElector-127.0.0.1:45607:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:14,188 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:37209, 127.0.0.1:40895, 127.0.0.1:45607] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:20:14,204 - INFO  - [AuditorBookie-127.0.0.1:45607:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:14,214 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:37209, 127.0.0.1:40895, 127.0.0.1:45607] for ledger: 0
2020-08-10 23:20:14,215 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:20:14,225 - INFO  - [bookkeeper-io-118-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x63c71436, L:/127.0.0.1:40804 - R:127.0.0.1/127.0.0.1:37209]
2020-08-10 23:20:14,226 - INFO  - [bookkeeper-io-118-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:37209
2020-08-10 23:20:14,228 - INFO  - [bookie-io-132-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:14,237 - INFO  - [bookkeeper-io-118-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xb84abb46, L:/127.0.0.1:46550 - R:127.0.0.1/127.0.0.1:45607]
2020-08-10 23:20:14,241 - INFO  - [bookkeeper-io-118-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:45607
2020-08-10 23:20:14,240 - INFO  - [bookie-io-122-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:14,243 - INFO  - [bookie-io-122-2:BookieRequestHandler@50] - Channel connected  [id: 0xb237d49c, L:/127.0.0.1:45607 - R:/127.0.0.1:46550]
2020-08-10 23:20:14,237 - INFO  - [bookie-io-132-2:BookieRequestHandler@50] - Channel connected  [id: 0x5a586e1f, L:/127.0.0.1:37209 - R:/127.0.0.1:40804]
2020-08-10 23:20:14,243 - INFO  - [bookie-io-142-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:14,242 - INFO  - [bookkeeper-io-118-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x6deb6e61, L:/127.0.0.1:42306 - R:127.0.0.1/127.0.0.1:40895]
2020-08-10 23:20:14,243 - INFO  - [bookkeeper-io-118-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:40895
2020-08-10 23:20:14,244 - INFO  - [bookkeeper-io-118-1:PerChannelBookieClient$1@471] - connection [id: 0x63c71436, L:/127.0.0.1:40804 - R:127.0.0.1/127.0.0.1:37209] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:14,244 - INFO  - [bookkeeper-io-118-3:PerChannelBookieClient$1@471] - connection [id: 0xb84abb46, L:/127.0.0.1:46550 - R:127.0.0.1/127.0.0.1:45607] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:14,254 - INFO  - [bookie-io-142-2:BookieRequestHandler@50] - Channel connected  [id: 0xa512eb52, L:/127.0.0.1:40895 - R:/127.0.0.1:42306]
2020-08-10 23:20:14,286 - INFO  - [bookkeeper-io-118-2:PerChannelBookieClient$1@471] - connection [id: 0x6deb6e61, L:/127.0.0.1:42306 - R:127.0.0.1/127.0.0.1:40895] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:14,348 - INFO  - [Time-limited test:BookieStateManager@331] - Transitioning Bookie to ReadOnly mode, and will serve only read requests from clients!
2020-08-10 23:20:14,357 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:40895 to become readonly
2020-08-10 23:20:14,357 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:40895
2020-08-10 23:20:14,357 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:40895
2020-08-10 23:20:14,357 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:40895
2020-08-10 23:20:14,357 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:40895
2020-08-10 23:20:19,365 - INFO  - [AuditorElector-127.0.0.1:40895:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:19,476 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:19,476 - INFO  - [AuditorElector-127.0.0.1:45607:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:19,492 - INFO  - [AuditorElector-127.0.0.1:37209:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:19,496 - INFO  - [AuditorElector-127.0.0.1:37209:ZkLedgerUnderreplicationManager@811] - lostBookieRecoveryDelay Znode is already present, so using existing lostBookieRecoveryDelay Znode value
2020-08-10 23:20:19,496 - INFO  - [AuditorElector-127.0.0.1:37209:Auditor@474] - Valid lostBookieRecoveryDelay zNode is available, so not creating lostBookieRecoveryDelay zNode as part of Auditor initialization 
2020-08-10 23:20:19,505 - INFO  - [AuditorElector-127.0.0.1:37209:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:37209
2020-08-10 23:20:19,518 - INFO  - [AuditorElector-127.0.0.1:37209:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:19,519 - INFO  - [AuditorElector-127.0.0.1:37209:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:19,521 - INFO  - [AuditorElector-127.0.0.1:37209:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094413874 durationSinceLastExecutionInSecs: 5 initialDelay: 604795 interval: 604800
2020-08-10 23:20:19,521 - INFO  - [AuditorElector-127.0.0.1:37209:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:19,521 - INFO  - [AuditorElector-127.0.0.1:37209:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:19,521 - INFO  - [AuditorBookie-127.0.0.1:37209:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:19,547 - INFO  - [AuditorBookie-127.0.0.1:37209:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:19,584 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:19,584 - INFO  - [AuditorElector-127.0.0.1:37209:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:19,693 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:20:19,693 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:45607
2020-08-10 23:20:19,694 - INFO  - [bookkeeper-io-118-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xb84abb46, L:/127.0.0.1:46550 ! R:127.0.0.1/127.0.0.1:45607]
2020-08-10 23:20:19,695 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:37209
2020-08-10 23:20:19,695 - INFO  - [bookie-io-122-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xb237d49c, L:/127.0.0.1:45607 ! R:/127.0.0.1:46550]
2020-08-10 23:20:19,696 - INFO  - [bookkeeper-io-118-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x63c71436, L:/127.0.0.1:40804 ! R:127.0.0.1/127.0.0.1:37209]
2020-08-10 23:20:19,696 - INFO  - [bookie-io-132-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x5a586e1f, L:/127.0.0.1:37209 ! R:/127.0.0.1:40804]
2020-08-10 23:20:19,696 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:40895
2020-08-10 23:20:19,697 - INFO  - [bookkeeper-io-118-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x6deb6e61, L:/127.0.0.1:42306 ! R:127.0.0.1/127.0.0.1:40895]
2020-08-10 23:20:19,697 - INFO  - [bookie-io-142-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xa512eb52, L:/127.0.0.1:40895 ! R:/127.0.0.1:42306]
2020-08-10 23:20:19,807 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:19,807 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:19,815 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-45607 with exitCode 0
2020-08-10 23:20:19,815 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:19,815 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:19,815 - INFO  - [SyncThread-127-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:19,816 - INFO  - [SyncThread-127-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie8563986266350931337test/current/0.log for logId 0.
2020-08-10 23:20:19,818 - INFO  - [pool-79-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie8563986266350931337test/current/1.log for logId 1.
2020-08-10 23:20:19,826 - INFO  - [SyncThread-127-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094412984 , logFileOffset - 23040]}.
2020-08-10 23:20:19,830 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:19,830 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:19,830 - INFO  - [BookieJournal-45607:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:19,831 - INFO  - [BookieJournal-45607:Journal@1144] - Journal exited loop!
2020-08-10 23:20:19,832 - INFO  - [Bookie-45607:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:19,832 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:19,832 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:19,833 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:19,833 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:19,833 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:19,833 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:19,836 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:19,839 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:19,839 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:19,945 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:19,945 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:19,955 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-37209 with exitCode 0
2020-08-10 23:20:19,956 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:19,956 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:19,956 - INFO  - [SyncThread-137-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:19,957 - INFO  - [SyncThread-137-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie13484664122234415458test/current/0.log for logId 0.
2020-08-10 23:20:19,958 - INFO  - [pool-86-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie13484664122234415458test/current/1.log for logId 1.
2020-08-10 23:20:19,967 - INFO  - [SyncThread-137-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094413293 , logFileOffset - 20480]}.
2020-08-10 23:20:19,971 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:19,971 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:19,972 - INFO  - [BookieJournal-37209:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:19,972 - INFO  - [BookieJournal-37209:Journal@1144] - Journal exited loop!
2020-08-10 23:20:19,972 - INFO  - [Bookie-37209:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:19,972 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:19,973 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:19,973 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:19,973 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:19,973 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:19,973 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:19,976 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:19,979 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:19,979 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:19,995 - INFO  - [BookieDeathWatcher-45607:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:19,995 - INFO  - [BookieDeathWatcher-45607:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-45607
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:19,995 - INFO  - [BookieDeathWatcher-45607:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:19,995 - INFO  - [BookieDeathWatcher-45607:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:20,085 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:20,086 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:20,090 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-40895 with exitCode 0
2020-08-10 23:20:20,090 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:20,090 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:20,091 - INFO  - [SyncThread-147-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:20,091 - INFO  - [SyncThread-147-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie2360150472091575986test/current/0.log for logId 0.
2020-08-10 23:20:20,093 - INFO  - [pool-93-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie2360150472091575986test/current/1.log for logId 1.
2020-08-10 23:20:20,100 - INFO  - [SyncThread-147-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094413603 , logFileOffset - 34816]}.
2020-08-10 23:20:20,104 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:20,104 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:20,105 - INFO  - [BookieJournal-40895:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:20,105 - INFO  - [BookieJournal-40895:Journal@1144] - Journal exited loop!
2020-08-10 23:20:20,105 - INFO  - [Bookie-40895:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:20,105 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:20,105 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:20,105 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:20,106 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:20,106 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:20,106 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:20,108 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:20,109 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:20,109 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:20,317 - INFO  - [BookieDeathWatcher-37209:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:20,317 - INFO  - [BookieDeathWatcher-37209:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-37209
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:20,318 - INFO  - [BookieDeathWatcher-37209:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:20,318 - INFO  - [BookieDeathWatcher-37209:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:20,319 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : null
2020-08-10 23:20:20,329 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testReadOnlyBookieExclusionFromURLedgersCheck in 636 ms.
2020-08-10 23:20:20,330 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:20,331 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:20,352 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:20,362 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42341/ledgers : zkServers = localhost:42341, ledgersRootPath = /ledgers.
2020-08-10 23:20:20,368 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:20,371 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:20,372 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:20,372 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:20,372 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:20,379 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:20,379 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie4474274998265146316test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42341/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie4474274998265146316test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:20,383 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42341/ledgers : zkServers = localhost:42341, ledgersRootPath = /ledgers.
2020-08-10 23:20:20,387 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:20,392 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:20,398 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie4474274998265146316test/current] [/tmp/bookie4474274998265146316test/current]
2020-08-10 23:20:20,409 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:20,420 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie4474274998265146316test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:20,420 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:20,421 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:20,421 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:20,422 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:20,422 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:20,422 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:20,432 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:38873 to become writable
2020-08-10 23:20:20,433 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:20,434 - INFO  - [SyncThread-187-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:20,438 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:20,439 - INFO  - [BookieJournal-38873:Journal@909] - Starting journal on /tmp/bookie4474274998265146316test/current
2020-08-10 23:20:20,440 - INFO  - [BookieJournal-38873:JournalChannel@157] - Opening journal /tmp/bookie4474274998265146316test/current/173da3edfd9.txn
2020-08-10 23:20:20,440 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:20,447 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38873
2020-08-10 23:20:20,618 - INFO  - [BookieDeathWatcher-40895:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:20,618 - INFO  - [BookieDeathWatcher-40895:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-40895
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:20,618 - INFO  - [BookieDeathWatcher-40895:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:20,618 - INFO  - [BookieDeathWatcher-40895:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:20,698 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:38873' has been created.
2020-08-10 23:20:20,705 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:20,705 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie10903815147509027428test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42341/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie10903815147509027428test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:20,709 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42341/ledgers : zkServers = localhost:42341, ledgersRootPath = /ledgers.
2020-08-10 23:20:20,712 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:20,715 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:20,721 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie10903815147509027428test/current] [/tmp/bookie10903815147509027428test/current]
2020-08-10 23:20:20,726 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:20,728 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie10903815147509027428test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:20,728 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:20,728 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:20,728 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:20,729 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:20,729 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:20,729 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:20,742 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:41923 to become writable
2020-08-10 23:20:20,742 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:20,744 - INFO  - [SyncThread-197-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:20,748 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:20,757 - INFO  - [BookieJournal-41923:Journal@909] - Starting journal on /tmp/bookie10903815147509027428test/current
2020-08-10 23:20:20,757 - INFO  - [BookieJournal-41923:JournalChannel@157] - Opening journal /tmp/bookie10903815147509027428test/current/173da3ee116.txn
2020-08-10 23:20:20,758 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:20,763 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41923
2020-08-10 23:20:21,013 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:41923' has been created.
2020-08-10 23:20:21,015 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:21,015 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie5578786098348553012test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42341/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie5578786098348553012test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:21,019 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42341/ledgers : zkServers = localhost:42341, ledgersRootPath = /ledgers.
2020-08-10 23:20:21,023 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:21,028 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:21,034 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie5578786098348553012test/current] [/tmp/bookie5578786098348553012test/current]
2020-08-10 23:20:21,042 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:21,043 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie5578786098348553012test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:21,044 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:21,044 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:21,045 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:21,046 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:21,046 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:21,046 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:21,066 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:36579 to become writable
2020-08-10 23:20:21,066 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:21,067 - INFO  - [SyncThread-207-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:21,072 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:21,074 - INFO  - [BookieJournal-36579:Journal@909] - Starting journal on /tmp/bookie5578786098348553012test/current
2020-08-10 23:20:21,075 - INFO  - [BookieJournal-36579:JournalChannel@157] - Opening journal /tmp/bookie5578786098348553012test/current/173da3ee254.txn
2020-08-10 23:20:21,076 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:21,083 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36579
2020-08-10 23:20:21,332 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:36579' has been created.
2020-08-10 23:20:21,333 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testRescheduleOfDelayedAuditOfLostBookiesToStartImmediately @ metadata service zk://localhost:42341/ledgers in 1002 ms.
2020-08-10 23:20:21,369 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42341/ledgers : zkServers = localhost:42341, ledgersRootPath = /ledgers.
2020-08-10 23:20:21,377 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:21,380 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:21,380 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:21,380 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:21,380 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:21,383 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41923
2020-08-10 23:20:21,383 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38873
2020-08-10 23:20:21,383 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36579
2020-08-10 23:20:21,404 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42341/ledgers : zkServers = localhost:42341, ledgersRootPath = /ledgers.
2020-08-10 23:20:21,409 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:21,410 - INFO  - [AuditorElector-127.0.0.1:38873:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:21,411 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:21,411 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:21,411 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:21,412 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:21,414 - INFO  - [AuditorElector-127.0.0.1:38873:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:21,415 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41923
2020-08-10 23:20:21,415 - INFO  - [AuditorElector-127.0.0.1:38873:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:38873
2020-08-10 23:20:21,415 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38873
2020-08-10 23:20:21,416 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36579
2020-08-10 23:20:21,420 - INFO  - [AuditorElector-127.0.0.1:38873:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:21,424 - INFO  - [AuditorElector-127.0.0.1:38873:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:21,425 - INFO  - [AuditorElector-127.0.0.1:38873:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094421357 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:21,425 - INFO  - [AuditorElector-127.0.0.1:38873:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:21,425 - INFO  - [AuditorElector-127.0.0.1:38873:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:21,425 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:21,433 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42341/ledgers : zkServers = localhost:42341, ledgersRootPath = /ledgers.
2020-08-10 23:20:21,444 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:21,445 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:21,447 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:21,448 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:21,448 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:21,448 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:21,451 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41923
2020-08-10 23:20:21,451 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38873
2020-08-10 23:20:21,451 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36579
2020-08-10 23:20:22,456 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:41923, 127.0.0.1:38873, 127.0.0.1:36579] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:20:22,494 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:41923, 127.0.0.1:38873, 127.0.0.1:36579] for ledger: 0
2020-08-10 23:20:22,494 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:20:22,507 - INFO  - [bookie-io-192-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:22,507 - INFO  - [bookie-io-182-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:22,507 - INFO  - [bookie-io-192-2:BookieRequestHandler@50] - Channel connected  [id: 0x9ce2a05a, L:/127.0.0.1:41923 - R:/127.0.0.1:48162]
2020-08-10 23:20:22,509 - INFO  - [bookkeeper-io-178-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x83aa3b26, L:/127.0.0.1:47002 - R:127.0.0.1/127.0.0.1:36579]
2020-08-10 23:20:22,509 - INFO  - [bookkeeper-io-178-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:36579
2020-08-10 23:20:22,509 - INFO  - [bookkeeper-io-178-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x4dcb39c1, L:/127.0.0.1:42528 - R:127.0.0.1/127.0.0.1:38873]
2020-08-10 23:20:22,512 - INFO  - [bookkeeper-io-178-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:38873
2020-08-10 23:20:22,509 - INFO  - [bookkeeper-io-178-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x90c15ae4, L:/127.0.0.1:48162 - R:127.0.0.1/127.0.0.1:41923]
2020-08-10 23:20:22,513 - INFO  - [bookkeeper-io-178-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:41923
2020-08-10 23:20:22,513 - INFO  - [bookkeeper-io-178-3:PerChannelBookieClient$1@471] - connection [id: 0x83aa3b26, L:/127.0.0.1:47002 - R:127.0.0.1/127.0.0.1:36579] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:22,515 - INFO  - [bookkeeper-io-178-1:PerChannelBookieClient$1@471] - connection [id: 0x90c15ae4, L:/127.0.0.1:48162 - R:127.0.0.1/127.0.0.1:41923] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:22,509 - INFO  - [bookie-io-182-2:BookieRequestHandler@50] - Channel connected  [id: 0xce75d522, L:/127.0.0.1:38873 - R:/127.0.0.1:42528]
2020-08-10 23:20:22,525 - INFO  - [bookie-io-202-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:22,526 - INFO  - [bookie-io-202-2:BookieRequestHandler@50] - Channel connected  [id: 0x59e3b225, L:/127.0.0.1:36579 - R:/127.0.0.1:47002]
2020-08-10 23:20:22,527 - INFO  - [bookkeeper-io-178-2:PerChannelBookieClient$1@471] - connection [id: 0x4dcb39c1, L:/127.0.0.1:42528 - R:127.0.0.1/127.0.0.1:38873] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:22,628 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:22,628 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:22,629 - WARN  - [bookkeeper-io-178-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0x90c15ae4, L:/127.0.0.1:48162 - R:127.0.0.1/127.0.0.1:41923] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:20:22,629 - INFO  - [bookie-io-192-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x9ce2a05a, L:/127.0.0.1:41923 ! R:/127.0.0.1:48162]
2020-08-10 23:20:22,629 - INFO  - [bookkeeper-io-178-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x90c15ae4, L:/127.0.0.1:48162 ! R:127.0.0.1/127.0.0.1:41923]
2020-08-10 23:20:22,631 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-41923 with exitCode 0
2020-08-10 23:20:22,632 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:22,632 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:22,632 - INFO  - [SyncThread-197-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:22,633 - INFO  - [SyncThread-197-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie10903815147509027428test/current/0.log for logId 0.
2020-08-10 23:20:22,635 - INFO  - [pool-121-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie10903815147509027428test/current/1.log for logId 1.
2020-08-10 23:20:22,642 - INFO  - [SyncThread-197-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094420758 , logFileOffset - 26112]}.
2020-08-10 23:20:22,645 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:22,646 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:22,646 - INFO  - [BookieJournal-41923:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:22,647 - INFO  - [BookieJournal-41923:Journal@1144] - Journal exited loop!
2020-08-10 23:20:22,647 - INFO  - [Bookie-41923:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:22,647 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:22,648 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:22,648 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:22,648 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:22,648 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:22,648 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:22,652 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:22,653 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:22,653 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:22,667 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:41923
2020-08-10 23:20:22,667 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:41923
2020-08-10 23:20:22,667 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:41923
2020-08-10 23:20:22,668 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:41923
2020-08-10 23:20:22,671 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor$9@583] - Delaying bookie audit by 50 secs for [127.0.0.1:41923]
2020-08-10 23:20:22,762 - INFO  - [AuditorElector-127.0.0.1:41923:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:22,763 - INFO  - [BookieDeathWatcher-41923:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:22,764 - INFO  - [BookieDeathWatcher-41923:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-41923
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:22,765 - INFO  - [BookieDeathWatcher-41923:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:22,765 - INFO  - [BookieDeathWatcher-41923:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:26,890 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor$10@615] - lostBookieRecoveryDelay period has been changed so canceling the pending AuditTask
2020-08-10 23:20:26,890 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor$10@624] - lostBookieRecoveryDelay has been set to 0 or reset to its previous value, so starting AuditTask. Current lostBookieRecoveryDelay: 0, previous lostBookieRecoveryDelay: 50
2020-08-10 23:20:26,890 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:26,901 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor@1114] - Following are the failed bookies: [127.0.0.1:41923], and searching its ledgers for re-replication
2020-08-10 23:20:26,902 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:41923] are identified as underreplicated
2020-08-10 23:20:26,925 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:20:26,925 - INFO  - [AuditorBookie-127.0.0.1:38873:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:26,928 - INFO  - [AuditorElector-127.0.0.1:36579:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:27,054 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:27,055 - INFO  - [AuditorElector-127.0.0.1:38873:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:27,191 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:20:27,191 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:41923
2020-08-10 23:20:27,192 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:38873
2020-08-10 23:20:27,193 - INFO  - [bookkeeper-io-178-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x4dcb39c1, L:/127.0.0.1:42528 ! R:127.0.0.1/127.0.0.1:38873]
2020-08-10 23:20:27,193 - INFO  - [bookie-io-182-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xce75d522, L:/127.0.0.1:38873 ! R:/127.0.0.1:42528]
2020-08-10 23:20:27,193 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:36579
2020-08-10 23:20:27,195 - INFO  - [bookkeeper-io-178-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x83aa3b26, L:/127.0.0.1:47002 ! R:127.0.0.1/127.0.0.1:36579]
2020-08-10 23:20:27,195 - INFO  - [bookie-io-202-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x59e3b225, L:/127.0.0.1:36579 ! R:/127.0.0.1:47002]
2020-08-10 23:20:27,308 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:27,309 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:27,324 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-38873 with exitCode 0
2020-08-10 23:20:27,325 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:27,325 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:27,325 - INFO  - [SyncThread-187-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:27,326 - INFO  - [SyncThread-187-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4474274998265146316test/current/0.log for logId 0.
2020-08-10 23:20:27,329 - INFO  - [pool-114-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4474274998265146316test/current/1.log for logId 1.
2020-08-10 23:20:27,337 - INFO  - [SyncThread-187-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094420441 , logFileOffset - 27648]}.
2020-08-10 23:20:27,341 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:27,342 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:27,343 - INFO  - [BookieJournal-38873:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:27,343 - INFO  - [BookieJournal-38873:Journal@1144] - Journal exited loop!
2020-08-10 23:20:27,344 - INFO  - [Bookie-38873:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:27,345 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:27,348 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:27,349 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:27,349 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:27,349 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:27,350 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:27,356 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:27,358 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:27,358 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:27,474 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:27,477 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:27,485 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-36579 with exitCode 0
2020-08-10 23:20:27,486 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:27,486 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:27,486 - INFO  - [SyncThread-207-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:27,487 - INFO  - [SyncThread-207-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie5578786098348553012test/current/0.log for logId 0.
2020-08-10 23:20:27,488 - INFO  - [pool-128-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie5578786098348553012test/current/1.log for logId 1.
2020-08-10 23:20:27,498 - INFO  - [SyncThread-207-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094421076 , logFileOffset - 7168]}.
2020-08-10 23:20:27,512 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:27,512 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:27,513 - INFO  - [BookieJournal-36579:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:27,513 - INFO  - [BookieJournal-36579:Journal@1144] - Journal exited loop!
2020-08-10 23:20:27,514 - INFO  - [Bookie-36579:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:27,514 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:27,515 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:27,516 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:27,516 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:27,516 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:27,516 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:27,518 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:27,519 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:27,519 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:27,752 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testRescheduleOfDelayedAuditOfLostBookiesToStartImmediately in 561 ms.
2020-08-10 23:20:27,755 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:27,756 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:27,774 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:27,785 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:33427/ledgers : zkServers = localhost:33427, ledgersRootPath = /ledgers.
2020-08-10 23:20:27,791 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:27,809 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:27,809 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:27,810 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:27,810 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:27,817 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:27,817 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie2260985493123882028test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:33427/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie2260985493123882028test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:27,820 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:33427/ledgers : zkServers = localhost:33427, ledgersRootPath = /ledgers.
2020-08-10 23:20:27,827 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:27,830 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:27,851 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie2260985493123882028test/current] [/tmp/bookie2260985493123882028test/current]
2020-08-10 23:20:27,870 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:27,871 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie2260985493123882028test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:27,871 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:27,871 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:27,872 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:27,873 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:27,873 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:27,873 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:27,882 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:32945 to become writable
2020-08-10 23:20:27,883 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:27,885 - INFO  - [SyncThread-244-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:27,888 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:27,891 - INFO  - [BookieJournal-32945:Journal@909] - Starting journal on /tmp/bookie2260985493123882028test/current
2020-08-10 23:20:27,892 - INFO  - [BookieJournal-32945:JournalChannel@157] - Opening journal /tmp/bookie2260985493123882028test/current/173da3efcf5.txn
2020-08-10 23:20:27,893 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:27,903 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32945
2020-08-10 23:20:28,092 - INFO  - [BookieDeathWatcher-36579:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:28,092 - INFO  - [BookieDeathWatcher-36579:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-36579
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:28,093 - INFO  - [BookieDeathWatcher-36579:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:28,093 - INFO  - [BookieDeathWatcher-36579:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:28,155 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:32945' has been created.
2020-08-10 23:20:28,157 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:28,158 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie16839617579551824876test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:33427/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie16839617579551824876test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:28,164 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:33427/ledgers : zkServers = localhost:33427, ledgersRootPath = /ledgers.
2020-08-10 23:20:28,172 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:28,185 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:28,191 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie16839617579551824876test/current] [/tmp/bookie16839617579551824876test/current]
2020-08-10 23:20:28,200 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:28,203 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie16839617579551824876test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:28,203 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:28,204 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:28,204 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:28,206 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:28,206 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:28,206 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:28,218 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:35971 to become writable
2020-08-10 23:20:28,219 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:28,220 - INFO  - [SyncThread-254-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:28,223 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:28,225 - INFO  - [BookieJournal-35971:Journal@909] - Starting journal on /tmp/bookie16839617579551824876test/current
2020-08-10 23:20:28,226 - INFO  - [BookieJournal-35971:JournalChannel@157] - Opening journal /tmp/bookie16839617579551824876test/current/173da3efe43.txn
2020-08-10 23:20:28,227 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:28,234 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35971
2020-08-10 23:20:28,456 - INFO  - [BookieDeathWatcher-38873:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:28,457 - INFO  - [BookieDeathWatcher-38873:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-38873
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:28,457 - INFO  - [BookieDeathWatcher-38873:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:28,457 - INFO  - [BookieDeathWatcher-38873:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:28,494 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:35971' has been created.
2020-08-10 23:20:28,496 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:28,496 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie12117659306403660163test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:33427/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie12117659306403660163test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:28,503 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:33427/ledgers : zkServers = localhost:33427, ledgersRootPath = /ledgers.
2020-08-10 23:20:28,528 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:28,540 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:28,554 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie12117659306403660163test/current] [/tmp/bookie12117659306403660163test/current]
2020-08-10 23:20:28,562 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:28,565 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie12117659306403660163test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:28,566 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:28,567 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:28,567 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:28,568 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:28,569 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:28,569 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:28,586 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:35599 to become writable
2020-08-10 23:20:28,591 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:28,593 - INFO  - [SyncThread-264-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:28,597 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:28,601 - INFO  - [BookieJournal-35599:Journal@909] - Starting journal on /tmp/bookie12117659306403660163test/current
2020-08-10 23:20:28,602 - INFO  - [BookieJournal-35599:JournalChannel@157] - Opening journal /tmp/bookie12117659306403660163test/current/173da3effbb.txn
2020-08-10 23:20:28,603 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:28,609 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35599
2020-08-10 23:20:28,859 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:35599' has been created.
2020-08-10 23:20:28,861 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testTriggerAuditorWithNoPendingAuditTask @ metadata service zk://localhost:33427/ledgers in 1105 ms.
2020-08-10 23:20:28,889 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:33427/ledgers : zkServers = localhost:33427, ledgersRootPath = /ledgers.
2020-08-10 23:20:28,902 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:28,904 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:28,905 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:28,905 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:28,905 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:28,907 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32945
2020-08-10 23:20:28,907 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35599
2020-08-10 23:20:28,907 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35971
2020-08-10 23:20:28,924 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:33427/ledgers : zkServers = localhost:33427, ledgersRootPath = /ledgers.
2020-08-10 23:20:28,931 - INFO  - [AuditorElector-127.0.0.1:32945:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:28,934 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:28,937 - INFO  - [AuditorElector-127.0.0.1:32945:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:28,939 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:28,939 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:28,939 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:28,939 - INFO  - [AuditorElector-127.0.0.1:32945:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:32945
2020-08-10 23:20:28,939 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:28,944 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32945
2020-08-10 23:20:28,944 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35599
2020-08-10 23:20:28,944 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35971
2020-08-10 23:20:28,945 - INFO  - [AuditorElector-127.0.0.1:32945:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:28,946 - INFO  - [AuditorElector-127.0.0.1:32945:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:28,950 - INFO  - [AuditorBookie-127.0.0.1:32945:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:28,950 - INFO  - [AuditorElector-127.0.0.1:32945:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094428878 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:28,950 - INFO  - [AuditorElector-127.0.0.1:32945:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:28,950 - INFO  - [AuditorElector-127.0.0.1:32945:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:28,957 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:33427/ledgers : zkServers = localhost:33427, ledgersRootPath = /ledgers.
2020-08-10 23:20:28,960 - INFO  - [AuditorBookie-127.0.0.1:32945:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:28,962 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:28,965 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:28,965 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:28,965 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:28,966 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:28,969 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32945
2020-08-10 23:20:28,970 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35599
2020-08-10 23:20:28,970 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35971
2020-08-10 23:20:29,992 - INFO  - [Time-limited test:ZKMetadataDriverBase@163] - Initialize zookeeper metadata driver with external zookeeper client : ledgersRootPath = /ledgers.
2020-08-10 23:20:30,067 - INFO  - [AuditorBookie-127.0.0.1:32945:Auditor$10@624] - lostBookieRecoveryDelay has been set to 0 or reset to its previous value, so starting AuditTask. Current lostBookieRecoveryDelay: 0, previous lostBookieRecoveryDelay: 0
2020-08-10 23:20:30,068 - INFO  - [AuditorBookie-127.0.0.1:32945:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:30,171 - INFO  - [AuditorBookie-127.0.0.1:32945:Auditor@1114] - Following are the failed bookies: [88.88.88.88:8888, 11.11.11.11:1111, 99.99.99.99:9999], and searching its ledgers for re-replication
2020-08-10 23:20:30,175 - INFO  - [AuditorBookie-127.0.0.1:32945:Auditor@1132] - Following ledgers: [47480870, 11527413, 8294565, 18434005, 83327593] of bookie: [88.88.88.88:8888] are identified as underreplicated
2020-08-10 23:20:30,198 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/02d4/8026/urL0047480870
2020-08-10 23:20:30,212 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/00af/e4f5/urL0011527413
2020-08-10 23:20:30,228 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/007e/90a5/urL0008294565
2020-08-10 23:20:30,251 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0119/47d5/urL0018434005
2020-08-10 23:20:30,270 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/04f7/7a69/urL0083327593
2020-08-10 23:20:30,270 - INFO  - [Time-limited test-EventThread:Auditor@1132] - Following ledgers: [47480870, 11527413, 8294565, 18434005, 83327593] of bookie: [11.11.11.11:1111] are identified as underreplicated
2020-08-10 23:20:30,271 - INFO  - [AuditorElector-127.0.0.1:35599:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:30,380 - INFO  - [AuditorElector-127.0.0.1:35971:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:30,495 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:30,495 - INFO  - [AuditorElector-127.0.0.1:32945:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:30,526 - INFO  - [Time-limited test-EventThread:Auditor@1132] - Following ledgers: [47480870, 11527413, 8294565, 18434005, 83327593] of bookie: [99.99.99.99:9999] are identified as underreplicated
2020-08-10 23:20:30,580 - INFO  - [AuditorBookie-127.0.0.1:32945:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:30,693 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:20:30,802 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:30,802 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:30,809 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-32945 with exitCode 0
2020-08-10 23:20:30,809 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:30,809 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:30,810 - INFO  - [SyncThread-244-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:30,814 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:30,814 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:30,815 - INFO  - [BookieJournal-32945:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:30,815 - INFO  - [BookieJournal-32945:Journal@1144] - Journal exited loop!
2020-08-10 23:20:30,816 - INFO  - [Bookie-32945:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:30,816 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:30,817 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:30,817 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:30,817 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:30,817 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:30,817 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:30,817 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:30,817 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:30,817 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:30,924 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:30,924 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:30,933 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-35971 with exitCode 0
2020-08-10 23:20:30,934 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:30,934 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:30,935 - INFO  - [SyncThread-254-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:30,939 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:30,940 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:30,940 - INFO  - [BookieJournal-35971:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:30,941 - INFO  - [BookieJournal-35971:Journal@1144] - Journal exited loop!
2020-08-10 23:20:30,941 - INFO  - [Bookie-35971:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:30,941 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:30,942 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:30,942 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:30,942 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:30,942 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:30,942 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:30,942 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:30,942 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:30,942 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:31,050 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:31,050 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:31,062 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-35599 with exitCode 0
2020-08-10 23:20:31,063 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:31,063 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:31,063 - INFO  - [SyncThread-264-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:31,067 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:31,067 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:31,067 - INFO  - [BookieJournal-35599:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:31,067 - INFO  - [BookieJournal-35599:Journal@1144] - Journal exited loop!
2020-08-10 23:20:31,069 - INFO  - [Bookie-35599:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:31,069 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:31,070 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:31,070 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:31,071 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:31,071 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:31,071 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:31,071 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:31,071 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:31,071 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:31,234 - INFO  - [BookieDeathWatcher-35971:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:31,234 - INFO  - [BookieDeathWatcher-35971:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-35971
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:31,234 - INFO  - [BookieDeathWatcher-35971:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:31,235 - INFO  - [BookieDeathWatcher-35971:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:31,286 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testTriggerAuditorWithNoPendingAuditTask in 592 ms.
2020-08-10 23:20:31,287 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:31,293 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:31,307 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:31,319 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42857/ledgers : zkServers = localhost:42857, ledgersRootPath = /ledgers.
2020-08-10 23:20:31,325 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:31,327 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:31,327 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:31,327 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:31,327 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:31,334 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:31,335 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie8984451337813284578test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42857/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie8984451337813284578test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:31,341 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42857/ledgers : zkServers = localhost:42857, ledgersRootPath = /ledgers.
2020-08-10 23:20:31,346 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:31,351 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:31,357 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie8984451337813284578test/current] [/tmp/bookie8984451337813284578test/current]
2020-08-10 23:20:31,369 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:31,370 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie8984451337813284578test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:31,371 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:31,371 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:31,371 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:31,373 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:31,373 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:31,373 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:31,378 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:39971 to become writable
2020-08-10 23:20:31,379 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:31,380 - INFO  - [SyncThread-317-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:31,384 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:31,387 - INFO  - [BookieJournal-39971:Journal@909] - Starting journal on /tmp/bookie8984451337813284578test/current
2020-08-10 23:20:31,388 - INFO  - [BookieJournal-39971:JournalChannel@157] - Opening journal /tmp/bookie8984451337813284578test/current/173da3f0a9d.txn
2020-08-10 23:20:31,396 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:31,402 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39971
2020-08-10 23:20:31,612 - INFO  - [BookieDeathWatcher-35599:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:31,612 - INFO  - [BookieDeathWatcher-35599:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-35599
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:31,612 - INFO  - [BookieDeathWatcher-35599:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:31,612 - INFO  - [BookieDeathWatcher-35599:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:31,652 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:39971' has been created.
2020-08-10 23:20:31,653 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:31,653 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie15206078428130960642test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42857/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie15206078428130960642test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:31,656 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42857/ledgers : zkServers = localhost:42857, ledgersRootPath = /ledgers.
2020-08-10 23:20:31,659 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:31,661 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:31,666 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie15206078428130960642test/current] [/tmp/bookie15206078428130960642test/current]
2020-08-10 23:20:31,674 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:31,676 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie15206078428130960642test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:31,676 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:31,676 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:31,677 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:31,678 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:31,678 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:31,678 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:31,691 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:45473 to become writable
2020-08-10 23:20:31,691 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:31,692 - INFO  - [SyncThread-327-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:31,696 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:31,704 - INFO  - [BookieJournal-45473:Journal@909] - Starting journal on /tmp/bookie15206078428130960642test/current
2020-08-10 23:20:31,705 - INFO  - [BookieJournal-45473:JournalChannel@157] - Opening journal /tmp/bookie15206078428130960642test/current/173da3f0bda.txn
2020-08-10 23:20:31,706 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:31,712 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45473
2020-08-10 23:20:31,908 - INFO  - [BookieDeathWatcher-32945:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:31,908 - INFO  - [BookieDeathWatcher-32945:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-32945
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:31,908 - INFO  - [BookieDeathWatcher-32945:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:31,908 - INFO  - [BookieDeathWatcher-32945:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:31,962 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:45473' has been created.
2020-08-10 23:20:31,963 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:31,963 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie15343600350141442714test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42857/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie15343600350141442714test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:31,966 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42857/ledgers : zkServers = localhost:42857, ledgersRootPath = /ledgers.
2020-08-10 23:20:31,972 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:31,975 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:31,981 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie15343600350141442714test/current] [/tmp/bookie15343600350141442714test/current]
2020-08-10 23:20:31,991 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:31,993 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie15343600350141442714test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:31,993 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:31,993 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:31,994 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:31,995 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:31,995 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:31,995 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:32,009 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:32979 to become writable
2020-08-10 23:20:32,010 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:32,011 - INFO  - [SyncThread-337-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:32,016 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:32,025 - INFO  - [BookieJournal-32979:Journal@909] - Starting journal on /tmp/bookie15343600350141442714test/current
2020-08-10 23:20:32,026 - INFO  - [BookieJournal-32979:JournalChannel@157] - Opening journal /tmp/bookie15343600350141442714test/current/173da3f0d1b.txn
2020-08-10 23:20:32,026 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:32,032 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32979
2020-08-10 23:20:32,280 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:32979' has been created.
2020-08-10 23:20:32,281 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testRescheduleOfDelayedAuditOfLostBookiesToStartLater @ metadata service zk://localhost:42857/ledgers in 988 ms.
2020-08-10 23:20:32,313 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42857/ledgers : zkServers = localhost:42857, ledgersRootPath = /ledgers.
2020-08-10 23:20:32,318 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:32,320 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:32,320 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:32,320 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:32,320 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:32,323 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45473
2020-08-10 23:20:32,324 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32979
2020-08-10 23:20:32,324 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39971
2020-08-10 23:20:32,336 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42857/ledgers : zkServers = localhost:42857, ledgersRootPath = /ledgers.
2020-08-10 23:20:32,344 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:32,347 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:32,347 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:32,348 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:32,348 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:32,354 - INFO  - [AuditorElector-127.0.0.1:39971:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:32,356 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45473
2020-08-10 23:20:32,356 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32979
2020-08-10 23:20:32,356 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39971
2020-08-10 23:20:32,357 - INFO  - [AuditorElector-127.0.0.1:39971:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:32,358 - INFO  - [AuditorElector-127.0.0.1:39971:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:39971
2020-08-10 23:20:32,362 - INFO  - [AuditorElector-127.0.0.1:39971:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:32,363 - INFO  - [AuditorElector-127.0.0.1:39971:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:32,365 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:32,365 - INFO  - [AuditorElector-127.0.0.1:39971:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094432300 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:32,366 - INFO  - [AuditorElector-127.0.0.1:39971:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:32,366 - INFO  - [AuditorElector-127.0.0.1:39971:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:32,368 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42857/ledgers : zkServers = localhost:42857, ledgersRootPath = /ledgers.
2020-08-10 23:20:32,372 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:32,375 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:32,376 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:32,376 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:32,376 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:32,379 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45473
2020-08-10 23:20:32,379 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32979
2020-08-10 23:20:32,379 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39971
2020-08-10 23:20:32,381 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:33,388 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:45473, 127.0.0.1:39971, 127.0.0.1:32979] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:20:33,417 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:45473, 127.0.0.1:39971, 127.0.0.1:32979] for ledger: 0
2020-08-10 23:20:33,418 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:20:33,440 - INFO  - [bookie-io-332-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:33,440 - INFO  - [bookie-io-332-2:BookieRequestHandler@50] - Channel connected  [id: 0x1084dc86, L:/127.0.0.1:32979 - R:/127.0.0.1:39864]
2020-08-10 23:20:33,442 - INFO  - [bookie-io-312-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:33,442 - INFO  - [bookie-io-312-2:BookieRequestHandler@50] - Channel connected  [id: 0xc9753417, L:/127.0.0.1:39971 - R:/127.0.0.1:56804]
2020-08-10 23:20:33,443 - INFO  - [bookkeeper-io-308-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x694617e1, L:/127.0.0.1:38376 - R:127.0.0.1/127.0.0.1:45473]
2020-08-10 23:20:33,443 - INFO  - [bookkeeper-io-308-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:45473
2020-08-10 23:20:33,443 - INFO  - [bookie-io-322-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:33,443 - INFO  - [bookie-io-322-2:BookieRequestHandler@50] - Channel connected  [id: 0x3c096944, L:/127.0.0.1:45473 - R:/127.0.0.1:38376]
2020-08-10 23:20:33,444 - INFO  - [bookkeeper-io-308-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xad794fd6, L:/127.0.0.1:56804 - R:127.0.0.1/127.0.0.1:39971]
2020-08-10 23:20:33,444 - INFO  - [bookkeeper-io-308-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:39971
2020-08-10 23:20:33,444 - INFO  - [bookkeeper-io-308-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x5399d36a, L:/127.0.0.1:39864 - R:127.0.0.1/127.0.0.1:32979]
2020-08-10 23:20:33,460 - INFO  - [bookkeeper-io-308-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:32979
2020-08-10 23:20:33,463 - INFO  - [bookkeeper-io-308-2:PerChannelBookieClient$1@471] - connection [id: 0xad794fd6, L:/127.0.0.1:56804 - R:127.0.0.1/127.0.0.1:39971] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:33,463 - INFO  - [bookkeeper-io-308-3:PerChannelBookieClient$1@471] - connection [id: 0x5399d36a, L:/127.0.0.1:39864 - R:127.0.0.1/127.0.0.1:32979] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:33,465 - INFO  - [bookkeeper-io-308-1:PerChannelBookieClient$1@471] - connection [id: 0x694617e1, L:/127.0.0.1:38376 - R:127.0.0.1/127.0.0.1:45473] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:33,541 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:33,542 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:33,542 - WARN  - [bookkeeper-io-308-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0x694617e1, L:/127.0.0.1:38376 - R:127.0.0.1/127.0.0.1:45473] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:20:33,543 - INFO  - [bookkeeper-io-308-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x694617e1, L:/127.0.0.1:38376 ! R:127.0.0.1/127.0.0.1:45473]
2020-08-10 23:20:33,543 - INFO  - [bookie-io-322-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x3c096944, L:/127.0.0.1:45473 ! R:/127.0.0.1:38376]
2020-08-10 23:20:33,551 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-45473 with exitCode 0
2020-08-10 23:20:33,551 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:33,551 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:33,551 - INFO  - [SyncThread-327-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:33,552 - INFO  - [SyncThread-327-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15206078428130960642test/current/0.log for logId 0.
2020-08-10 23:20:33,555 - INFO  - [pool-191-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15206078428130960642test/current/1.log for logId 1.
2020-08-10 23:20:33,561 - INFO  - [SyncThread-327-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094431706 , logFileOffset - 22528]}.
2020-08-10 23:20:33,564 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:33,564 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:33,564 - INFO  - [BookieJournal-45473:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:33,565 - INFO  - [BookieJournal-45473:Journal@1144] - Journal exited loop!
2020-08-10 23:20:33,565 - INFO  - [Bookie-45473:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:33,565 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:33,566 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:33,566 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:33,566 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:33,566 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:33,566 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:33,568 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:33,569 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:33,569 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:33,572 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:45473
2020-08-10 23:20:33,683 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:45473
2020-08-10 23:20:33,683 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:45473
2020-08-10 23:20:33,684 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:45473
2020-08-10 23:20:33,683 - INFO  - [AuditorElector-127.0.0.1:45473:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:33,691 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor$9@583] - Delaying bookie audit by 3 secs for [127.0.0.1:45473]
2020-08-10 23:20:33,717 - INFO  - [BookieDeathWatcher-45473:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:33,718 - INFO  - [BookieDeathWatcher-45473:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-45473
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:33,718 - INFO  - [BookieDeathWatcher-45473:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:33,718 - INFO  - [BookieDeathWatcher-45473:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:35,809 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor$10@615] - lostBookieRecoveryDelay period has been changed so canceling the pending AuditTask
2020-08-10 23:20:35,810 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor$10@633] - lostBookieRecoveryDelay has been set to 4, so rescheduling AuditTask accordingly
2020-08-10 23:20:39,817 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:39,827 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor@1114] - Following are the failed bookies: [127.0.0.1:45473], and searching its ledgers for re-replication
2020-08-10 23:20:39,827 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:45473] are identified as underreplicated
2020-08-10 23:20:39,851 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:20:39,851 - INFO  - [AuditorBookie-127.0.0.1:39971:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:39,853 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:39,853 - INFO  - [AuditorElector-127.0.0.1:39971:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:39,870 - INFO  - [AuditorElector-127.0.0.1:32979:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:39,872 - INFO  - [AuditorElector-127.0.0.1:32979:ZkLedgerUnderreplicationManager@811] - lostBookieRecoveryDelay Znode is already present, so using existing lostBookieRecoveryDelay Znode value
2020-08-10 23:20:39,873 - INFO  - [AuditorElector-127.0.0.1:32979:Auditor@474] - Valid lostBookieRecoveryDelay zNode is available, so not creating lostBookieRecoveryDelay zNode as part of Auditor initialization 
2020-08-10 23:20:39,874 - INFO  - [AuditorElector-127.0.0.1:32979:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:32979
2020-08-10 23:20:39,878 - INFO  - [AuditorElector-127.0.0.1:32979:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:39,880 - INFO  - [AuditorElector-127.0.0.1:32979:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:39,881 - INFO  - [AuditorElector-127.0.0.1:32979:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094432300 durationSinceLastExecutionInSecs: 7 initialDelay: 604793 interval: 604800
2020-08-10 23:20:39,881 - INFO  - [AuditorElector-127.0.0.1:32979:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:39,881 - INFO  - [AuditorElector-127.0.0.1:32979:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:39,882 - INFO  - [AuditorBookie-127.0.0.1:32979:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:39,899 - INFO  - [AuditorBookie-127.0.0.1:32979:Auditor@1114] - Following are the failed bookies: [127.0.0.1:45473], and searching its ledgers for re-replication
2020-08-10 23:20:39,899 - INFO  - [AuditorBookie-127.0.0.1:32979:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:45473] are identified as underreplicated
2020-08-10 23:20:39,904 - INFO  - [AuditorBookie-127.0.0.1:32979:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:39,967 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:39,968 - INFO  - [AuditorElector-127.0.0.1:32979:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:40,074 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:20:40,074 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:45473
2020-08-10 23:20:40,076 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:32979
2020-08-10 23:20:40,076 - INFO  - [bookkeeper-io-308-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x5399d36a, L:/127.0.0.1:39864 ! R:127.0.0.1/127.0.0.1:32979]
2020-08-10 23:20:40,077 - INFO  - [bookie-io-332-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x1084dc86, L:/127.0.0.1:32979 ! R:/127.0.0.1:39864]
2020-08-10 23:20:40,077 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:39971
2020-08-10 23:20:40,077 - INFO  - [bookkeeper-io-308-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xad794fd6, L:/127.0.0.1:56804 ! R:127.0.0.1/127.0.0.1:39971]
2020-08-10 23:20:40,078 - INFO  - [bookie-io-312-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xc9753417, L:/127.0.0.1:39971 ! R:/127.0.0.1:56804]
2020-08-10 23:20:40,187 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:40,187 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:40,191 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-39971 with exitCode 0
2020-08-10 23:20:40,191 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:40,191 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:40,191 - INFO  - [SyncThread-317-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:40,192 - INFO  - [SyncThread-317-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie8984451337813284578test/current/0.log for logId 0.
2020-08-10 23:20:40,193 - INFO  - [pool-184-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie8984451337813284578test/current/1.log for logId 1.
2020-08-10 23:20:40,201 - INFO  - [SyncThread-317-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094431389 , logFileOffset - 24576]}.
2020-08-10 23:20:40,205 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:40,206 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:40,207 - INFO  - [BookieJournal-39971:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:40,207 - INFO  - [BookieJournal-39971:Journal@1144] - Journal exited loop!
2020-08-10 23:20:40,207 - INFO  - [Bookie-39971:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:40,208 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:40,209 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:40,209 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:40,209 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:40,209 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:40,209 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:40,213 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:40,213 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:40,213 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:40,317 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:40,318 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:40,328 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-32979 with exitCode 0
2020-08-10 23:20:40,328 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:40,328 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:40,329 - INFO  - [SyncThread-337-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:40,330 - INFO  - [SyncThread-337-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15343600350141442714test/current/0.log for logId 0.
2020-08-10 23:20:40,331 - INFO  - [pool-198-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15343600350141442714test/current/1.log for logId 1.
2020-08-10 23:20:40,339 - INFO  - [SyncThread-337-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094432027 , logFileOffset - 31744]}.
2020-08-10 23:20:40,343 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:40,343 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:40,344 - INFO  - [BookieJournal-32979:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:40,344 - INFO  - [BookieJournal-32979:Journal@1144] - Journal exited loop!
2020-08-10 23:20:40,344 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:40,344 - INFO  - [Bookie-32979:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:40,345 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:40,345 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:40,345 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:40,345 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:40,345 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:40,347 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:40,348 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:40,348 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:40,413 - INFO  - [BookieDeathWatcher-39971:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:40,413 - INFO  - [BookieDeathWatcher-39971:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-39971
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:40,413 - INFO  - [BookieDeathWatcher-39971:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:40,413 - INFO  - [BookieDeathWatcher-39971:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:40,569 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testRescheduleOfDelayedAuditOfLostBookiesToStartLater in 494 ms.
2020-08-10 23:20:40,570 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:40,572 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:40,595 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:40,605 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:40,622 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:40,628 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:40,629 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:40,629 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:40,629 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:40,636 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:40,637 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie18413150745080348533test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:46241/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie18413150745080348533test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:40,643 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:40,648 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:40,651 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:40,662 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie18413150745080348533test/current] [/tmp/bookie18413150745080348533test/current]
2020-08-10 23:20:40,675 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:40,676 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie18413150745080348533test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:40,677 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:40,677 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:40,678 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:40,679 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:40,679 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:40,680 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:40,696 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:38129 to become writable
2020-08-10 23:20:40,701 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 1 ms.
2020-08-10 23:20:40,703 - INFO  - [SyncThread-377-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:40,706 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:40,711 - INFO  - [BookieJournal-38129:Journal@909] - Starting journal on /tmp/bookie18413150745080348533test/current
2020-08-10 23:20:40,712 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:40,712 - INFO  - [BookieJournal-38129:JournalChannel@157] - Opening journal /tmp/bookie18413150745080348533test/current/173da3f2f09.txn
2020-08-10 23:20:40,716 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38129
2020-08-10 23:20:40,966 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:38129' has been created.
2020-08-10 23:20:40,967 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:40,967 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie14361577853454046115test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:46241/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie14361577853454046115test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:40,972 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:40,977 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:40,979 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:40,986 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie14361577853454046115test/current] [/tmp/bookie14361577853454046115test/current]
2020-08-10 23:20:40,995 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:40,996 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie14361577853454046115test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:40,996 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:40,997 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:40,997 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:40,998 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:40,998 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:40,998 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:41,007 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:32919 to become writable
2020-08-10 23:20:41,008 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:41,011 - INFO  - [SyncThread-387-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:41,015 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:41,016 - INFO  - [BookieJournal-32919:Journal@909] - Starting journal on /tmp/bookie14361577853454046115test/current
2020-08-10 23:20:41,018 - INFO  - [BookieJournal-32919:JournalChannel@157] - Opening journal /tmp/bookie14361577853454046115test/current/173da3f303b.txn
2020-08-10 23:20:41,022 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:41,032 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:41,039 - INFO  - [BookieDeathWatcher-32979:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:41,039 - INFO  - [BookieDeathWatcher-32979:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-32979
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:41,040 - INFO  - [BookieDeathWatcher-32979:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:41,040 - INFO  - [BookieDeathWatcher-32979:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:41,281 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:32919' has been created.
2020-08-10 23:20:41,285 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:41,286 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie4438408482493370006test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:46241/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie4438408482493370006test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:41,291 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:41,296 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:41,301 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:41,315 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie4438408482493370006test/current] [/tmp/bookie4438408482493370006test/current]
2020-08-10 23:20:41,327 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:41,328 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie4438408482493370006test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:41,328 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:41,329 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:41,329 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:41,331 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:41,332 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:41,332 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:41,349 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:45909 to become writable
2020-08-10 23:20:41,350 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:41,352 - INFO  - [SyncThread-397-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:41,357 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:41,365 - INFO  - [BookieJournal-45909:Journal@909] - Starting journal on /tmp/bookie4438408482493370006test/current
2020-08-10 23:20:41,367 - INFO  - [BookieJournal-45909:JournalChannel@157] - Opening journal /tmp/bookie4438408482493370006test/current/173da3f3198.txn
2020-08-10 23:20:41,368 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:41,373 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45909
2020-08-10 23:20:41,623 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:45909' has been created.
2020-08-10 23:20:41,625 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testDelayedAuditWithPeriodicBookieCheck @ metadata service zk://localhost:46241/ledgers in 1051 ms.
2020-08-10 23:20:41,660 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:41,664 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:41,666 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:41,666 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:41,666 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:41,666 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:41,669 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38129
2020-08-10 23:20:41,669 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45909
2020-08-10 23:20:41,670 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:41,680 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:41,689 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:41,692 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:41,692 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:41,692 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:41,692 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:41,694 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38129
2020-08-10 23:20:41,694 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45909
2020-08-10 23:20:41,694 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:41,699 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:41,704 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:41,706 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:38129
2020-08-10 23:20:41,717 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:41,720 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:41,723 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:41,724 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:41,725 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:41,726 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094441644 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:41,726 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:41,726 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:41,726 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:41,727 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:41,727 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:41,727 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:41,728 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38129
2020-08-10 23:20:41,729 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45909
2020-08-10 23:20:41,729 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:41,731 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:41,731 - INFO  - [AuditorElector-127.0.0.1:38129:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:41,739 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:41,745 - INFO  - [AuditorElector-127.0.0.1:32919:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:41,748 - INFO  - [AuditorElector-127.0.0.1:32919:ZkLedgerUnderreplicationManager@811] - lostBookieRecoveryDelay Znode is already present, so using existing lostBookieRecoveryDelay Znode value
2020-08-10 23:20:41,748 - INFO  - [AuditorElector-127.0.0.1:32919:Auditor@474] - Valid lostBookieRecoveryDelay zNode is available, so not creating lostBookieRecoveryDelay zNode as part of Auditor initialization 
2020-08-10 23:20:41,750 - INFO  - [AuditorElector-127.0.0.1:32919:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:32919
2020-08-10 23:20:41,758 - INFO  - [AuditorElector-127.0.0.1:32919:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:41,759 - INFO  - [AuditorElector-127.0.0.1:32919:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:41,760 - INFO  - [AuditorBookie-127.0.0.1:32919:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:41,760 - INFO  - [AuditorElector-127.0.0.1:32919:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094441644 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:41,760 - INFO  - [AuditorElector-127.0.0.1:32919:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:41,760 - INFO  - [AuditorElector-127.0.0.1:32919:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:41,774 - INFO  - [AuditorBookie-127.0.0.1:32919:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:41,857 - INFO  - [AuditorElector-127.0.0.1:45909:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:41,962 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:41,962 - INFO  - [AuditorElector-127.0.0.1:32919:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:42,081 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:42,087 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:42,090 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:42,090 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:42,091 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:42,091 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:42,093 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38129
2020-08-10 23:20:42,094 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45909
2020-08-10 23:20:42,094 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:42,102 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:42,109 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:42,113 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:42,113 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:42,113 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:42,114 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:42,116 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38129
2020-08-10 23:20:42,117 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45909
2020-08-10 23:20:42,117 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:42,118 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:42,122 - INFO  - [AuditorElector-127.0.0.1:38129:ZkLedgerUnderreplicationManager@811] - lostBookieRecoveryDelay Znode is already present, so using existing lostBookieRecoveryDelay Znode value
2020-08-10 23:20:42,122 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@474] - Valid lostBookieRecoveryDelay zNode is available, so not creating lostBookieRecoveryDelay zNode as part of Auditor initialization 
2020-08-10 23:20:42,123 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:38129
2020-08-10 23:20:42,134 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 2 seconds
2020-08-10 23:20:42,135 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:42,138 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094441644 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:42,138 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:42,138 - INFO  - [AuditorElector-127.0.0.1:38129:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:42,139 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:42,139 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:46241/ledgers : zkServers = localhost:46241, ledgersRootPath = /ledgers.
2020-08-10 23:20:42,145 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:42,154 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:42,155 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:42,155 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:42,155 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:42,157 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:38129
2020-08-10 23:20:42,157 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45909
2020-08-10 23:20:42,157 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:42,160 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:43,165 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:32919, 127.0.0.1:45909, 127.0.0.1:38129] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:20:43,194 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:32919, 127.0.0.1:45909, 127.0.0.1:38129] for ledger: 0
2020-08-10 23:20:43,194 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:20:43,205 - INFO  - [bookie-io-382-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:43,207 - INFO  - [bookie-io-382-2:BookieRequestHandler@50] - Channel connected  [id: 0x0bd8e83c, L:/127.0.0.1:32919 - R:/127.0.0.1:37688]
2020-08-10 23:20:43,206 - INFO  - [bookkeeper-io-368-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x3bcfd330, L:/127.0.0.1:37688 - R:127.0.0.1/127.0.0.1:32919]
2020-08-10 23:20:43,207 - INFO  - [bookkeeper-io-368-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:32919
2020-08-10 23:20:43,206 - INFO  - [bookkeeper-io-368-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xfd4d9045, L:/127.0.0.1:52584 - R:127.0.0.1/127.0.0.1:45909]
2020-08-10 23:20:43,207 - INFO  - [bookkeeper-io-368-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:45909
2020-08-10 23:20:43,207 - INFO  - [bookkeeper-io-368-1:PerChannelBookieClient$1@471] - connection [id: 0x3bcfd330, L:/127.0.0.1:37688 - R:127.0.0.1/127.0.0.1:32919] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:43,208 - INFO  - [bookkeeper-io-368-2:PerChannelBookieClient$1@471] - connection [id: 0xfd4d9045, L:/127.0.0.1:52584 - R:127.0.0.1/127.0.0.1:45909] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:43,208 - INFO  - [bookie-io-392-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:43,208 - INFO  - [bookie-io-392-2:BookieRequestHandler@50] - Channel connected  [id: 0x52a315a6, L:/127.0.0.1:45909 - R:/127.0.0.1:52584]
2020-08-10 23:20:43,217 - INFO  - [bookie-io-372-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:43,218 - INFO  - [bookie-io-372-2:BookieRequestHandler@50] - Channel connected  [id: 0x5483dd0e, L:/127.0.0.1:38129 - R:/127.0.0.1:33174]
2020-08-10 23:20:43,225 - INFO  - [bookkeeper-io-368-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x8ceb3133, L:/127.0.0.1:33174 - R:127.0.0.1/127.0.0.1:38129]
2020-08-10 23:20:43,225 - INFO  - [bookkeeper-io-368-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:38129
2020-08-10 23:20:43,237 - INFO  - [bookkeeper-io-368-3:PerChannelBookieClient$1@471] - connection [id: 0x8ceb3133, L:/127.0.0.1:33174 - R:127.0.0.1/127.0.0.1:38129] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:43,295 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:43,295 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:43,296 - WARN  - [bookkeeper-io-368-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0x3bcfd330, L:/127.0.0.1:37688 - R:127.0.0.1/127.0.0.1:32919] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:20:43,296 - INFO  - [bookkeeper-io-368-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x3bcfd330, L:/127.0.0.1:37688 ! R:127.0.0.1/127.0.0.1:32919]
2020-08-10 23:20:43,300 - INFO  - [bookie-io-382-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x0bd8e83c, L:/127.0.0.1:32919 ! R:/127.0.0.1:37688]
2020-08-10 23:20:43,304 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-32919 with exitCode 0
2020-08-10 23:20:43,304 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:43,304 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:43,305 - INFO  - [SyncThread-387-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:43,306 - INFO  - [SyncThread-387-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie14361577853454046115test/current/0.log for logId 0.
2020-08-10 23:20:43,309 - INFO  - [pool-226-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie14361577853454046115test/current/1.log for logId 1.
2020-08-10 23:20:43,316 - INFO  - [SyncThread-387-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094441019 , logFileOffset - 14336]}.
2020-08-10 23:20:43,320 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:43,320 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:43,321 - INFO  - [BookieJournal-32919:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:43,321 - INFO  - [BookieJournal-32919:Journal@1144] - Journal exited loop!
2020-08-10 23:20:43,322 - INFO  - [Bookie-32919:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:43,322 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:43,323 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:43,324 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:43,324 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:43,324 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:43,324 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:43,327 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:43,327 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:43,327 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:43,330 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:43,331 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:43,330 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:43,330 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:32919
2020-08-10 23:20:43,333 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor$9@583] - Delaying bookie audit by 5 secs for [127.0.0.1:32919]
2020-08-10 23:20:43,433 - INFO  - [AuditorElector-127.0.0.1:32919:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:44,037 - INFO  - [BookieDeathWatcher-32919:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:44,037 - INFO  - [BookieDeathWatcher-32919:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-32919
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:44,037 - INFO  - [BookieDeathWatcher-32919:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:44,037 - INFO  - [BookieDeathWatcher-32919:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:44,135 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor$17@1992] - Audit already scheduled; skipping periodic bookie check
2020-08-10 23:20:46,138 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor$17@1992] - Audit already scheduled; skipping periodic bookie check
2020-08-10 23:20:48,135 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor$17@1992] - Audit already scheduled; skipping periodic bookie check
2020-08-10 23:20:48,335 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:48,346 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor@1114] - Following are the failed bookies: [127.0.0.1:32919], and searching its ledgers for re-replication
2020-08-10 23:20:48,346 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:32919] are identified as underreplicated
2020-08-10 23:20:48,377 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:20:48,377 - INFO  - [AuditorBookie-127.0.0.1:38129:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:48,378 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:48,378 - INFO  - [AuditorElector-127.0.0.1:38129:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:48,388 - INFO  - [AuditorElector-127.0.0.1:45909:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:48,391 - INFO  - [AuditorElector-127.0.0.1:45909:ZkLedgerUnderreplicationManager@811] - lostBookieRecoveryDelay Znode is already present, so using existing lostBookieRecoveryDelay Znode value
2020-08-10 23:20:48,391 - INFO  - [AuditorElector-127.0.0.1:45909:Auditor@474] - Valid lostBookieRecoveryDelay zNode is available, so not creating lostBookieRecoveryDelay zNode as part of Auditor initialization 
2020-08-10 23:20:48,392 - INFO  - [AuditorElector-127.0.0.1:45909:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:45909
2020-08-10 23:20:48,497 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:48,498 - INFO  - [AuditorElector-127.0.0.1:45909:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 2 seconds
2020-08-10 23:20:48,498 - INFO  - [AuditorElector-127.0.0.1:45909:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:48,605 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:20:48,605 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:38129
2020-08-10 23:20:48,606 - INFO  - [bookkeeper-io-368-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x8ceb3133, L:/127.0.0.1:33174 ! R:127.0.0.1/127.0.0.1:38129]
2020-08-10 23:20:48,607 - INFO  - [bookie-io-372-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x5483dd0e, L:/127.0.0.1:38129 ! R:/127.0.0.1:33174]
2020-08-10 23:20:48,607 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:32919
2020-08-10 23:20:48,607 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:45909
2020-08-10 23:20:48,608 - INFO  - [bookkeeper-io-368-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xfd4d9045, L:/127.0.0.1:52584 ! R:127.0.0.1/127.0.0.1:45909]
2020-08-10 23:20:48,608 - INFO  - [bookie-io-392-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x52a315a6, L:/127.0.0.1:45909 ! R:/127.0.0.1:52584]
2020-08-10 23:20:48,714 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:48,714 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:48,720 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-38129 with exitCode 0
2020-08-10 23:20:48,720 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:48,720 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:48,720 - INFO  - [SyncThread-377-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:48,724 - INFO  - [SyncThread-377-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie18413150745080348533test/current/0.log for logId 0.
2020-08-10 23:20:48,731 - INFO  - [pool-219-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie18413150745080348533test/current/1.log for logId 1.
2020-08-10 23:20:48,736 - INFO  - [SyncThread-377-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094440713 , logFileOffset - 26624]}.
2020-08-10 23:20:48,740 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:48,741 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:48,742 - INFO  - [BookieJournal-38129:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:48,742 - INFO  - [BookieJournal-38129:Journal@1144] - Journal exited loop!
2020-08-10 23:20:48,742 - INFO  - [Bookie-38129:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:48,742 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:48,743 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:48,743 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:48,743 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:48,743 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:48,743 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:48,746 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:48,746 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:48,746 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:48,858 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:48,858 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:48,869 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-45909 with exitCode 0
2020-08-10 23:20:48,869 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:48,869 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:48,869 - INFO  - [SyncThread-397-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:48,870 - INFO  - [SyncThread-397-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4438408482493370006test/current/0.log for logId 0.
2020-08-10 23:20:48,875 - INFO  - [pool-233-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4438408482493370006test/current/1.log for logId 1.
2020-08-10 23:20:48,890 - INFO  - [SyncThread-397-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094441368 , logFileOffset - 24064]}.
2020-08-10 23:20:48,894 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:48,895 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:48,895 - INFO  - [BookieJournal-45909:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:48,895 - INFO  - [BookieJournal-45909:Journal@1144] - Journal exited loop!
2020-08-10 23:20:48,896 - INFO  - [Bookie-45909:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:48,896 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:48,896 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:48,896 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:48,897 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:48,897 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:48,897 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:48,899 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:48,899 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:48,899 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:49,115 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testDelayedAuditWithPeriodicBookieCheck in 510 ms.
2020-08-10 23:20:49,116 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:49,116 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:49,134 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:49,144 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:44153/ledgers : zkServers = localhost:44153, ledgersRootPath = /ledgers.
2020-08-10 23:20:49,149 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:49,160 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:49,160 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:49,160 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:49,161 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:49,166 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:49,166 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie9855786022559214366test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:44153/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie9855786022559214366test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:49,169 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:44153/ledgers : zkServers = localhost:44153, ledgersRootPath = /ledgers.
2020-08-10 23:20:49,174 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:49,177 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:49,181 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie9855786022559214366test/current] [/tmp/bookie9855786022559214366test/current]
2020-08-10 23:20:49,192 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:49,194 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie9855786022559214366test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:49,194 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:49,195 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:49,195 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:49,197 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:49,197 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:49,197 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:49,211 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:41501 to become writable
2020-08-10 23:20:49,211 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:49,212 - INFO  - [SyncThread-461-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:49,215 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:49,218 - INFO  - [BookieJournal-41501:Journal@909] - Starting journal on /tmp/bookie9855786022559214366test/current
2020-08-10 23:20:49,218 - INFO  - [BookieJournal-41501:JournalChannel@157] - Opening journal /tmp/bookie9855786022559214366test/current/173da3f5043.txn
2020-08-10 23:20:49,219 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:49,226 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41501
2020-08-10 23:20:49,379 - INFO  - [BookieDeathWatcher-45909:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:49,379 - INFO  - [BookieDeathWatcher-45909:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-45909
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:49,380 - INFO  - [BookieDeathWatcher-45909:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:49,380 - INFO  - [BookieDeathWatcher-45909:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:49,476 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:41501' has been created.
2020-08-10 23:20:49,478 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:49,478 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie15864433368302933444test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:44153/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie15864433368302933444test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:49,480 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:44153/ledgers : zkServers = localhost:44153, ledgersRootPath = /ledgers.
2020-08-10 23:20:49,483 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:49,486 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:49,498 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie15864433368302933444test/current] [/tmp/bookie15864433368302933444test/current]
2020-08-10 23:20:49,507 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:49,509 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie15864433368302933444test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:49,509 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:49,509 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:49,510 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:49,510 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:49,511 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:49,511 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:49,525 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:36445 to become writable
2020-08-10 23:20:49,527 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:49,529 - INFO  - [SyncThread-471-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:49,533 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:49,536 - INFO  - [BookieJournal-36445:Journal@909] - Starting journal on /tmp/bookie15864433368302933444test/current
2020-08-10 23:20:49,538 - INFO  - [BookieJournal-36445:JournalChannel@157] - Opening journal /tmp/bookie15864433368302933444test/current/173da3f5183.txn
2020-08-10 23:20:49,540 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:49,555 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36445
2020-08-10 23:20:49,722 - INFO  - [BookieDeathWatcher-38129:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:49,722 - INFO  - [BookieDeathWatcher-38129:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-38129
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:49,722 - INFO  - [BookieDeathWatcher-38129:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:49,722 - INFO  - [BookieDeathWatcher-38129:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:49,804 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:36445' has been created.
2020-08-10 23:20:49,807 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:49,807 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie4595746138549935731test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:44153/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie4595746138549935731test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:49,811 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:44153/ledgers : zkServers = localhost:44153, ledgersRootPath = /ledgers.
2020-08-10 23:20:49,823 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:49,826 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:49,831 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie4595746138549935731test/current] [/tmp/bookie4595746138549935731test/current]
2020-08-10 23:20:49,849 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:49,851 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie4595746138549935731test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:49,851 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:49,851 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:49,851 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:49,853 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:49,853 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:49,853 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:49,861 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:34877 to become writable
2020-08-10 23:20:49,862 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:49,862 - INFO  - [SyncThread-481-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:49,866 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:49,868 - INFO  - [BookieJournal-34877:Journal@909] - Starting journal on /tmp/bookie4595746138549935731test/current
2020-08-10 23:20:49,869 - INFO  - [BookieJournal-34877:JournalChannel@157] - Opening journal /tmp/bookie4595746138549935731test/current/173da3f52ce.txn
2020-08-10 23:20:49,870 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:49,877 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:34877
2020-08-10 23:20:50,133 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:34877' has been created.
2020-08-10 23:20:50,135 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testDelayedAuditOfLostBookies @ metadata service zk://localhost:44153/ledgers in 1018 ms.
2020-08-10 23:20:50,166 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:44153/ledgers : zkServers = localhost:44153, ledgersRootPath = /ledgers.
2020-08-10 23:20:50,170 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:50,173 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:50,173 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:50,173 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:50,173 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:50,175 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:34877
2020-08-10 23:20:50,176 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36445
2020-08-10 23:20:50,176 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41501
2020-08-10 23:20:50,186 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:44153/ledgers : zkServers = localhost:44153, ledgersRootPath = /ledgers.
2020-08-10 23:20:50,191 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:50,194 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:50,194 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:50,194 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:50,195 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:50,197 - INFO  - [AuditorElector-127.0.0.1:41501:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:50,199 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:34877
2020-08-10 23:20:50,199 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36445
2020-08-10 23:20:50,199 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41501
2020-08-10 23:20:50,200 - INFO  - [AuditorElector-127.0.0.1:41501:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:50,202 - INFO  - [AuditorElector-127.0.0.1:41501:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:41501
2020-08-10 23:20:50,208 - INFO  - [AuditorElector-127.0.0.1:41501:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:50,208 - INFO  - [AuditorElector-127.0.0.1:41501:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:50,209 - INFO  - [AuditorElector-127.0.0.1:41501:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094450158 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:50,209 - INFO  - [AuditorElector-127.0.0.1:41501:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:50,209 - INFO  - [AuditorElector-127.0.0.1:41501:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:50,209 - INFO  - [AuditorBookie-127.0.0.1:41501:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:50,213 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:44153/ledgers : zkServers = localhost:44153, ledgersRootPath = /ledgers.
2020-08-10 23:20:50,219 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:50,221 - INFO  - [AuditorBookie-127.0.0.1:41501:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:50,223 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:50,223 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:50,224 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:50,224 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:50,229 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:34877
2020-08-10 23:20:50,229 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36445
2020-08-10 23:20:50,229 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41501
2020-08-10 23:20:51,234 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:41501, 127.0.0.1:34877, 127.0.0.1:36445] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:20:51,259 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:41501, 127.0.0.1:34877, 127.0.0.1:36445] for ledger: 0
2020-08-10 23:20:51,259 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:20:51,262 - INFO  - [bookie-io-456-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:51,262 - INFO  - [bookie-io-456-2:BookieRequestHandler@50] - Channel connected  [id: 0xff79b376, L:/127.0.0.1:41501 - R:/127.0.0.1:53518]
2020-08-10 23:20:51,268 - INFO  - [bookkeeper-io-452-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x221cdb04, L:/127.0.0.1:53518 - R:127.0.0.1/127.0.0.1:41501]
2020-08-10 23:20:51,269 - INFO  - [bookkeeper-io-452-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:41501
2020-08-10 23:20:51,269 - INFO  - [bookkeeper-io-452-1:PerChannelBookieClient$1@471] - connection [id: 0x221cdb04, L:/127.0.0.1:53518 - R:127.0.0.1/127.0.0.1:41501] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:51,270 - INFO  - [bookie-io-476-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:51,270 - INFO  - [bookie-io-476-2:BookieRequestHandler@50] - Channel connected  [id: 0x97012d3f, L:/127.0.0.1:34877 - R:/127.0.0.1:40538]
2020-08-10 23:20:51,271 - INFO  - [bookkeeper-io-452-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xe1cfb561, L:/127.0.0.1:50182 - R:127.0.0.1/127.0.0.1:36445]
2020-08-10 23:20:51,271 - INFO  - [bookkeeper-io-452-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:36445
2020-08-10 23:20:51,271 - INFO  - [bookkeeper-io-452-3:PerChannelBookieClient$1@471] - connection [id: 0xe1cfb561, L:/127.0.0.1:50182 - R:127.0.0.1/127.0.0.1:36445] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:51,273 - INFO  - [bookie-io-466-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:51,273 - INFO  - [bookie-io-466-2:BookieRequestHandler@50] - Channel connected  [id: 0x0e4a3add, L:/127.0.0.1:36445 - R:/127.0.0.1:50182]
2020-08-10 23:20:51,275 - INFO  - [bookkeeper-io-452-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xfc5a769d, L:/127.0.0.1:40538 - R:127.0.0.1/127.0.0.1:34877]
2020-08-10 23:20:51,275 - INFO  - [bookkeeper-io-452-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:34877
2020-08-10 23:20:51,289 - INFO  - [bookkeeper-io-452-2:PerChannelBookieClient$1@471] - connection [id: 0xfc5a769d, L:/127.0.0.1:40538 - R:127.0.0.1/127.0.0.1:34877] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:51,328 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:51,328 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:51,329 - WARN  - [bookkeeper-io-452-3:PerChannelBookieClient@1270] - Exception caught on:[id: 0xe1cfb561, L:/127.0.0.1:50182 - R:127.0.0.1/127.0.0.1:36445] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:20:51,329 - INFO  - [bookkeeper-io-452-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xe1cfb561, L:/127.0.0.1:50182 ! R:127.0.0.1/127.0.0.1:36445]
2020-08-10 23:20:51,330 - INFO  - [bookie-io-466-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x0e4a3add, L:/127.0.0.1:36445 ! R:/127.0.0.1:50182]
2020-08-10 23:20:51,340 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-36445 with exitCode 0
2020-08-10 23:20:51,340 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:51,340 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:51,341 - INFO  - [SyncThread-471-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:51,341 - INFO  - [SyncThread-471-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15864433368302933444test/current/0.log for logId 0.
2020-08-10 23:20:51,343 - INFO  - [pool-270-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15864433368302933444test/current/1.log for logId 1.
2020-08-10 23:20:51,349 - INFO  - [SyncThread-471-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094449539 , logFileOffset - 26112]}.
2020-08-10 23:20:51,352 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:51,352 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:51,353 - INFO  - [BookieJournal-36445:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:51,353 - INFO  - [BookieJournal-36445:Journal@1144] - Journal exited loop!
2020-08-10 23:20:51,353 - INFO  - [Bookie-36445:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:51,353 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:51,354 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:51,354 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:51,354 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:51,354 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:51,354 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:51,356 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:51,357 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:51,357 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:51,366 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:36445
2020-08-10 23:20:51,366 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:36445
2020-08-10 23:20:51,366 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:36445
2020-08-10 23:20:51,366 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:36445
2020-08-10 23:20:51,369 - INFO  - [AuditorBookie-127.0.0.1:41501:Auditor$9@583] - Delaying bookie audit by 5 secs for [127.0.0.1:36445]
2020-08-10 23:20:51,463 - INFO  - [AuditorElector-127.0.0.1:36445:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:51,557 - INFO  - [BookieDeathWatcher-36445:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:51,557 - INFO  - [BookieDeathWatcher-36445:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-36445
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:51,557 - INFO  - [BookieDeathWatcher-36445:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:51,557 - INFO  - [BookieDeathWatcher-36445:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:56,371 - INFO  - [AuditorBookie-127.0.0.1:41501:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:56,377 - INFO  - [AuditorBookie-127.0.0.1:41501:Auditor@1114] - Following are the failed bookies: [127.0.0.1:36445], and searching its ledgers for re-replication
2020-08-10 23:20:56,378 - INFO  - [AuditorBookie-127.0.0.1:41501:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:36445] are identified as underreplicated
2020-08-10 23:20:56,394 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:20:56,394 - INFO  - [AuditorBookie-127.0.0.1:41501:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:56,395 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:56,395 - INFO  - [AuditorElector-127.0.0.1:41501:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:56,405 - INFO  - [AuditorElector-127.0.0.1:34877:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:56,413 - INFO  - [AuditorElector-127.0.0.1:34877:ZkLedgerUnderreplicationManager@811] - lostBookieRecoveryDelay Znode is already present, so using existing lostBookieRecoveryDelay Znode value
2020-08-10 23:20:56,413 - INFO  - [AuditorElector-127.0.0.1:34877:Auditor@474] - Valid lostBookieRecoveryDelay zNode is available, so not creating lostBookieRecoveryDelay zNode as part of Auditor initialization 
2020-08-10 23:20:56,413 - INFO  - [AuditorElector-127.0.0.1:34877:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:34877
2020-08-10 23:20:56,417 - INFO  - [AuditorElector-127.0.0.1:34877:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:56,417 - INFO  - [AuditorElector-127.0.0.1:34877:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:56,418 - INFO  - [AuditorElector-127.0.0.1:34877:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094450158 durationSinceLastExecutionInSecs: 6 initialDelay: 604794 interval: 604800
2020-08-10 23:20:56,418 - INFO  - [AuditorElector-127.0.0.1:34877:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:56,418 - INFO  - [AuditorElector-127.0.0.1:34877:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:56,418 - INFO  - [AuditorBookie-127.0.0.1:34877:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:56,428 - INFO  - [AuditorBookie-127.0.0.1:34877:Auditor@1114] - Following are the failed bookies: [127.0.0.1:36445], and searching its ledgers for re-replication
2020-08-10 23:20:56,428 - INFO  - [AuditorBookie-127.0.0.1:34877:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:36445] are identified as underreplicated
2020-08-10 23:20:56,431 - INFO  - [AuditorBookie-127.0.0.1:34877:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:56,509 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:20:56,509 - INFO  - [AuditorElector-127.0.0.1:34877:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:56,615 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:20:56,615 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:34877
2020-08-10 23:20:56,617 - INFO  - [bookkeeper-io-452-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xfc5a769d, L:/127.0.0.1:40538 ! R:127.0.0.1/127.0.0.1:34877]
2020-08-10 23:20:56,617 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:36445
2020-08-10 23:20:56,617 - INFO  - [bookie-io-476-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x97012d3f, L:/127.0.0.1:34877 ! R:/127.0.0.1:40538]
2020-08-10 23:20:56,617 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:41501
2020-08-10 23:20:56,618 - INFO  - [bookkeeper-io-452-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x221cdb04, L:/127.0.0.1:53518 ! R:127.0.0.1/127.0.0.1:41501]
2020-08-10 23:20:56,619 - INFO  - [bookie-io-456-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xff79b376, L:/127.0.0.1:41501 ! R:/127.0.0.1:53518]
2020-08-10 23:20:56,743 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:56,744 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:56,749 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-41501 with exitCode 0
2020-08-10 23:20:56,749 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:56,749 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:56,749 - INFO  - [SyncThread-461-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:56,751 - INFO  - [SyncThread-461-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie9855786022559214366test/current/0.log for logId 0.
2020-08-10 23:20:56,754 - INFO  - [pool-263-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie9855786022559214366test/current/1.log for logId 1.
2020-08-10 23:20:56,760 - INFO  - [SyncThread-461-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094449219 , logFileOffset - 26624]}.
2020-08-10 23:20:56,763 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:56,763 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:56,763 - INFO  - [BookieJournal-41501:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:56,764 - INFO  - [BookieJournal-41501:Journal@1144] - Journal exited loop!
2020-08-10 23:20:56,764 - INFO  - [Bookie-41501:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:56,764 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:56,764 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:56,764 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:56,764 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:56,764 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:56,764 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:56,768 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:56,769 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:56,769 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:56,872 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:56,872 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:56,879 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-34877 with exitCode 0
2020-08-10 23:20:56,879 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:56,879 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:56,879 - INFO  - [SyncThread-481-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:56,880 - INFO  - [SyncThread-481-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4595746138549935731test/current/0.log for logId 0.
2020-08-10 23:20:56,881 - INFO  - [pool-277-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie4595746138549935731test/current/1.log for logId 1.
2020-08-10 23:20:56,886 - INFO  - [SyncThread-481-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094449870 , logFileOffset - 28160]}.
2020-08-10 23:20:56,889 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:56,889 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:56,890 - INFO  - [BookieJournal-34877:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:56,890 - INFO  - [BookieJournal-34877:Journal@1144] - Journal exited loop!
2020-08-10 23:20:56,890 - INFO  - [Bookie-34877:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:56,890 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:56,891 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:56,891 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:56,891 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:56,891 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:56,891 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:56,893 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:56,894 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:56,894 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:57,112 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testDelayedAuditOfLostBookies in 496 ms.
2020-08-10 23:20:57,112 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:57,116 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:20:57,136 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:57,143 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36715/ledgers : zkServers = localhost:36715, ledgersRootPath = /ledgers.
2020-08-10 23:20:57,147 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:57,152 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:57,153 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:57,153 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:57,154 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:57,164 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:57,165 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie2480574934258153164test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:36715/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie2480574934258153164test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:57,169 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36715/ledgers : zkServers = localhost:36715, ledgersRootPath = /ledgers.
2020-08-10 23:20:57,173 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:57,176 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:57,183 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie2480574934258153164test/current] [/tmp/bookie2480574934258153164test/current]
2020-08-10 23:20:57,192 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:57,193 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie2480574934258153164test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:57,193 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:57,194 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:57,194 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:57,195 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:57,195 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:57,196 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:57,209 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:39795 to become writable
2020-08-10 23:20:57,212 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 1 ms.
2020-08-10 23:20:57,213 - INFO  - [SyncThread-521-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:57,216 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:57,217 - INFO  - [BookieJournal-39795:Journal@909] - Starting journal on /tmp/bookie2480574934258153164test/current
2020-08-10 23:20:57,219 - INFO  - [BookieJournal-39795:JournalChannel@157] - Opening journal /tmp/bookie2480574934258153164test/current/173da3f6f84.txn
2020-08-10 23:20:57,219 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:57,224 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39795
2020-08-10 23:20:57,230 - INFO  - [BookieDeathWatcher-41501:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:57,230 - INFO  - [BookieDeathWatcher-41501:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-41501
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:57,231 - INFO  - [BookieDeathWatcher-41501:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:57,231 - INFO  - [BookieDeathWatcher-41501:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:57,475 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:39795' has been created.
2020-08-10 23:20:57,477 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:57,478 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie15960682991995870288test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:36715/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie15960682991995870288test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:57,481 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36715/ledgers : zkServers = localhost:36715, ledgersRootPath = /ledgers.
2020-08-10 23:20:57,485 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:57,488 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:57,497 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie15960682991995870288test/current] [/tmp/bookie15960682991995870288test/current]
2020-08-10 23:20:57,510 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:57,512 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie15960682991995870288test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:57,512 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:57,513 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:57,513 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:57,515 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:57,515 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:57,516 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:57,534 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:36015 to become writable
2020-08-10 23:20:57,535 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:57,536 - INFO  - [SyncThread-531-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:57,539 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:57,541 - INFO  - [BookieJournal-36015:Journal@909] - Starting journal on /tmp/bookie15960682991995870288test/current
2020-08-10 23:20:57,545 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:57,545 - INFO  - [BookieJournal-36015:JournalChannel@157] - Opening journal /tmp/bookie15960682991995870288test/current/173da3f70c9.txn
2020-08-10 23:20:57,556 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36015
2020-08-10 23:20:57,800 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:36015' has been created.
2020-08-10 23:20:57,801 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:20:57,801 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie17515876485481880696test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:36715/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie17515876485481880696test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:20:57,803 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36715/ledgers : zkServers = localhost:36715, ledgersRootPath = /ledgers.
2020-08-10 23:20:57,805 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:57,812 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:20:57,817 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie17515876485481880696test/current] [/tmp/bookie17515876485481880696test/current]
2020-08-10 23:20:57,825 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:20:57,826 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie17515876485481880696test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:20:57,827 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:20:57,827 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:20:57,827 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:20:57,828 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:20:57,828 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:20:57,828 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:20:57,843 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:45011 to become writable
2020-08-10 23:20:57,843 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:20:57,844 - INFO  - [SyncThread-541-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:20:57,848 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:20:57,850 - INFO  - [BookieJournal-45011:Journal@909] - Starting journal on /tmp/bookie17515876485481880696test/current
2020-08-10 23:20:57,850 - INFO  - [BookieJournal-45011:JournalChannel@157] - Opening journal /tmp/bookie17515876485481880696test/current/173da3f71fb.txn
2020-08-10 23:20:57,850 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:20:57,854 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45011
2020-08-10 23:20:57,883 - INFO  - [BookieDeathWatcher-34877:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:57,883 - INFO  - [BookieDeathWatcher-34877:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-34877
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:57,883 - INFO  - [BookieDeathWatcher-34877:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:57,883 - INFO  - [BookieDeathWatcher-34877:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:58,104 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:45011' has been created.
2020-08-10 23:20:58,105 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testTriggerAuditorWithPendingAuditTask @ metadata service zk://localhost:36715/ledgers in 989 ms.
2020-08-10 23:20:58,128 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36715/ledgers : zkServers = localhost:36715, ledgersRootPath = /ledgers.
2020-08-10 23:20:58,131 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:58,132 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:58,132 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:58,132 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:58,132 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:58,136 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45011
2020-08-10 23:20:58,136 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36015
2020-08-10 23:20:58,136 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39795
2020-08-10 23:20:58,145 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36715/ledgers : zkServers = localhost:36715, ledgersRootPath = /ledgers.
2020-08-10 23:20:58,148 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:58,151 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:58,151 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:58,151 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:58,151 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:58,154 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45011
2020-08-10 23:20:58,154 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36015
2020-08-10 23:20:58,154 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39795
2020-08-10 23:20:58,160 - INFO  - [AuditorElector-127.0.0.1:39795:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:20:58,163 - INFO  - [AuditorElector-127.0.0.1:39795:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:20:58,164 - INFO  - [AuditorElector-127.0.0.1:39795:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:39795
2020-08-10 23:20:58,170 - INFO  - [AuditorElector-127.0.0.1:39795:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:20:58,171 - INFO  - [AuditorElector-127.0.0.1:39795:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:20:58,172 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor@1067] - Starting auditBookies
2020-08-10 23:20:58,172 - INFO  - [AuditorElector-127.0.0.1:39795:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094458122 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:20:58,172 - INFO  - [AuditorElector-127.0.0.1:39795:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:20:58,172 - INFO  - [AuditorElector-127.0.0.1:39795:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:20:58,173 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36715/ledgers : zkServers = localhost:36715, ledgersRootPath = /ledgers.
2020-08-10 23:20:58,178 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:20:58,179 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:20:58,180 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:20:58,180 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:20:58,180 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:20:58,181 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45011
2020-08-10 23:20:58,181 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:36015
2020-08-10 23:20:58,181 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39795
2020-08-10 23:20:58,182 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor@1102] - Completed auditBookies
2020-08-10 23:20:59,190 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:36015, 127.0.0.1:45011, 127.0.0.1:39795] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:20:59,217 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:36015, 127.0.0.1:45011, 127.0.0.1:39795] for ledger: 0
2020-08-10 23:20:59,217 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:20:59,221 - INFO  - [bookkeeper-io-512-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x96bb43ee, L:/127.0.0.1:34404 - R:127.0.0.1/127.0.0.1:45011]
2020-08-10 23:20:59,228 - INFO  - [bookkeeper-io-512-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:45011
2020-08-10 23:20:59,224 - INFO  - [bookie-io-516-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:59,228 - INFO  - [bookie-io-516-2:BookieRequestHandler@50] - Channel connected  [id: 0x839c7721, L:/127.0.0.1:39795 - R:/127.0.0.1:34912]
2020-08-10 23:20:59,223 - INFO  - [bookie-io-536-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:59,228 - INFO  - [bookie-io-536-2:BookieRequestHandler@50] - Channel connected  [id: 0xec916372, L:/127.0.0.1:45011 - R:/127.0.0.1:34404]
2020-08-10 23:20:59,223 - INFO  - [bookkeeper-io-512-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x97b5f256, L:/127.0.0.1:48502 - R:127.0.0.1/127.0.0.1:36015]
2020-08-10 23:20:59,229 - INFO  - [bookkeeper-io-512-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:36015
2020-08-10 23:20:59,223 - INFO  - [bookkeeper-io-512-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x8668c396, L:/127.0.0.1:34912 - R:127.0.0.1/127.0.0.1:39795]
2020-08-10 23:20:59,228 - INFO  - [bookkeeper-io-512-2:PerChannelBookieClient$1@471] - connection [id: 0x96bb43ee, L:/127.0.0.1:34404 - R:127.0.0.1/127.0.0.1:45011] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:59,229 - INFO  - [bookkeeper-io-512-1:PerChannelBookieClient$1@471] - connection [id: 0x97b5f256, L:/127.0.0.1:48502 - R:127.0.0.1/127.0.0.1:36015] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:59,229 - INFO  - [bookkeeper-io-512-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:39795
2020-08-10 23:20:59,230 - INFO  - [bookkeeper-io-512-3:PerChannelBookieClient$1@471] - connection [id: 0x8668c396, L:/127.0.0.1:34912 - R:127.0.0.1/127.0.0.1:39795] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:20:59,230 - INFO  - [bookie-io-526-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:20:59,237 - INFO  - [bookie-io-526-2:BookieRequestHandler@50] - Channel connected  [id: 0x27f42dd2, L:/127.0.0.1:36015 - R:/127.0.0.1:48502]
2020-08-10 23:20:59,280 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:59,280 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:20:59,280 - WARN  - [bookkeeper-io-512-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0x97b5f256, L:/127.0.0.1:48502 - R:127.0.0.1/127.0.0.1:36015] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:20:59,280 - INFO  - [bookie-io-526-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x27f42dd2, L:/127.0.0.1:36015 ! R:/127.0.0.1:48502]
2020-08-10 23:20:59,280 - INFO  - [bookkeeper-io-512-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x97b5f256, L:/127.0.0.1:48502 ! R:127.0.0.1/127.0.0.1:36015]
2020-08-10 23:20:59,283 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-36015 with exitCode 0
2020-08-10 23:20:59,283 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:20:59,283 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:20:59,283 - INFO  - [SyncThread-531-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:20:59,284 - INFO  - [SyncThread-531-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15960682991995870288test/current/0.log for logId 0.
2020-08-10 23:20:59,287 - INFO  - [pool-305-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie15960682991995870288test/current/1.log for logId 1.
2020-08-10 23:20:59,302 - INFO  - [SyncThread-531-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094457545 , logFileOffset - 27136]}.
2020-08-10 23:20:59,305 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:20:59,306 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:20:59,306 - INFO  - [BookieJournal-36015:Journal@1135] - Journal exits when shutting down
2020-08-10 23:20:59,306 - INFO  - [BookieJournal-36015:Journal@1144] - Journal exited loop!
2020-08-10 23:20:59,306 - INFO  - [Bookie-36015:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:20:59,307 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:20:59,307 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:20:59,307 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:20:59,307 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:20:59,307 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:20:59,307 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:20:59,310 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:20:59,310 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:20:59,310 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:20:59,315 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:36015
2020-08-10 23:20:59,315 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:36015
2020-08-10 23:20:59,315 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:36015
2020-08-10 23:20:59,315 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:36015
2020-08-10 23:20:59,317 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor$9@583] - Delaying bookie audit by 5 secs for [127.0.0.1:36015]
2020-08-10 23:20:59,416 - INFO  - [AuditorElector-127.0.0.1:36015:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:20:59,552 - INFO  - [BookieDeathWatcher-36015:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:20:59,552 - INFO  - [BookieDeathWatcher-36015:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-36015
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:20:59,552 - INFO  - [BookieDeathWatcher-36015:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:20:59,552 - INFO  - [BookieDeathWatcher-36015:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:02,033 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor$10@615] - lostBookieRecoveryDelay period has been changed so canceling the pending AuditTask
2020-08-10 23:21:02,033 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor$10@624] - lostBookieRecoveryDelay has been set to 0 or reset to its previous value, so starting AuditTask. Current lostBookieRecoveryDelay: 5, previous lostBookieRecoveryDelay: 5
2020-08-10 23:21:02,034 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:02,047 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor@1114] - Following are the failed bookies: [127.0.0.1:36015], and searching its ledgers for re-replication
2020-08-10 23:21:02,048 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:36015] are identified as underreplicated
2020-08-10 23:21:02,071 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:21:02,071 - INFO  - [AuditorBookie-127.0.0.1:39795:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:02,174 - INFO  - [AuditorElector-127.0.0.1:45011:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:02,280 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:02,280 - INFO  - [AuditorElector-127.0.0.1:39795:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:02,386 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:21:02,386 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:45011
2020-08-10 23:21:02,387 - INFO  - [bookkeeper-io-512-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x96bb43ee, L:/127.0.0.1:34404 ! R:127.0.0.1/127.0.0.1:45011]
2020-08-10 23:21:02,387 - INFO  - [bookie-io-536-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xec916372, L:/127.0.0.1:45011 ! R:/127.0.0.1:34404]
2020-08-10 23:21:02,387 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:36015
2020-08-10 23:21:02,387 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:39795
2020-08-10 23:21:02,388 - INFO  - [bookkeeper-io-512-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x8668c396, L:/127.0.0.1:34912 ! R:127.0.0.1/127.0.0.1:39795]
2020-08-10 23:21:02,388 - INFO  - [bookie-io-516-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x839c7721, L:/127.0.0.1:39795 ! R:/127.0.0.1:34912]
2020-08-10 23:21:02,496 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:02,496 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:02,502 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-39795 with exitCode 0
2020-08-10 23:21:02,503 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:02,503 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:02,503 - INFO  - [SyncThread-521-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:02,503 - INFO  - [SyncThread-521-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie2480574934258153164test/current/0.log for logId 0.
2020-08-10 23:21:02,508 - INFO  - [pool-298-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie2480574934258153164test/current/1.log for logId 1.
2020-08-10 23:21:02,519 - INFO  - [SyncThread-521-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094457220 , logFileOffset - 25600]}.
2020-08-10 23:21:02,521 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:02,522 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:02,523 - INFO  - [BookieJournal-39795:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:02,523 - INFO  - [BookieJournal-39795:Journal@1144] - Journal exited loop!
2020-08-10 23:21:02,523 - INFO  - [Bookie-39795:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:02,523 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:02,524 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:02,524 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:02,524 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:02,524 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:02,524 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:02,527 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:02,527 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:02,527 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:02,639 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:02,640 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:02,653 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-45011 with exitCode 0
2020-08-10 23:21:02,653 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:02,653 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:02,653 - INFO  - [SyncThread-541-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:02,654 - INFO  - [SyncThread-541-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie17515876485481880696test/current/0.log for logId 0.
2020-08-10 23:21:02,656 - INFO  - [pool-312-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie17515876485481880696test/current/1.log for logId 1.
2020-08-10 23:21:02,662 - INFO  - [SyncThread-541-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094457851 , logFileOffset - 28672]}.
2020-08-10 23:21:02,666 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:02,666 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:02,666 - INFO  - [BookieJournal-45011:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:02,666 - INFO  - [BookieJournal-45011:Journal@1144] - Journal exited loop!
2020-08-10 23:21:02,667 - INFO  - [Bookie-45011:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:02,667 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:02,667 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:02,668 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:02,668 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:02,668 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:02,668 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:02,670 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:02,670 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:02,670 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:02,886 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testTriggerAuditorWithPendingAuditTask in 500 ms.
2020-08-10 23:21:02,888 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:02,889 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:21:02,901 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:02,907 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42529/ledgers : zkServers = localhost:42529, ledgersRootPath = /ledgers.
2020-08-10 23:21:02,911 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:02,913 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:02,913 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:02,913 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:02,913 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:02,919 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:02,919 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie11984321885172189720test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42529/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie11984321885172189720test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:02,921 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42529/ledgers : zkServers = localhost:42529, ledgersRootPath = /ledgers.
2020-08-10 23:21:02,924 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:02,926 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:02,930 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie11984321885172189720test/current] [/tmp/bookie11984321885172189720test/current]
2020-08-10 23:21:02,937 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:02,938 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie11984321885172189720test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:02,938 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:02,938 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:02,939 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:02,939 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:02,939 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:02,939 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:02,948 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:35213 to become writable
2020-08-10 23:21:02,949 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 1 ms.
2020-08-10 23:21:02,949 - INFO  - [SyncThread-578-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:02,952 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:02,953 - INFO  - [BookieJournal-35213:Journal@909] - Starting journal on /tmp/bookie11984321885172189720test/current
2020-08-10 23:21:02,954 - INFO  - [BookieJournal-35213:JournalChannel@157] - Opening journal /tmp/bookie11984321885172189720test/current/173da3f85eb.txn
2020-08-10 23:21:02,955 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:02,958 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35213
2020-08-10 23:21:03,028 - INFO  - [BookieDeathWatcher-45011:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:03,028 - INFO  - [BookieDeathWatcher-45011:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-45011
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:03,028 - INFO  - [BookieDeathWatcher-45011:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:03,028 - INFO  - [BookieDeathWatcher-45011:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:03,211 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:35213' has been created.
2020-08-10 23:21:03,212 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:03,213 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie8644993929983018204test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42529/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie8644993929983018204test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:03,214 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42529/ledgers : zkServers = localhost:42529, ledgersRootPath = /ledgers.
2020-08-10 23:21:03,218 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:03,220 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:03,225 - INFO  - [BookieDeathWatcher-39795:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:03,225 - INFO  - [BookieDeathWatcher-39795:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-39795
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:03,225 - INFO  - [BookieDeathWatcher-39795:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:03,225 - INFO  - [BookieDeathWatcher-39795:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:03,227 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie8644993929983018204test/current] [/tmp/bookie8644993929983018204test/current]
2020-08-10 23:21:03,233 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:03,234 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie8644993929983018204test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:03,234 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:03,235 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:03,235 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:03,235 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:03,236 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:03,236 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:03,246 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:46423 to become writable
2020-08-10 23:21:03,246 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:03,247 - INFO  - [SyncThread-588-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:03,251 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:03,253 - INFO  - [BookieJournal-46423:Journal@909] - Starting journal on /tmp/bookie8644993929983018204test/current
2020-08-10 23:21:03,254 - INFO  - [BookieJournal-46423:JournalChannel@157] - Opening journal /tmp/bookie8644993929983018204test/current/173da3f8717.txn
2020-08-10 23:21:03,255 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:03,259 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:46423
2020-08-10 23:21:03,509 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:46423' has been created.
2020-08-10 23:21:03,510 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:03,510 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie7021584715163819024test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:42529/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie7021584715163819024test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:03,512 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42529/ledgers : zkServers = localhost:42529, ledgersRootPath = /ledgers.
2020-08-10 23:21:03,515 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:03,517 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:03,520 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie7021584715163819024test/current] [/tmp/bookie7021584715163819024test/current]
2020-08-10 23:21:03,524 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:03,525 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie7021584715163819024test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:03,525 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:03,526 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:03,526 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:03,526 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:03,527 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:03,527 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:03,532 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:45661 to become writable
2020-08-10 23:21:03,536 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:03,537 - INFO  - [SyncThread-598-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:03,542 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:03,546 - INFO  - [BookieJournal-45661:Journal@909] - Starting journal on /tmp/bookie7021584715163819024test/current
2020-08-10 23:21:03,547 - INFO  - [BookieJournal-45661:JournalChannel@157] - Opening journal /tmp/bookie7021584715163819024test/current/173da3f883c.txn
2020-08-10 23:21:03,547 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:03,553 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45661
2020-08-10 23:21:03,803 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:45661' has been created.
2020-08-10 23:21:03,804 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testReadOnlyBookieShutdown @ metadata service zk://localhost:42529/ledgers in 915 ms.
2020-08-10 23:21:03,838 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42529/ledgers : zkServers = localhost:42529, ledgersRootPath = /ledgers.
2020-08-10 23:21:03,848 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:03,851 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:03,851 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:03,851 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:03,852 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:03,854 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:46423
2020-08-10 23:21:03,854 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45661
2020-08-10 23:21:03,854 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35213
2020-08-10 23:21:03,867 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42529/ledgers : zkServers = localhost:42529, ledgersRootPath = /ledgers.
2020-08-10 23:21:03,877 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:03,880 - INFO  - [AuditorElector-127.0.0.1:35213:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:03,880 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:03,882 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:03,882 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:03,882 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:03,883 - INFO  - [AuditorElector-127.0.0.1:35213:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:21:03,884 - INFO  - [AuditorElector-127.0.0.1:35213:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:35213
2020-08-10 23:21:03,885 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:46423
2020-08-10 23:21:03,885 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45661
2020-08-10 23:21:03,885 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35213
2020-08-10 23:21:03,893 - INFO  - [AuditorElector-127.0.0.1:35213:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:03,896 - INFO  - [AuditorElector-127.0.0.1:35213:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:03,899 - INFO  - [AuditorElector-127.0.0.1:35213:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094463818 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:03,899 - INFO  - [AuditorElector-127.0.0.1:35213:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:03,899 - INFO  - [AuditorElector-127.0.0.1:35213:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:03,899 - INFO  - [AuditorBookie-127.0.0.1:35213:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:03,899 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:42529/ledgers : zkServers = localhost:42529, ledgersRootPath = /ledgers.
2020-08-10 23:21:03,907 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:03,908 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:03,908 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:03,909 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:03,909 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:03,934 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:46423
2020-08-10 23:21:03,934 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:45661
2020-08-10 23:21:03,934 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35213
2020-08-10 23:21:03,934 - INFO  - [AuditorBookie-127.0.0.1:35213:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:03,939 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:45661, 127.0.0.1:46423, 127.0.0.1:35213] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:21:03,961 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:45661, 127.0.0.1:46423, 127.0.0.1:35213] for ledger: 0
2020-08-10 23:21:03,961 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:21:03,966 - INFO  - [bookie-io-593-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:03,968 - INFO  - [bookie-io-593-2:BookieRequestHandler@50] - Channel connected  [id: 0xd2a92936, L:/127.0.0.1:45661 - R:/127.0.0.1:42270]
2020-08-10 23:21:03,967 - INFO  - [bookkeeper-io-569-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x8f6fc99a, L:/127.0.0.1:42270 - R:127.0.0.1/127.0.0.1:45661]
2020-08-10 23:21:03,968 - INFO  - [bookkeeper-io-569-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:45661
2020-08-10 23:21:03,969 - INFO  - [bookkeeper-io-569-1:PerChannelBookieClient$1@471] - connection [id: 0x8f6fc99a, L:/127.0.0.1:42270 - R:127.0.0.1/127.0.0.1:45661] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:03,973 - INFO  - [bookkeeper-io-569-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x4cd68c78, L:/127.0.0.1:45916 - R:127.0.0.1/127.0.0.1:46423]
2020-08-10 23:21:03,973 - INFO  - [bookkeeper-io-569-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:46423
2020-08-10 23:21:03,973 - INFO  - [bookkeeper-io-569-2:PerChannelBookieClient$1@471] - connection [id: 0x4cd68c78, L:/127.0.0.1:45916 - R:127.0.0.1/127.0.0.1:46423] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:03,978 - INFO  - [bookie-io-583-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:03,983 - INFO  - [bookkeeper-io-569-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x8f3bb244, L:/127.0.0.1:46774 - R:127.0.0.1/127.0.0.1:35213]
2020-08-10 23:21:03,983 - INFO  - [bookkeeper-io-569-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:35213
2020-08-10 23:21:03,984 - INFO  - [bookkeeper-io-569-3:PerChannelBookieClient$1@471] - connection [id: 0x8f3bb244, L:/127.0.0.1:46774 - R:127.0.0.1/127.0.0.1:35213] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:03,985 - INFO  - [bookie-io-583-2:BookieRequestHandler@50] - Channel connected  [id: 0xbb71bee4, L:/127.0.0.1:46423 - R:/127.0.0.1:45916]
2020-08-10 23:21:03,987 - INFO  - [bookie-io-573-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:03,987 - INFO  - [bookie-io-573-2:BookieRequestHandler@50] - Channel connected  [id: 0x958f4500, L:/127.0.0.1:35213 - R:/127.0.0.1:46774]
2020-08-10 23:21:04,024 - INFO  - [Time-limited test:BookieStateManager@331] - Transitioning Bookie to ReadOnly mode, and will serve only read requests from clients!
2020-08-10 23:21:04,033 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:45661 to become readonly
2020-08-10 23:21:04,033 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:45661
2020-08-10 23:21:04,034 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:45661
2020-08-10 23:21:04,034 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:45661
2020-08-10 23:21:04,034 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:45661
2020-08-10 23:21:05,039 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:05,039 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:05,039 - WARN  - [bookkeeper-io-569-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0x8f6fc99a, L:/127.0.0.1:42270 - R:127.0.0.1/127.0.0.1:45661] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:05,039 - INFO  - [bookkeeper-io-569-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x8f6fc99a, L:/127.0.0.1:42270 ! R:127.0.0.1/127.0.0.1:45661]
2020-08-10 23:21:05,039 - INFO  - [bookie-io-593-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xd2a92936, L:/127.0.0.1:45661 ! R:/127.0.0.1:42270]
2020-08-10 23:21:05,042 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-45661 with exitCode 0
2020-08-10 23:21:05,042 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:05,042 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:05,042 - INFO  - [SyncThread-598-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:05,043 - INFO  - [SyncThread-598-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie7021584715163819024test/current/0.log for logId 0.
2020-08-10 23:21:05,045 - INFO  - [pool-347-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie7021584715163819024test/current/1.log for logId 1.
2020-08-10 23:21:05,059 - INFO  - [SyncThread-598-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094463548 , logFileOffset - 28672]}.
2020-08-10 23:21:05,062 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:05,062 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:05,063 - INFO  - [BookieJournal-45661:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:05,063 - INFO  - [BookieJournal-45661:Journal@1144] - Journal exited loop!
2020-08-10 23:21:05,064 - INFO  - [Bookie-45661:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:05,064 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:05,064 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:05,064 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:05,065 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:05,065 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:05,065 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:05,067 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:05,067 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:05,067 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:05,073 - INFO  - [AuditorBookie-127.0.0.1:35213:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:05,081 - INFO  - [AuditorBookie-127.0.0.1:35213:Auditor@1114] - Following are the failed bookies: [127.0.0.1:45661], and searching its ledgers for re-replication
2020-08-10 23:21:05,082 - INFO  - [AuditorBookie-127.0.0.1:35213:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:45661] are identified as underreplicated
2020-08-10 23:21:05,099 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:21:05,100 - INFO  - [AuditorBookie-127.0.0.1:35213:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:05,175 - INFO  - [AuditorElector-127.0.0.1:45661:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:05,306 - INFO  - [AuditorElector-127.0.0.1:46423:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:05,418 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:05,418 - INFO  - [AuditorElector-127.0.0.1:35213:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:05,528 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:21:05,528 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:46423
2020-08-10 23:21:05,529 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:45661
2020-08-10 23:21:05,529 - INFO  - [bookkeeper-io-569-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x4cd68c78, L:/127.0.0.1:45916 ! R:127.0.0.1/127.0.0.1:46423]
2020-08-10 23:21:05,529 - INFO  - [bookie-io-583-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xbb71bee4, L:/127.0.0.1:46423 ! R:/127.0.0.1:45916]
2020-08-10 23:21:05,529 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:35213
2020-08-10 23:21:05,530 - INFO  - [bookkeeper-io-569-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x8f3bb244, L:/127.0.0.1:46774 ! R:127.0.0.1/127.0.0.1:35213]
2020-08-10 23:21:05,530 - INFO  - [bookie-io-573-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x958f4500, L:/127.0.0.1:35213 ! R:/127.0.0.1:46774]
2020-08-10 23:21:05,560 - INFO  - [BookieDeathWatcher-45661:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:05,560 - INFO  - [BookieDeathWatcher-45661:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-45661
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:05,560 - INFO  - [BookieDeathWatcher-45661:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:05,561 - INFO  - [BookieDeathWatcher-45661:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:05,636 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:05,636 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:05,638 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-35213 with exitCode 0
2020-08-10 23:21:05,638 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:05,638 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:05,638 - INFO  - [SyncThread-578-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:05,639 - INFO  - [SyncThread-578-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie11984321885172189720test/current/0.log for logId 0.
2020-08-10 23:21:05,640 - INFO  - [pool-333-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie11984321885172189720test/current/1.log for logId 1.
2020-08-10 23:21:05,647 - INFO  - [SyncThread-578-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094462955 , logFileOffset - 20992]}.
2020-08-10 23:21:05,651 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:05,652 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:05,652 - INFO  - [BookieJournal-35213:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:05,652 - INFO  - [BookieJournal-35213:Journal@1144] - Journal exited loop!
2020-08-10 23:21:05,652 - INFO  - [Bookie-35213:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:05,652 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:05,653 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:05,653 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:05,653 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:05,653 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:05,653 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:05,656 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:05,656 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:05,656 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:05,763 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:05,763 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:05,771 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-46423 with exitCode 0
2020-08-10 23:21:05,771 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:05,771 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:05,771 - INFO  - [SyncThread-588-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:05,772 - INFO  - [SyncThread-588-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie8644993929983018204test/current/0.log for logId 0.
2020-08-10 23:21:05,778 - INFO  - [pool-340-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie8644993929983018204test/current/1.log for logId 1.
2020-08-10 23:21:05,787 - INFO  - [SyncThread-588-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094463255 , logFileOffset - 24576]}.
2020-08-10 23:21:05,790 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:05,790 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:05,790 - INFO  - [BookieJournal-46423:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:05,790 - INFO  - [BookieJournal-46423:Journal@1144] - Journal exited loop!
2020-08-10 23:21:05,790 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:05,790 - INFO  - [Bookie-46423:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:05,791 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:05,791 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:05,791 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:05,791 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:05,791 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:05,793 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:05,793 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:05,793 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:05,960 - INFO  - [BookieDeathWatcher-35213:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:05,960 - INFO  - [BookieDeathWatcher-35213:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-35213
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:05,960 - INFO  - [BookieDeathWatcher-35213:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:05,960 - INFO  - [BookieDeathWatcher-35213:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:06,017 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testReadOnlyBookieShutdown in 489 ms.
2020-08-10 23:21:06,026 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:06,028 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:21:06,041 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:06,052 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40125/ledgers : zkServers = localhost:40125, ledgersRootPath = /ledgers.
2020-08-10 23:21:06,058 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:06,062 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:06,062 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:06,062 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:06,062 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:06,070 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:06,071 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie12684817192840135530test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:40125/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie12684817192840135530test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:06,073 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40125/ledgers : zkServers = localhost:40125, ledgersRootPath = /ledgers.
2020-08-10 23:21:06,081 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:06,083 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:06,089 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie12684817192840135530test/current] [/tmp/bookie12684817192840135530test/current]
2020-08-10 23:21:06,103 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:06,105 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie12684817192840135530test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:06,105 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:06,106 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:06,106 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:06,107 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:06,108 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:06,108 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:06,119 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:37109 to become writable
2020-08-10 23:21:06,120 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 1 ms.
2020-08-10 23:21:06,121 - INFO  - [SyncThread-635-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:06,126 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:06,128 - INFO  - [BookieJournal-37109:Journal@909] - Starting journal on /tmp/bookie12684817192840135530test/current
2020-08-10 23:21:06,130 - INFO  - [BookieJournal-37109:JournalChannel@157] - Opening journal /tmp/bookie12684817192840135530test/current/173da3f9253.txn
2020-08-10 23:21:06,131 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:06,137 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37109
2020-08-10 23:21:06,266 - INFO  - [BookieDeathWatcher-46423:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:06,266 - INFO  - [BookieDeathWatcher-46423:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-46423
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:06,266 - INFO  - [BookieDeathWatcher-46423:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:06,266 - INFO  - [BookieDeathWatcher-46423:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:06,387 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:37109' has been created.
2020-08-10 23:21:06,388 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:06,389 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie7944263827843427108test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:40125/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie7944263827843427108test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:06,392 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40125/ledgers : zkServers = localhost:40125, ledgersRootPath = /ledgers.
2020-08-10 23:21:06,396 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:06,404 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:06,409 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie7944263827843427108test/current] [/tmp/bookie7944263827843427108test/current]
2020-08-10 23:21:06,416 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:06,417 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie7944263827843427108test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:06,417 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:06,417 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:06,418 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:06,418 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:06,419 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:06,419 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:06,425 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:41275 to become writable
2020-08-10 23:21:06,426 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:06,427 - INFO  - [SyncThread-645-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:06,432 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:06,434 - INFO  - [BookieJournal-41275:Journal@909] - Starting journal on /tmp/bookie7944263827843427108test/current
2020-08-10 23:21:06,434 - INFO  - [BookieJournal-41275:JournalChannel@157] - Opening journal /tmp/bookie7944263827843427108test/current/173da3f9383.txn
2020-08-10 23:21:06,435 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:06,441 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41275
2020-08-10 23:21:06,691 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:41275' has been created.
2020-08-10 23:21:06,692 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:06,693 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie16982997223686574179test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:40125/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie16982997223686574179test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:06,696 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40125/ledgers : zkServers = localhost:40125, ledgersRootPath = /ledgers.
2020-08-10 23:21:06,701 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:06,704 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:06,712 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie16982997223686574179test/current] [/tmp/bookie16982997223686574179test/current]
2020-08-10 23:21:06,720 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:06,722 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie16982997223686574179test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:06,722 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:06,723 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:06,723 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:06,724 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:06,725 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:06,725 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:06,739 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:35403 to become writable
2020-08-10 23:21:06,739 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:06,742 - INFO  - [SyncThread-655-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:06,747 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:06,749 - INFO  - [BookieJournal-35403:Journal@909] - Starting journal on /tmp/bookie16982997223686574179test/current
2020-08-10 23:21:06,749 - INFO  - [BookieJournal-35403:JournalChannel@157] - Opening journal /tmp/bookie16982997223686574179test/current/173da3f94be.txn
2020-08-10 23:21:06,749 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:06,759 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35403
2020-08-10 23:21:07,009 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:35403' has been created.
2020-08-10 23:21:07,010 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testDelayedAuditWithMultipleBookieFailures @ metadata service zk://localhost:40125/ledgers in 981 ms.
2020-08-10 23:21:07,027 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40125/ledgers : zkServers = localhost:40125, ledgersRootPath = /ledgers.
2020-08-10 23:21:07,032 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:07,035 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:07,035 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:07,035 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:07,035 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:07,037 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37109
2020-08-10 23:21:07,037 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35403
2020-08-10 23:21:07,037 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41275
2020-08-10 23:21:07,047 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40125/ledgers : zkServers = localhost:40125, ledgersRootPath = /ledgers.
2020-08-10 23:21:07,052 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:07,055 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:07,056 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:07,056 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:07,056 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:07,062 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37109
2020-08-10 23:21:07,063 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35403
2020-08-10 23:21:07,063 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41275
2020-08-10 23:21:07,069 - INFO  - [AuditorElector-127.0.0.1:37109:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:07,077 - INFO  - [AuditorElector-127.0.0.1:37109:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:21:07,078 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40125/ledgers : zkServers = localhost:40125, ledgersRootPath = /ledgers.
2020-08-10 23:21:07,083 - INFO  - [AuditorElector-127.0.0.1:37109:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:37109
2020-08-10 23:21:07,092 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:07,094 - INFO  - [AuditorElector-127.0.0.1:37109:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:07,096 - INFO  - [AuditorElector-127.0.0.1:37109:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:07,098 - INFO  - [AuditorElector-127.0.0.1:37109:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094467022 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:07,098 - INFO  - [AuditorElector-127.0.0.1:37109:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:07,098 - INFO  - [AuditorElector-127.0.0.1:37109:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:07,098 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:07,098 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:07,098 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:07,098 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:07,100 - INFO  - [AuditorBookie-127.0.0.1:37109:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:07,101 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37109
2020-08-10 23:21:07,101 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35403
2020-08-10 23:21:07,102 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41275
2020-08-10 23:21:07,116 - INFO  - [AuditorBookie-127.0.0.1:37109:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:08,107 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:37109, 127.0.0.1:41275, 127.0.0.1:35403] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:21:08,131 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:37109, 127.0.0.1:41275, 127.0.0.1:35403] for ledger: 0
2020-08-10 23:21:08,131 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:21:08,135 - INFO  - [bookkeeper-io-626-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xaaef8d94, L:/127.0.0.1:50802 - R:127.0.0.1/127.0.0.1:37109]
2020-08-10 23:21:08,136 - INFO  - [bookkeeper-io-626-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:37109
2020-08-10 23:21:08,136 - INFO  - [bookkeeper-io-626-1:PerChannelBookieClient$1@471] - connection [id: 0xaaef8d94, L:/127.0.0.1:50802 - R:127.0.0.1/127.0.0.1:37109] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:08,139 - INFO  - [bookie-io-640-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:08,141 - INFO  - [bookie-io-640-2:BookieRequestHandler@50] - Channel connected  [id: 0x1084941e, L:/127.0.0.1:41275 - R:/127.0.0.1:40462]
2020-08-10 23:21:08,141 - INFO  - [bookkeeper-io-626-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x89b9c0ba, L:/127.0.0.1:40462 - R:127.0.0.1/127.0.0.1:41275]
2020-08-10 23:21:08,141 - INFO  - [bookkeeper-io-626-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:41275
2020-08-10 23:21:08,141 - INFO  - [bookie-io-630-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:08,142 - INFO  - [bookie-io-630-2:BookieRequestHandler@50] - Channel connected  [id: 0xafdf0cf0, L:/127.0.0.1:37109 - R:/127.0.0.1:50802]
2020-08-10 23:21:08,142 - INFO  - [bookkeeper-io-626-2:PerChannelBookieClient$1@471] - connection [id: 0x89b9c0ba, L:/127.0.0.1:40462 - R:127.0.0.1/127.0.0.1:41275] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:08,145 - INFO  - [bookkeeper-io-626-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x186bd84e, L:/127.0.0.1:49582 - R:127.0.0.1/127.0.0.1:35403]
2020-08-10 23:21:08,145 - INFO  - [bookkeeper-io-626-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:35403
2020-08-10 23:21:08,145 - INFO  - [bookkeeper-io-626-3:PerChannelBookieClient$1@471] - connection [id: 0x186bd84e, L:/127.0.0.1:49582 - R:127.0.0.1/127.0.0.1:35403] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:08,158 - INFO  - [bookie-io-650-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:08,158 - INFO  - [bookie-io-650-2:BookieRequestHandler@50] - Channel connected  [id: 0x3b99c9f0, L:/127.0.0.1:35403 - R:/127.0.0.1:49582]
2020-08-10 23:21:08,210 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:08,211 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:08,211 - WARN  - [bookkeeper-io-626-2:PerChannelBookieClient@1270] - Exception caught on:[id: 0x89b9c0ba, L:/127.0.0.1:40462 - R:127.0.0.1/127.0.0.1:41275] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:08,212 - INFO  - [bookkeeper-io-626-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x89b9c0ba, L:/127.0.0.1:40462 ! R:127.0.0.1/127.0.0.1:41275]
2020-08-10 23:21:08,212 - INFO  - [bookie-io-640-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x1084941e, L:/127.0.0.1:41275 ! R:/127.0.0.1:40462]
2020-08-10 23:21:08,225 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-41275 with exitCode 0
2020-08-10 23:21:08,225 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:08,225 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:08,225 - INFO  - [SyncThread-645-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:08,227 - INFO  - [SyncThread-645-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie7944263827843427108test/current/0.log for logId 0.
2020-08-10 23:21:08,232 - INFO  - [pool-375-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie7944263827843427108test/current/1.log for logId 1.
2020-08-10 23:21:08,245 - INFO  - [SyncThread-645-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094466435 , logFileOffset - 14848]}.
2020-08-10 23:21:08,249 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:08,249 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:08,250 - INFO  - [BookieJournal-41275:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:08,250 - INFO  - [BookieJournal-41275:Journal@1144] - Journal exited loop!
2020-08-10 23:21:08,251 - INFO  - [Bookie-41275:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:08,251 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:08,252 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:08,252 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:08,252 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:08,252 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:08,252 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:08,255 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:08,256 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:08,256 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:08,259 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:41275
2020-08-10 23:21:08,259 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:41275
2020-08-10 23:21:08,363 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:41275
2020-08-10 23:21:08,363 - INFO  - [AuditorElector-127.0.0.1:41275:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:08,363 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:41275
2020-08-10 23:21:08,368 - INFO  - [AuditorBookie-127.0.0.1:37109:Auditor$9@583] - Delaying bookie audit by 10 secs for [127.0.0.1:41275]
2020-08-10 23:21:08,441 - INFO  - [BookieDeathWatcher-41275:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:08,441 - INFO  - [BookieDeathWatcher-41275:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-41275
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:08,441 - INFO  - [BookieDeathWatcher-41275:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:08,441 - INFO  - [BookieDeathWatcher-41275:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:11,478 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:11,479 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:11,479 - WARN  - [bookkeeper-io-626-3:PerChannelBookieClient@1270] - Exception caught on:[id: 0x186bd84e, L:/127.0.0.1:49582 - R:127.0.0.1/127.0.0.1:35403] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:11,480 - INFO  - [bookkeeper-io-626-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x186bd84e, L:/127.0.0.1:49582 ! R:127.0.0.1/127.0.0.1:35403]
2020-08-10 23:21:11,481 - INFO  - [bookie-io-650-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x3b99c9f0, L:/127.0.0.1:35403 ! R:/127.0.0.1:49582]
2020-08-10 23:21:11,487 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-35403 with exitCode 0
2020-08-10 23:21:11,487 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:11,487 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:11,487 - INFO  - [SyncThread-655-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:11,488 - INFO  - [SyncThread-655-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie16982997223686574179test/current/0.log for logId 0.
2020-08-10 23:21:11,497 - INFO  - [pool-382-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie16982997223686574179test/current/1.log for logId 1.
2020-08-10 23:21:11,505 - INFO  - [SyncThread-655-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094466750 , logFileOffset - 13312]}.
2020-08-10 23:21:11,508 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:11,509 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:11,509 - INFO  - [BookieJournal-35403:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:11,509 - INFO  - [BookieJournal-35403:Journal@1144] - Journal exited loop!
2020-08-10 23:21:11,510 - INFO  - [Bookie-35403:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:11,510 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:11,511 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:11,511 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:11,511 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:11,511 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:11,511 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:11,514 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:11,514 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:11,514 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:11,517 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35403
2020-08-10 23:21:11,517 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35403
2020-08-10 23:21:11,517 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35403
2020-08-10 23:21:11,520 - INFO  - [AuditorBookie-127.0.0.1:37109:Auditor$9@560] - Multiple bookie failure; not delaying bookie audit. Bookies lost now: []; All lost bookies: [127.0.0.1:41275, 127.0.0.1:35403]
2020-08-10 23:21:11,520 - INFO  - [AuditorBookie-127.0.0.1:37109:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:11,527 - INFO  - [AuditorBookie-127.0.0.1:37109:Auditor@1114] - Following are the failed bookies: [127.0.0.1:41275, 127.0.0.1:35403], and searching its ledgers for re-replication
2020-08-10 23:21:11,527 - INFO  - [AuditorBookie-127.0.0.1:37109:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:41275] are identified as underreplicated
2020-08-10 23:21:11,549 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:21:11,549 - INFO  - [Time-limited test-EventThread:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:35403] are identified as underreplicated
2020-08-10 23:21:11,555 - INFO  - [AuditorBookie-127.0.0.1:37109:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:11,621 - INFO  - [AuditorElector-127.0.0.1:35403:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:11,761 - INFO  - [BookieDeathWatcher-35403:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:11,761 - INFO  - [BookieDeathWatcher-35403:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-35403
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:11,761 - INFO  - [BookieDeathWatcher-35403:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:11,761 - INFO  - [BookieDeathWatcher-35403:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:13,736 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:13,736 - INFO  - [AuditorElector-127.0.0.1:37109:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:13,845 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:21:13,845 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:37109
2020-08-10 23:21:13,846 - INFO  - [bookkeeper-io-626-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xaaef8d94, L:/127.0.0.1:50802 ! R:127.0.0.1/127.0.0.1:37109]
2020-08-10 23:21:13,846 - INFO  - [bookie-io-630-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xafdf0cf0, L:/127.0.0.1:37109 ! R:/127.0.0.1:50802]
2020-08-10 23:21:13,846 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:35403
2020-08-10 23:21:13,846 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:41275
2020-08-10 23:21:13,952 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:13,952 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:13,955 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-37109 with exitCode 0
2020-08-10 23:21:13,955 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:13,955 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:13,955 - INFO  - [SyncThread-635-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:13,960 - INFO  - [SyncThread-635-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie12684817192840135530test/current/0.log for logId 0.
2020-08-10 23:21:13,962 - INFO  - [pool-368-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie12684817192840135530test/current/1.log for logId 1.
2020-08-10 23:21:13,976 - INFO  - [SyncThread-635-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094466131 , logFileOffset - 9216]}.
2020-08-10 23:21:13,980 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:13,981 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:13,981 - INFO  - [BookieJournal-37109:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:13,981 - INFO  - [BookieJournal-37109:Journal@1144] - Journal exited loop!
2020-08-10 23:21:13,982 - INFO  - [Bookie-37109:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:13,982 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:13,982 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:13,982 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:13,982 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:13,982 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:13,982 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:13,985 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:13,985 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:13,985 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:14,140 - INFO  - [BookieDeathWatcher-37109:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:14,140 - INFO  - [BookieDeathWatcher-37109:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-37109
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:14,140 - INFO  - [BookieDeathWatcher-37109:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:14,140 - INFO  - [BookieDeathWatcher-37109:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:14,199 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testDelayedAuditWithMultipleBookieFailures in 353 ms.
2020-08-10 23:21:14,199 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:14,200 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:21:14,213 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:14,218 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41977/ledgers : zkServers = localhost:41977, ledgersRootPath = /ledgers.
2020-08-10 23:21:14,221 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:14,222 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:14,222 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:14,222 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:14,223 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:14,227 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:14,227 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie3268968007510254005test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:41977/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie3268968007510254005test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:14,229 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41977/ledgers : zkServers = localhost:41977, ledgersRootPath = /ledgers.
2020-08-10 23:21:14,232 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:14,235 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:14,241 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie3268968007510254005test/current] [/tmp/bookie3268968007510254005test/current]
2020-08-10 23:21:14,248 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:14,249 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie3268968007510254005test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:14,249 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:14,249 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:14,249 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:14,250 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:14,250 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:14,250 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:14,256 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:39181 to become writable
2020-08-10 23:21:14,256 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:14,257 - INFO  - [SyncThread-692-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:14,261 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:14,265 - INFO  - [BookieJournal-39181:Journal@909] - Starting journal on /tmp/bookie3268968007510254005test/current
2020-08-10 23:21:14,266 - INFO  - [BookieJournal-39181:JournalChannel@157] - Opening journal /tmp/bookie3268968007510254005test/current/173da3fb21b.txn
2020-08-10 23:21:14,268 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:14,272 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39181
2020-08-10 23:21:14,526 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:39181' has been created.
2020-08-10 23:21:14,528 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:14,528 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie7496521077638266861test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:41977/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie7496521077638266861test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:14,530 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41977/ledgers : zkServers = localhost:41977, ledgersRootPath = /ledgers.
2020-08-10 23:21:14,534 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:14,538 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:14,542 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie7496521077638266861test/current] [/tmp/bookie7496521077638266861test/current]
2020-08-10 23:21:14,547 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:14,548 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie7496521077638266861test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:14,548 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:14,548 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:14,549 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:14,549 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:14,549 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:14,549 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:14,555 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:41527 to become writable
2020-08-10 23:21:14,555 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:14,556 - INFO  - [SyncThread-702-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:14,560 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:14,562 - INFO  - [BookieJournal-41527:Journal@909] - Starting journal on /tmp/bookie7496521077638266861test/current
2020-08-10 23:21:14,563 - INFO  - [BookieJournal-41527:JournalChannel@157] - Opening journal /tmp/bookie7496521077638266861test/current/173da3fb344.txn
2020-08-10 23:21:14,563 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:14,569 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41527
2020-08-10 23:21:14,820 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:41527' has been created.
2020-08-10 23:21:14,821 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:14,821 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie8375740637898571090test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:41977/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie8375740637898571090test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:14,822 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41977/ledgers : zkServers = localhost:41977, ledgersRootPath = /ledgers.
2020-08-10 23:21:14,829 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:14,832 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:14,837 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie8375740637898571090test/current] [/tmp/bookie8375740637898571090test/current]
2020-08-10 23:21:14,842 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:14,843 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie8375740637898571090test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:14,843 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:14,843 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:14,843 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:14,844 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:14,844 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:14,844 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:14,854 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:35849 to become writable
2020-08-10 23:21:14,854 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:14,856 - INFO  - [SyncThread-712-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:14,859 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:14,862 - INFO  - [BookieJournal-35849:Journal@909] - Starting journal on /tmp/bookie8375740637898571090test/current
2020-08-10 23:21:14,863 - INFO  - [BookieJournal-35849:JournalChannel@157] - Opening journal /tmp/bookie8375740637898571090test/current/173da3fb470.txn
2020-08-10 23:21:14,863 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:14,867 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35849
2020-08-10 23:21:15,116 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:35849' has been created.
2020-08-10 23:21:15,117 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testSimpleLedger @ metadata service zk://localhost:41977/ledgers in 917 ms.
2020-08-10 23:21:15,135 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41977/ledgers : zkServers = localhost:41977, ledgersRootPath = /ledgers.
2020-08-10 23:21:15,138 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:15,140 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:15,140 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:15,140 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:15,140 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:15,143 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41527
2020-08-10 23:21:15,143 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35849
2020-08-10 23:21:15,143 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39181
2020-08-10 23:21:15,153 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41977/ledgers : zkServers = localhost:41977, ledgersRootPath = /ledgers.
2020-08-10 23:21:15,168 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:15,170 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:15,170 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:15,170 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:15,170 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:15,171 - INFO  - [AuditorElector-127.0.0.1:39181:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:15,172 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41527
2020-08-10 23:21:15,172 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35849
2020-08-10 23:21:15,173 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39181
2020-08-10 23:21:15,173 - INFO  - [AuditorElector-127.0.0.1:39181:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:21:15,174 - INFO  - [AuditorElector-127.0.0.1:39181:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:39181
2020-08-10 23:21:15,184 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41977/ledgers : zkServers = localhost:41977, ledgersRootPath = /ledgers.
2020-08-10 23:21:15,184 - INFO  - [AuditorElector-127.0.0.1:39181:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:15,187 - INFO  - [AuditorElector-127.0.0.1:39181:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:15,189 - INFO  - [AuditorBookie-127.0.0.1:39181:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:15,189 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:15,189 - INFO  - [AuditorElector-127.0.0.1:39181:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094475130 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:15,189 - INFO  - [AuditorElector-127.0.0.1:39181:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:15,189 - INFO  - [AuditorElector-127.0.0.1:39181:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:15,191 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:15,191 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:15,191 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:15,191 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:15,193 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41527
2020-08-10 23:21:15,193 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35849
2020-08-10 23:21:15,194 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:39181
2020-08-10 23:21:15,194 - INFO  - [AuditorBookie-127.0.0.1:39181:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:15,196 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:35849, 127.0.0.1:39181, 127.0.0.1:41527] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:21:15,219 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:35849, 127.0.0.1:39181, 127.0.0.1:41527] for ledger: 0
2020-08-10 23:21:15,219 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:21:15,224 - INFO  - [bookkeeper-io-683-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x3b10bf55, L:/127.0.0.1:58406 - R:127.0.0.1/127.0.0.1:39181]
2020-08-10 23:21:15,224 - INFO  - [bookkeeper-io-683-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:39181
2020-08-10 23:21:15,224 - INFO  - [bookkeeper-io-683-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x4d92198c, L:/127.0.0.1:39118 - R:127.0.0.1/127.0.0.1:35849]
2020-08-10 23:21:15,225 - INFO  - [bookkeeper-io-683-2:PerChannelBookieClient$1@471] - connection [id: 0x3b10bf55, L:/127.0.0.1:58406 - R:127.0.0.1/127.0.0.1:39181] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:15,225 - INFO  - [bookkeeper-io-683-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:35849
2020-08-10 23:21:15,225 - INFO  - [bookkeeper-io-683-1:PerChannelBookieClient$1@471] - connection [id: 0x4d92198c, L:/127.0.0.1:39118 - R:127.0.0.1/127.0.0.1:35849] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:15,230 - INFO  - [bookie-io-697-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:15,230 - INFO  - [bookie-io-697-2:BookieRequestHandler@50] - Channel connected  [id: 0x9307b502, L:/127.0.0.1:41527 - R:/127.0.0.1:51950]
2020-08-10 23:21:15,232 - INFO  - [bookie-io-687-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:15,232 - INFO  - [bookie-io-687-2:BookieRequestHandler@50] - Channel connected  [id: 0xd36a842d, L:/127.0.0.1:39181 - R:/127.0.0.1:58406]
2020-08-10 23:21:15,232 - INFO  - [bookkeeper-io-683-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xc6bf6d79, L:/127.0.0.1:51950 - R:127.0.0.1/127.0.0.1:41527]
2020-08-10 23:21:15,232 - INFO  - [bookkeeper-io-683-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:41527
2020-08-10 23:21:15,233 - INFO  - [bookie-io-707-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:15,234 - INFO  - [bookie-io-707-2:BookieRequestHandler@50] - Channel connected  [id: 0xde2f4bd8, L:/127.0.0.1:35849 - R:/127.0.0.1:39118]
2020-08-10 23:21:15,234 - INFO  - [bookkeeper-io-683-3:PerChannelBookieClient$1@471] - connection [id: 0xc6bf6d79, L:/127.0.0.1:51950 - R:127.0.0.1/127.0.0.1:41527] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:15,264 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:15,265 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:15,265 - WARN  - [bookkeeper-io-683-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0x4d92198c, L:/127.0.0.1:39118 - R:127.0.0.1/127.0.0.1:35849] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:15,266 - INFO  - [bookkeeper-io-683-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x4d92198c, L:/127.0.0.1:39118 ! R:127.0.0.1/127.0.0.1:35849]
2020-08-10 23:21:15,267 - INFO  - [bookie-io-707-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xde2f4bd8, L:/127.0.0.1:35849 ! R:/127.0.0.1:39118]
2020-08-10 23:21:15,280 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-35849 with exitCode 0
2020-08-10 23:21:15,281 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:15,281 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:15,281 - INFO  - [SyncThread-712-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:15,281 - INFO  - [SyncThread-712-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie8375740637898571090test/current/0.log for logId 0.
2020-08-10 23:21:15,284 - INFO  - [pool-417-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie8375740637898571090test/current/1.log for logId 1.
2020-08-10 23:21:15,301 - INFO  - [SyncThread-712-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094474864 , logFileOffset - 24064]}.
2020-08-10 23:21:15,303 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:15,304 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:15,304 - INFO  - [BookieJournal-35849:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:15,304 - INFO  - [BookieJournal-35849:Journal@1144] - Journal exited loop!
2020-08-10 23:21:15,304 - INFO  - [Bookie-35849:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:15,305 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:15,305 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:15,305 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:15,305 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:15,306 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:15,306 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:15,308 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:15,308 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:15,309 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:15,312 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35849
2020-08-10 23:21:15,418 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35849
2020-08-10 23:21:15,418 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35849
2020-08-10 23:21:15,419 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35849
2020-08-10 23:21:15,419 - INFO  - [AuditorElector-127.0.0.1:35849:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:15,425 - INFO  - [AuditorBookie-127.0.0.1:39181:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:15,432 - INFO  - [AuditorBookie-127.0.0.1:39181:Auditor@1114] - Following are the failed bookies: [127.0.0.1:35849], and searching its ledgers for re-replication
2020-08-10 23:21:15,433 - INFO  - [AuditorBookie-127.0.0.1:39181:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:35849] are identified as underreplicated
2020-08-10 23:21:15,448 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:21:15,448 - INFO  - [AuditorBookie-127.0.0.1:39181:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:15,535 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:15,535 - INFO  - [AuditorElector-127.0.0.1:39181:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:15,554 - INFO  - [AuditorElector-127.0.0.1:41527:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:15,556 - INFO  - [AuditorElector-127.0.0.1:41527:ZkLedgerUnderreplicationManager@811] - lostBookieRecoveryDelay Znode is already present, so using existing lostBookieRecoveryDelay Znode value
2020-08-10 23:21:15,556 - INFO  - [AuditorElector-127.0.0.1:41527:Auditor@474] - Valid lostBookieRecoveryDelay zNode is available, so not creating lostBookieRecoveryDelay zNode as part of Auditor initialization 
2020-08-10 23:21:15,557 - INFO  - [AuditorElector-127.0.0.1:41527:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:41527
2020-08-10 23:21:15,562 - INFO  - [AuditorElector-127.0.0.1:41527:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:15,562 - INFO  - [AuditorElector-127.0.0.1:41527:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:15,563 - INFO  - [AuditorElector-127.0.0.1:41527:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094475130 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:15,563 - INFO  - [AuditorElector-127.0.0.1:41527:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:15,563 - INFO  - [AuditorElector-127.0.0.1:41527:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:15,563 - INFO  - [AuditorBookie-127.0.0.1:41527:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:15,573 - INFO  - [AuditorBookie-127.0.0.1:41527:Auditor@1114] - Following are the failed bookies: [127.0.0.1:35849], and searching its ledgers for re-replication
2020-08-10 23:21:15,573 - INFO  - [AuditorBookie-127.0.0.1:41527:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:35849] are identified as underreplicated
2020-08-10 23:21:15,580 - INFO  - [AuditorBookie-127.0.0.1:41527:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:15,655 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:15,655 - INFO  - [AuditorElector-127.0.0.1:41527:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:15,770 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:21:15,771 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:41527
2020-08-10 23:21:15,772 - INFO  - [bookkeeper-io-683-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xc6bf6d79, L:/127.0.0.1:51950 ! R:127.0.0.1/127.0.0.1:41527]
2020-08-10 23:21:15,773 - INFO  - [bookie-io-697-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x9307b502, L:/127.0.0.1:41527 ! R:/127.0.0.1:51950]
2020-08-10 23:21:15,773 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:35849
2020-08-10 23:21:15,773 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:39181
2020-08-10 23:21:15,774 - INFO  - [bookkeeper-io-683-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x3b10bf55, L:/127.0.0.1:58406 ! R:127.0.0.1/127.0.0.1:39181]
2020-08-10 23:21:15,775 - INFO  - [bookie-io-687-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xd36a842d, L:/127.0.0.1:39181 ! R:/127.0.0.1:58406]
2020-08-10 23:21:15,867 - INFO  - [BookieDeathWatcher-35849:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:15,867 - INFO  - [BookieDeathWatcher-35849:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-35849
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:15,868 - INFO  - [BookieDeathWatcher-35849:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:15,868 - INFO  - [BookieDeathWatcher-35849:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:15,886 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:15,886 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:15,889 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-39181 with exitCode 0
2020-08-10 23:21:15,889 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:15,889 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:15,890 - INFO  - [SyncThread-692-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:15,890 - INFO  - [SyncThread-692-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie3268968007510254005test/current/0.log for logId 0.
2020-08-10 23:21:15,896 - INFO  - [pool-403-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie3268968007510254005test/current/1.log for logId 1.
2020-08-10 23:21:15,903 - INFO  - [SyncThread-692-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094474267 , logFileOffset - 8192]}.
2020-08-10 23:21:15,906 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:15,907 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:15,907 - INFO  - [BookieJournal-39181:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:15,907 - INFO  - [BookieJournal-39181:Journal@1144] - Journal exited loop!
2020-08-10 23:21:15,908 - INFO  - [Bookie-39181:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:15,908 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:15,908 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:15,908 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:15,908 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:15,908 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:15,909 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:15,910 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:15,911 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:15,911 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:16,015 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:16,016 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:16,024 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-41527 with exitCode 0
2020-08-10 23:21:16,024 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:16,025 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:16,025 - INFO  - [SyncThread-702-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:16,027 - INFO  - [SyncThread-702-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie7496521077638266861test/current/0.log for logId 0.
2020-08-10 23:21:16,029 - INFO  - [pool-410-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie7496521077638266861test/current/1.log for logId 1.
2020-08-10 23:21:16,037 - INFO  - [SyncThread-702-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094474564 , logFileOffset - 8704]}.
2020-08-10 23:21:16,040 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:16,040 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:16,041 - INFO  - [BookieJournal-41527:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:16,041 - INFO  - [BookieJournal-41527:Journal@1144] - Journal exited loop!
2020-08-10 23:21:16,042 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:16,042 - INFO  - [Bookie-41527:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:16,042 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:16,042 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:16,042 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:16,042 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:16,042 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:16,045 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:16,046 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:16,046 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:16,273 - INFO  - [BookieDeathWatcher-39181:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:16,273 - INFO  - [BookieDeathWatcher-39181:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-39181
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:16,273 - INFO  - [BookieDeathWatcher-39181:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:16,273 - INFO  - [BookieDeathWatcher-39181:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:16,274 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testSimpleLedger in 503 ms.
2020-08-10 23:21:16,275 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:16,275 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:21:16,288 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:16,294 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36407/ledgers : zkServers = localhost:36407, ledgersRootPath = /ledgers.
2020-08-10 23:21:16,297 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:16,301 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:16,301 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:16,301 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:16,301 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:16,307 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:16,307 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie10251776958923751556test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:36407/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie10251776958923751556test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:16,309 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36407/ledgers : zkServers = localhost:36407, ledgersRootPath = /ledgers.
2020-08-10 23:21:16,315 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:16,322 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:16,327 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie10251776958923751556test/current] [/tmp/bookie10251776958923751556test/current]
2020-08-10 23:21:16,334 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:16,335 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie10251776958923751556test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:16,335 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:16,335 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:16,336 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:16,336 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:16,336 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:16,336 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:16,346 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:43931 to become writable
2020-08-10 23:21:16,346 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:16,347 - INFO  - [SyncThread-752-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:16,351 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:16,353 - INFO  - [BookieJournal-43931:Journal@909] - Starting journal on /tmp/bookie10251776958923751556test/current
2020-08-10 23:21:16,354 - INFO  - [BookieJournal-43931:JournalChannel@157] - Opening journal /tmp/bookie10251776958923751556test/current/173da3fba43.txn
2020-08-10 23:21:16,354 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:16,359 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:43931
2020-08-10 23:21:16,569 - INFO  - [BookieDeathWatcher-41527:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:16,569 - INFO  - [BookieDeathWatcher-41527:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-41527
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:16,569 - INFO  - [BookieDeathWatcher-41527:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:16,569 - INFO  - [BookieDeathWatcher-41527:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:16,608 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:43931' has been created.
2020-08-10 23:21:16,611 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:16,611 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie6889818814361886069test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:36407/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie6889818814361886069test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:16,616 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36407/ledgers : zkServers = localhost:36407, ledgersRootPath = /ledgers.
2020-08-10 23:21:16,620 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:16,622 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:16,627 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie6889818814361886069test/current] [/tmp/bookie6889818814361886069test/current]
2020-08-10 23:21:16,635 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:16,636 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie6889818814361886069test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:16,637 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:16,637 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:16,637 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:16,638 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:16,638 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:16,639 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:16,650 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:42377 to become writable
2020-08-10 23:21:16,650 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:16,652 - INFO  - [SyncThread-762-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:16,656 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:16,659 - INFO  - [BookieJournal-42377:Journal@909] - Starting journal on /tmp/bookie6889818814361886069test/current
2020-08-10 23:21:16,659 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:16,659 - INFO  - [BookieJournal-42377:JournalChannel@157] - Opening journal /tmp/bookie6889818814361886069test/current/173da3fbb74.txn
2020-08-10 23:21:16,667 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:42377
2020-08-10 23:21:16,916 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:42377' has been created.
2020-08-10 23:21:16,918 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:16,918 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie2842209261465663540test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:36407/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie2842209261465663540test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:16,920 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36407/ledgers : zkServers = localhost:36407, ledgersRootPath = /ledgers.
2020-08-10 23:21:16,924 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:16,927 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:16,931 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie2842209261465663540test/current] [/tmp/bookie2842209261465663540test/current]
2020-08-10 23:21:16,936 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:16,937 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie2842209261465663540test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:16,937 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:16,938 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:16,938 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:16,938 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:16,939 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:16,939 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:16,949 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:34147 to become writable
2020-08-10 23:21:16,949 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:16,950 - INFO  - [SyncThread-772-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:16,953 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:16,954 - INFO  - [BookieJournal-34147:Journal@909] - Starting journal on /tmp/bookie2842209261465663540test/current
2020-08-10 23:21:16,955 - INFO  - [BookieJournal-34147:JournalChannel@157] - Opening journal /tmp/bookie2842209261465663540test/current/173da3fbc9c.txn
2020-08-10 23:21:16,955 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:16,961 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:34147
2020-08-10 23:21:17,215 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:34147' has been created.
2020-08-10 23:21:17,217 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testToggleLedgerReplication @ metadata service zk://localhost:36407/ledgers in 941 ms.
2020-08-10 23:21:17,232 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36407/ledgers : zkServers = localhost:36407, ledgersRootPath = /ledgers.
2020-08-10 23:21:17,235 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:17,236 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:17,237 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:17,237 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:17,237 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:17,238 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:43931
2020-08-10 23:21:17,238 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:42377
2020-08-10 23:21:17,238 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:34147
2020-08-10 23:21:17,246 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36407/ledgers : zkServers = localhost:36407, ledgersRootPath = /ledgers.
2020-08-10 23:21:17,249 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:17,253 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:17,253 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:17,253 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:17,253 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:17,255 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:43931
2020-08-10 23:21:17,255 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:42377
2020-08-10 23:21:17,255 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:34147
2020-08-10 23:21:17,257 - INFO  - [AuditorElector-127.0.0.1:43931:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:17,259 - INFO  - [AuditorElector-127.0.0.1:43931:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:21:17,260 - INFO  - [AuditorElector-127.0.0.1:43931:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:43931
2020-08-10 23:21:17,270 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:36407/ledgers : zkServers = localhost:36407, ledgersRootPath = /ledgers.
2020-08-10 23:21:17,274 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:17,274 - INFO  - [AuditorElector-127.0.0.1:43931:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:17,274 - INFO  - [AuditorElector-127.0.0.1:43931:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:17,276 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:17,277 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:17,277 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:17,277 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:17,277 - INFO  - [AuditorElector-127.0.0.1:43931:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094477227 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:17,277 - INFO  - [AuditorElector-127.0.0.1:43931:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:17,277 - INFO  - [AuditorElector-127.0.0.1:43931:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:17,277 - INFO  - [AuditorBookie-127.0.0.1:43931:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:17,281 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:43931
2020-08-10 23:21:17,281 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:42377
2020-08-10 23:21:17,282 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:34147
2020-08-10 23:21:17,289 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:42377, 127.0.0.1:34147, 127.0.0.1:43931] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:21:17,307 - INFO  - [AuditorBookie-127.0.0.1:43931:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:17,319 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:42377, 127.0.0.1:34147, 127.0.0.1:43931] for ledger: 0
2020-08-10 23:21:17,319 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:21:17,324 - INFO  - [bookkeeper-io-743-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xcbe152ac, L:/127.0.0.1:55036 - R:127.0.0.1/127.0.0.1:42377]
2020-08-10 23:21:17,324 - INFO  - [bookkeeper-io-743-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:42377
2020-08-10 23:21:17,324 - INFO  - [bookkeeper-io-743-1:PerChannelBookieClient$1@471] - connection [id: 0xcbe152ac, L:/127.0.0.1:55036 - R:127.0.0.1/127.0.0.1:42377] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:17,328 - INFO  - [bookie-io-757-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:17,328 - INFO  - [bookie-io-757-2:BookieRequestHandler@50] - Channel connected  [id: 0x1f47ed6a, L:/127.0.0.1:42377 - R:/127.0.0.1:55036]
2020-08-10 23:21:17,331 - INFO  - [bookkeeper-io-743-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x768de36f, L:/127.0.0.1:49704 - R:127.0.0.1/127.0.0.1:34147]
2020-08-10 23:21:17,331 - INFO  - [bookkeeper-io-743-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:34147
2020-08-10 23:21:17,332 - INFO  - [bookie-io-767-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:17,332 - INFO  - [bookkeeper-io-743-2:PerChannelBookieClient$1@471] - connection [id: 0x768de36f, L:/127.0.0.1:49704 - R:127.0.0.1/127.0.0.1:34147] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:17,332 - INFO  - [bookie-io-767-2:BookieRequestHandler@50] - Channel connected  [id: 0xc6fd2a24, L:/127.0.0.1:34147 - R:/127.0.0.1:49704]
2020-08-10 23:21:17,337 - INFO  - [bookkeeper-io-743-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x00d50496, L:/127.0.0.1:59374 - R:127.0.0.1/127.0.0.1:43931]
2020-08-10 23:21:17,337 - INFO  - [bookkeeper-io-743-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:43931
2020-08-10 23:21:17,337 - INFO  - [bookkeeper-io-743-3:PerChannelBookieClient$1@471] - connection [id: 0x00d50496, L:/127.0.0.1:59374 - R:127.0.0.1/127.0.0.1:43931] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:17,340 - INFO  - [bookie-io-747-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:17,340 - INFO  - [bookie-io-747-2:BookieRequestHandler@50] - Channel connected  [id: 0xcf093c9b, L:/127.0.0.1:43931 - R:/127.0.0.1:59374]
2020-08-10 23:21:17,377 - INFO  - [Time-limited test:ZkLedgerUnderreplicationManager@678] - Auto ledger re-replication is disabled!
2020-08-10 23:21:17,379 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:17,379 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:17,379 - WARN  - [bookkeeper-io-743-2:PerChannelBookieClient@1270] - Exception caught on:[id: 0x768de36f, L:/127.0.0.1:49704 - R:127.0.0.1/127.0.0.1:34147] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:17,379 - INFO  - [bookkeeper-io-743-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x768de36f, L:/127.0.0.1:49704 ! R:127.0.0.1/127.0.0.1:34147]
2020-08-10 23:21:17,385 - INFO  - [bookie-io-767-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xc6fd2a24, L:/127.0.0.1:34147 ! R:/127.0.0.1:49704]
2020-08-10 23:21:17,388 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-34147 with exitCode 0
2020-08-10 23:21:17,388 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:17,388 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:17,388 - INFO  - [SyncThread-772-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:17,389 - INFO  - [SyncThread-772-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie2842209261465663540test/current/0.log for logId 0.
2020-08-10 23:21:17,390 - INFO  - [pool-452-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie2842209261465663540test/current/1.log for logId 1.
2020-08-10 23:21:17,396 - INFO  - [SyncThread-772-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094476956 , logFileOffset - 5120]}.
2020-08-10 23:21:17,399 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:17,399 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:17,399 - INFO  - [BookieJournal-34147:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:17,400 - INFO  - [BookieJournal-34147:Journal@1144] - Journal exited loop!
2020-08-10 23:21:17,400 - INFO  - [Bookie-34147:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:17,400 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:17,401 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:17,401 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:17,401 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:17,401 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:17,401 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:17,412 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:17,413 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:17,413 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:17,416 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:34147
2020-08-10 23:21:17,417 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:34147
2020-08-10 23:21:17,417 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:34147
2020-08-10 23:21:17,417 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:34147
2020-08-10 23:21:17,417 - INFO  - [AuditorBookie-127.0.0.1:43931:Auditor@1009] - LedgerReplication is disabled externally through Zookeeper, since DISABLE_NODE ZNode is created, so waiting untill it is enabled
2020-08-10 23:21:17,520 - INFO  - [AuditorElector-127.0.0.1:34147:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:17,628 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:17,628 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:17,628 - WARN  - [bookkeeper-io-743-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0xcbe152ac, L:/127.0.0.1:55036 - R:127.0.0.1/127.0.0.1:42377] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:17,628 - INFO  - [bookie-io-757-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x1f47ed6a, L:/127.0.0.1:42377 ! R:/127.0.0.1:55036]
2020-08-10 23:21:17,628 - INFO  - [bookkeeper-io-743-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xcbe152ac, L:/127.0.0.1:55036 ! R:127.0.0.1/127.0.0.1:42377]
2020-08-10 23:21:17,630 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-42377 with exitCode 0
2020-08-10 23:21:17,630 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:17,630 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:17,630 - INFO  - [SyncThread-762-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:17,631 - INFO  - [SyncThread-762-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie6889818814361886069test/current/0.log for logId 0.
2020-08-10 23:21:17,633 - INFO  - [pool-445-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie6889818814361886069test/current/1.log for logId 1.
2020-08-10 23:21:17,639 - INFO  - [SyncThread-762-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094476660 , logFileOffset - 6144]}.
2020-08-10 23:21:17,642 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:17,643 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:17,643 - INFO  - [BookieJournal-42377:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:17,643 - INFO  - [BookieJournal-42377:Journal@1144] - Journal exited loop!
2020-08-10 23:21:17,644 - INFO  - [Bookie-42377:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:17,644 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:17,645 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:17,645 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:17,645 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:17,645 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:17,645 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:17,647 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:17,647 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:17,647 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:17,650 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:42377
2020-08-10 23:21:17,650 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:42377
2020-08-10 23:21:17,752 - INFO  - [AuditorElector-127.0.0.1:42377:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:17,753 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:42377
2020-08-10 23:21:17,961 - INFO  - [BookieDeathWatcher-34147:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:17,961 - INFO  - [BookieDeathWatcher-34147:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-34147
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:17,961 - INFO  - [BookieDeathWatcher-34147:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:17,961 - INFO  - [BookieDeathWatcher-34147:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:18,668 - INFO  - [BookieDeathWatcher-42377:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:18,668 - INFO  - [BookieDeathWatcher-42377:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-42377
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:18,669 - INFO  - [BookieDeathWatcher-42377:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:18,669 - INFO  - [BookieDeathWatcher-42377:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:18,869 - INFO  - [Time-limited test:ZkLedgerUnderreplicationManager@702] - Resuming automatic ledger re-replication
2020-08-10 23:21:18,869 - INFO  - [Time-limited test-EventThread:ZkLedgerUnderreplicationManager$4@749] - LedgerReplication is enabled externally through Zookeeper, since DISABLE_NODE ZNode is deleted
2020-08-10 23:21:18,872 - INFO  - [AuditorBookie-127.0.0.1:43931:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:18,878 - INFO  - [AuditorBookie-127.0.0.1:43931:Auditor@1114] - Following are the failed bookies: [127.0.0.1:34147, 127.0.0.1:42377], and searching its ledgers for re-replication
2020-08-10 23:21:18,878 - INFO  - [AuditorBookie-127.0.0.1:43931:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:34147] are identified as underreplicated
2020-08-10 23:21:18,894 - INFO  - [Time-limited test-EventThread:AuditorLedgerCheckerTest$ChildWatcher@914] - Received notification for the ledger path : /ledgers/underreplication/ledgers/0000/0000/0000/0000/urL0000000000
2020-08-10 23:21:18,894 - INFO  - [Time-limited test-EventThread:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:42377] are identified as underreplicated
2020-08-10 23:21:18,894 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:18,894 - INFO  - [AuditorElector-127.0.0.1:43931:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:18,900 - INFO  - [AuditorBookie-127.0.0.1:43931:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:19,008 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:21:19,008 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:43931
2020-08-10 23:21:19,009 - INFO  - [bookkeeper-io-743-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x00d50496, L:/127.0.0.1:59374 ! R:127.0.0.1/127.0.0.1:43931]
2020-08-10 23:21:19,009 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:42377
2020-08-10 23:21:19,009 - INFO  - [bookie-io-747-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xcf093c9b, L:/127.0.0.1:43931 ! R:/127.0.0.1:59374]
2020-08-10 23:21:19,009 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:34147
2020-08-10 23:21:19,115 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:19,115 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:19,118 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-43931 with exitCode 0
2020-08-10 23:21:19,118 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:19,118 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:19,119 - INFO  - [SyncThread-752-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:19,119 - INFO  - [SyncThread-752-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie10251776958923751556test/current/0.log for logId 0.
2020-08-10 23:21:19,131 - INFO  - [pool-438-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie10251776958923751556test/current/1.log for logId 1.
2020-08-10 23:21:19,139 - INFO  - [SyncThread-752-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094476355 , logFileOffset - 4096]}.
2020-08-10 23:21:19,142 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:19,144 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:19,144 - INFO  - [BookieJournal-43931:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:19,144 - INFO  - [BookieJournal-43931:Journal@1144] - Journal exited loop!
2020-08-10 23:21:19,144 - INFO  - [Bookie-43931:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:19,144 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:19,145 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:19,145 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:19,145 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:19,145 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:19,145 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:19,148 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:19,148 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:19,148 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:19,361 - INFO  - [BookieDeathWatcher-43931:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:19,362 - INFO  - [BookieDeathWatcher-43931:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-43931
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:19,362 - INFO  - [BookieDeathWatcher-43931:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:19,362 - INFO  - [BookieDeathWatcher-43931:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:19,370 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testToggleLedgerReplication in 361 ms.
2020-08-10 23:21:19,370 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:19,371 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:21:19,383 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:19,388 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40563/ledgers : zkServers = localhost:40563, ledgersRootPath = /ledgers.
2020-08-10 23:21:19,391 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:19,392 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:19,393 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:19,393 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:19,393 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:19,398 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:19,398 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie9622121381262247616test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:40563/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie9622121381262247616test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:19,400 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40563/ledgers : zkServers = localhost:40563, ledgersRootPath = /ledgers.
2020-08-10 23:21:19,404 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:19,407 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:19,411 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie9622121381262247616test/current] [/tmp/bookie9622121381262247616test/current]
2020-08-10 23:21:19,418 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:19,420 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie9622121381262247616test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:19,420 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:19,421 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:19,421 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:19,421 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:19,422 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:19,422 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:19,429 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:42499 to become writable
2020-08-10 23:21:19,432 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:19,433 - INFO  - [SyncThread-809-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:19,437 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:19,438 - INFO  - [BookieJournal-42499:Journal@909] - Starting journal on /tmp/bookie9622121381262247616test/current
2020-08-10 23:21:19,438 - INFO  - [BookieJournal-42499:JournalChannel@157] - Opening journal /tmp/bookie9622121381262247616test/current/173da3fc64f.txn
2020-08-10 23:21:19,440 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:19,443 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:42499
2020-08-10 23:21:19,694 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:42499' has been created.
2020-08-10 23:21:19,695 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:19,695 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie17706807317524579059test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:40563/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie17706807317524579059test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:19,697 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40563/ledgers : zkServers = localhost:40563, ledgersRootPath = /ledgers.
2020-08-10 23:21:19,701 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:19,703 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:19,706 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie17706807317524579059test/current] [/tmp/bookie17706807317524579059test/current]
2020-08-10 23:21:19,712 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:19,713 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie17706807317524579059test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:19,713 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:19,713 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:19,714 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:19,714 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:19,714 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:19,714 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:19,722 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:44131 to become writable
2020-08-10 23:21:19,722 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:19,724 - INFO  - [SyncThread-819-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:19,727 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:19,728 - INFO  - [BookieJournal-44131:Journal@909] - Starting journal on /tmp/bookie17706807317524579059test/current
2020-08-10 23:21:19,728 - INFO  - [BookieJournal-44131:JournalChannel@157] - Opening journal /tmp/bookie17706807317524579059test/current/173da3fc771.txn
2020-08-10 23:21:19,731 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:19,735 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44131
2020-08-10 23:21:19,987 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:44131' has been created.
2020-08-10 23:21:19,988 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:19,988 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie3735387539541241950test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:40563/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie3735387539541241950test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:19,990 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40563/ledgers : zkServers = localhost:40563, ledgersRootPath = /ledgers.
2020-08-10 23:21:19,993 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:19,995 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:19,998 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie3735387539541241950test/current] [/tmp/bookie3735387539541241950test/current]
2020-08-10 23:21:20,002 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:20,003 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie3735387539541241950test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:20,004 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:20,004 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:20,004 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:20,005 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:20,005 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:20,005 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:20,021 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:33339 to become writable
2020-08-10 23:21:20,022 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:20,023 - INFO  - [SyncThread-829-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:20,026 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:20,027 - INFO  - [BookieJournal-33339:Journal@909] - Starting journal on /tmp/bookie3735387539541241950test/current
2020-08-10 23:21:20,028 - INFO  - [BookieJournal-33339:JournalChannel@157] - Opening journal /tmp/bookie3735387539541241950test/current/173da3fc89d.txn
2020-08-10 23:21:20,029 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:20,034 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:33339
2020-08-10 23:21:20,284 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:33339' has been created.
2020-08-10 23:21:20,285 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testDuplicateEnDisableAutoRecovery @ metadata service zk://localhost:40563/ledgers in 913 ms.
2020-08-10 23:21:20,303 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40563/ledgers : zkServers = localhost:40563, ledgersRootPath = /ledgers.
2020-08-10 23:21:20,305 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:20,306 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:20,307 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:20,307 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:20,307 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:20,308 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:33339
2020-08-10 23:21:20,308 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:42499
2020-08-10 23:21:20,308 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44131
2020-08-10 23:21:20,318 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40563/ledgers : zkServers = localhost:40563, ledgersRootPath = /ledgers.
2020-08-10 23:21:20,322 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:20,324 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:20,324 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:20,324 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:20,324 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:20,326 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:33339
2020-08-10 23:21:20,326 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:42499
2020-08-10 23:21:20,326 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44131
2020-08-10 23:21:20,326 - INFO  - [AuditorElector-127.0.0.1:42499:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:20,328 - INFO  - [AuditorElector-127.0.0.1:42499:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:21:20,329 - INFO  - [AuditorElector-127.0.0.1:42499:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:42499
2020-08-10 23:21:20,336 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:40563/ledgers : zkServers = localhost:40563, ledgersRootPath = /ledgers.
2020-08-10 23:21:20,336 - INFO  - [AuditorElector-127.0.0.1:42499:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:20,337 - INFO  - [AuditorElector-127.0.0.1:42499:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:20,339 - INFO  - [AuditorElector-127.0.0.1:42499:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094480298 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:20,339 - INFO  - [AuditorElector-127.0.0.1:42499:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:20,339 - INFO  - [AuditorElector-127.0.0.1:42499:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:20,339 - INFO  - [AuditorBookie-127.0.0.1:42499:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:20,340 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:20,341 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:20,341 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:20,341 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:20,341 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:20,342 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:33339
2020-08-10 23:21:20,342 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:42499
2020-08-10 23:21:20,343 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44131
2020-08-10 23:21:20,347 - INFO  - [Time-limited test:ZkLedgerUnderreplicationManager@678] - Auto ledger re-replication is disabled!
2020-08-10 23:21:20,349 - WARN  - [Time-limited test:ZkLedgerUnderreplicationManager@680] - AutoRecovery is already disabled!
org.apache.zookeeper.KeeperException$NodeExistsException: KeeperErrorCode = NodeExists for /ledgers/underreplication/disable
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:126)
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:54)
	at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:1538)
	at org.apache.bookkeeper.zookeeper.ZooKeeperClient.access$1901(ZooKeeperClient.java:70)
	at org.apache.bookkeeper.zookeeper.ZooKeeperClient$9.call(ZooKeeperClient.java:711)
	at org.apache.bookkeeper.zookeeper.ZooKeeperClient$9.call(ZooKeeperClient.java:705)
	at org.apache.bookkeeper.zookeeper.ZooWorker.syncCallWithRetries(ZooWorker.java:140)
	at org.apache.bookkeeper.zookeeper.ZooKeeperClient.create(ZooKeeperClient.java:705)
	at org.apache.bookkeeper.meta.ZkLedgerUnderreplicationManager.disableLedgerReplication(ZkLedgerUnderreplicationManager.java:677)
	at org.apache.bookkeeper.replication.AuditorLedgerCheckerTest.testDuplicateEnDisableAutoRecovery(AuditorLedgerCheckerTest.java:276)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:834)
2020-08-10 23:21:20,349 - INFO  - [AuditorBookie-127.0.0.1:42499:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:20,352 - INFO  - [Time-limited test:ZkLedgerUnderreplicationManager@702] - Resuming automatic ledger re-replication
2020-08-10 23:21:20,354 - WARN  - [Time-limited test:ZkLedgerUnderreplicationManager@704] - AutoRecovery is already enabled!
org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /ledgers/underreplication/disable
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:118)
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:54)
	at org.apache.zookeeper.ZooKeeper.delete(ZooKeeper.java:1793)
	at org.apache.bookkeeper.zookeeper.ZooKeeperClient.access$2101(ZooKeeperClient.java:70)
	at org.apache.bookkeeper.zookeeper.ZooKeeperClient$11.call(ZooKeeperClient.java:770)
	at org.apache.bookkeeper.zookeeper.ZooKeeperClient$11.call(ZooKeeperClient.java:764)
	at org.apache.bookkeeper.zookeeper.ZooWorker.syncCallWithRetries(ZooWorker.java:140)
	at org.apache.bookkeeper.zookeeper.ZooKeeperClient.delete(ZooKeeperClient.java:764)
	at org.apache.bookkeeper.meta.ZkLedgerUnderreplicationManager.enableLedgerReplication(ZkLedgerUnderreplicationManager.java:701)
	at org.apache.bookkeeper.replication.AuditorLedgerCheckerTest.testDuplicateEnDisableAutoRecovery(AuditorLedgerCheckerTest.java:284)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:834)
2020-08-10 23:21:20,354 - INFO  - [AuditorElector-127.0.0.1:44131:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:20,460 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:20,460 - INFO  - [AuditorElector-127.0.0.1:42499:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:20,473 - INFO  - [AuditorElector-127.0.0.1:33339:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:20,474 - INFO  - [AuditorElector-127.0.0.1:33339:ZkLedgerUnderreplicationManager@811] - lostBookieRecoveryDelay Znode is already present, so using existing lostBookieRecoveryDelay Znode value
2020-08-10 23:21:20,474 - INFO  - [AuditorElector-127.0.0.1:33339:Auditor@474] - Valid lostBookieRecoveryDelay zNode is available, so not creating lostBookieRecoveryDelay zNode as part of Auditor initialization 
2020-08-10 23:21:20,475 - INFO  - [AuditorElector-127.0.0.1:33339:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:33339
2020-08-10 23:21:20,477 - INFO  - [AuditorElector-127.0.0.1:33339:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:20,478 - INFO  - [AuditorElector-127.0.0.1:33339:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:20,478 - INFO  - [AuditorElector-127.0.0.1:33339:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094480298 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:20,478 - INFO  - [AuditorElector-127.0.0.1:33339:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:20,478 - INFO  - [AuditorElector-127.0.0.1:33339:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:20,479 - INFO  - [AuditorBookie-127.0.0.1:33339:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:20,483 - INFO  - [AuditorBookie-127.0.0.1:33339:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:20,573 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:20,573 - INFO  - [AuditorElector-127.0.0.1:33339:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:20,679 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:21:20,784 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:20,784 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:20,788 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-42499 with exitCode 0
2020-08-10 23:21:20,788 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:20,788 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:20,788 - INFO  - [SyncThread-809-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:20,792 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:20,792 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:20,792 - INFO  - [BookieJournal-42499:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:20,792 - INFO  - [BookieJournal-42499:Journal@1144] - Journal exited loop!
2020-08-10 23:21:20,793 - INFO  - [Bookie-42499:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:20,793 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:20,898 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:20,898 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:20,906 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-44131 with exitCode 0
2020-08-10 23:21:20,906 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:20,906 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:20,906 - INFO  - [SyncThread-819-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:20,910 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:20,910 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:20,910 - INFO  - [BookieJournal-44131:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:20,911 - INFO  - [BookieJournal-44131:Journal@1144] - Journal exited loop!
2020-08-10 23:21:20,911 - INFO  - [Bookie-44131:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:20,911 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:20,912 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:20,912 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:20,912 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:20,912 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:20,912 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:20,913 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:20,913 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:20,913 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:21,016 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:21,016 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:21,026 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-33339 with exitCode 0
2020-08-10 23:21:21,026 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:21,026 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:21,027 - INFO  - [SyncThread-829-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:21,030 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:21,031 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:21,031 - INFO  - [BookieJournal-33339:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:21,031 - INFO  - [BookieJournal-33339:Journal@1144] - Journal exited loop!
2020-08-10 23:21:21,032 - INFO  - [Bookie-33339:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:21,032 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:21,032 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:21,032 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:21,033 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:21,033 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:21,033 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:21,033 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:21,033 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:21,033 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:21,248 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testDuplicateEnDisableAutoRecovery in 569 ms.
2020-08-10 23:21:21,249 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:21,249 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:21:21,259 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:21,264 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:39025/ledgers : zkServers = localhost:39025, ledgersRootPath = /ledgers.
2020-08-10 23:21:21,267 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:21,269 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:21,269 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:21,269 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:21,269 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:21,273 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:21,273 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie2142137487403578308test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:39025/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie2142137487403578308test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:21,276 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:39025/ledgers : zkServers = localhost:39025, ledgersRootPath = /ledgers.
2020-08-10 23:21:21,279 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:21,282 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:21,286 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie2142137487403578308test/current] [/tmp/bookie2142137487403578308test/current]
2020-08-10 23:21:21,295 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:21,296 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie2142137487403578308test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:21,296 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:21,297 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:21,297 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:21,297 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:21,297 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:21,297 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:21,301 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:32975 to become writable
2020-08-10 23:21:21,302 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:21,303 - INFO  - [SyncThread-869-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:21,307 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:21,308 - INFO  - [BookieJournal-32975:Journal@909] - Starting journal on /tmp/bookie2142137487403578308test/current
2020-08-10 23:21:21,309 - INFO  - [BookieJournal-32975:JournalChannel@157] - Opening journal /tmp/bookie2142137487403578308test/current/173da3fcd9e.txn
2020-08-10 23:21:21,309 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:21,315 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32975
2020-08-10 23:21:21,446 - INFO  - [BookieDeathWatcher-42499:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:21,446 - INFO  - [BookieDeathWatcher-42499:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-42499
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:21,446 - INFO  - [BookieDeathWatcher-42499:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:21,447 - INFO  - [BookieDeathWatcher-42499:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:21,566 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:32975' has been created.
2020-08-10 23:21:21,566 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:21,567 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie13232765209974842584test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:39025/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie13232765209974842584test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:21,569 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:39025/ledgers : zkServers = localhost:39025, ledgersRootPath = /ledgers.
2020-08-10 23:21:21,573 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:21,575 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:21,580 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie13232765209974842584test/current] [/tmp/bookie13232765209974842584test/current]
2020-08-10 23:21:21,585 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:21,586 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie13232765209974842584test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:21,586 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:21,587 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:21,587 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:21,588 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:21,588 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:21,588 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:21,593 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:33345 to become writable
2020-08-10 23:21:21,594 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:21,595 - INFO  - [SyncThread-879-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:21,598 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:21,601 - INFO  - [BookieJournal-33345:Journal@909] - Starting journal on /tmp/bookie13232765209974842584test/current
2020-08-10 23:21:21,601 - INFO  - [BookieJournal-33345:JournalChannel@157] - Opening journal /tmp/bookie13232765209974842584test/current/173da3fcec2.txn
2020-08-10 23:21:21,601 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:21,608 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:33345
2020-08-10 23:21:21,736 - INFO  - [BookieDeathWatcher-44131:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:21,736 - INFO  - [BookieDeathWatcher-44131:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-44131
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:21,736 - INFO  - [BookieDeathWatcher-44131:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:21,736 - INFO  - [BookieDeathWatcher-44131:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:21,859 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:33345' has been created.
2020-08-10 23:21:21,860 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:21,860 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie10652532900160918212test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:39025/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie10652532900160918212test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:21,862 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:39025/ledgers : zkServers = localhost:39025, ledgersRootPath = /ledgers.
2020-08-10 23:21:21,864 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:21,866 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:21,870 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie10652532900160918212test/current] [/tmp/bookie10652532900160918212test/current]
2020-08-10 23:21:21,876 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:21,877 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie10652532900160918212test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:21,877 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:21,878 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:21,878 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:21,879 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:21,879 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:21,879 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:21,893 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:44691 to become writable
2020-08-10 23:21:21,894 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 1 ms.
2020-08-10 23:21:21,894 - INFO  - [SyncThread-889-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:21,897 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:21,899 - INFO  - [BookieJournal-44691:Journal@909] - Starting journal on /tmp/bookie10652532900160918212test/current
2020-08-10 23:21:21,899 - INFO  - [BookieJournal-44691:JournalChannel@157] - Opening journal /tmp/bookie10652532900160918212test/current/173da3fcfec.txn
2020-08-10 23:21:21,900 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:21,906 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,034 - INFO  - [BookieDeathWatcher-33339:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:22,034 - INFO  - [BookieDeathWatcher-33339:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-33339
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:22,034 - INFO  - [BookieDeathWatcher-33339:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:22,034 - INFO  - [BookieDeathWatcher-33339:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:22,157 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:44691' has been created.
2020-08-10 23:21:22,158 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testRestartBookie @ metadata service zk://localhost:39025/ledgers in 908 ms.
2020-08-10 23:21:22,178 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:39025/ledgers : zkServers = localhost:39025, ledgersRootPath = /ledgers.
2020-08-10 23:21:22,181 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:22,183 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:22,183 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:22,183 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:22,183 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:22,184 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:33345
2020-08-10 23:21:22,184 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,184 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32975
2020-08-10 23:21:22,195 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:39025/ledgers : zkServers = localhost:39025, ledgersRootPath = /ledgers.
2020-08-10 23:21:22,203 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:22,205 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:22,205 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:22,205 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:22,205 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:22,207 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:33345
2020-08-10 23:21:22,207 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,207 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32975
2020-08-10 23:21:22,208 - INFO  - [AuditorElector-127.0.0.1:32975:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:22,211 - INFO  - [AuditorElector-127.0.0.1:32975:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:21:22,212 - INFO  - [AuditorElector-127.0.0.1:32975:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:32975
2020-08-10 23:21:22,219 - INFO  - [AuditorElector-127.0.0.1:32975:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:22,223 - INFO  - [AuditorElector-127.0.0.1:32975:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:22,224 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:39025/ledgers : zkServers = localhost:39025, ledgersRootPath = /ledgers.
2020-08-10 23:21:22,224 - INFO  - [AuditorElector-127.0.0.1:32975:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094482173 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:22,224 - INFO  - [AuditorElector-127.0.0.1:32975:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:22,224 - INFO  - [AuditorElector-127.0.0.1:32975:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:22,224 - INFO  - [AuditorBookie-127.0.0.1:32975:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:22,228 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:22,230 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:22,230 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:22,230 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:22,230 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:22,232 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:33345
2020-08-10 23:21:22,232 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,232 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:32975
2020-08-10 23:21:22,233 - INFO  - [AuditorBookie-127.0.0.1:32975:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:22,236 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:33345, 127.0.0.1:44691, 127.0.0.1:32975] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:21:22,258 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:33345, 127.0.0.1:44691, 127.0.0.1:32975] for ledger: 0
2020-08-10 23:21:22,259 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:21:22,264 - INFO  - [bookkeeper-io-860-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xcdb190aa, L:/127.0.0.1:33170 - R:127.0.0.1/127.0.0.1:44691]
2020-08-10 23:21:22,264 - INFO  - [bookkeeper-io-860-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:44691
2020-08-10 23:21:22,265 - INFO  - [bookkeeper-io-860-2:PerChannelBookieClient$1@471] - connection [id: 0xcdb190aa, L:/127.0.0.1:33170 - R:127.0.0.1/127.0.0.1:44691] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:22,265 - INFO  - [bookie-io-884-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:22,265 - INFO  - [bookie-io-884-2:BookieRequestHandler@50] - Channel connected  [id: 0xa6f0efa9, L:/127.0.0.1:44691 - R:/127.0.0.1:33170]
2020-08-10 23:21:22,266 - INFO  - [bookie-io-874-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:22,266 - INFO  - [bookie-io-874-2:BookieRequestHandler@50] - Channel connected  [id: 0x5106bd00, L:/127.0.0.1:33345 - R:/127.0.0.1:41218]
2020-08-10 23:21:22,267 - INFO  - [bookie-io-864-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:22,267 - INFO  - [bookie-io-864-2:BookieRequestHandler@50] - Channel connected  [id: 0xbfbe8022, L:/127.0.0.1:32975 - R:/127.0.0.1:44020]
2020-08-10 23:21:22,268 - INFO  - [bookkeeper-io-860-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x6986ed52, L:/127.0.0.1:44020 - R:127.0.0.1/127.0.0.1:32975]
2020-08-10 23:21:22,268 - INFO  - [bookkeeper-io-860-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:32975
2020-08-10 23:21:22,269 - INFO  - [bookkeeper-io-860-3:PerChannelBookieClient$1@471] - connection [id: 0x6986ed52, L:/127.0.0.1:44020 - R:127.0.0.1/127.0.0.1:32975] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:22,269 - INFO  - [bookkeeper-io-860-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x988ea42a, L:/127.0.0.1:41218 - R:127.0.0.1/127.0.0.1:33345]
2020-08-10 23:21:22,269 - INFO  - [bookkeeper-io-860-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:33345
2020-08-10 23:21:22,270 - INFO  - [bookkeeper-io-860-1:PerChannelBookieClient$1@471] - connection [id: 0x988ea42a, L:/127.0.0.1:41218 - R:127.0.0.1/127.0.0.1:33345] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:22,289 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:33345, 127.0.0.1:44691, 127.0.0.1:32975] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:21:22,294 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:33345, 127.0.0.1:44691, 127.0.0.1:32975] for ledger: 1
2020-08-10 23:21:22,294 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 1
2020-08-10 23:21:22,344 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:22,345 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:22,345 - WARN  - [bookkeeper-io-860-2:PerChannelBookieClient@1270] - Exception caught on:[id: 0xcdb190aa, L:/127.0.0.1:33170 - R:127.0.0.1/127.0.0.1:44691] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:22,346 - INFO  - [bookkeeper-io-860-2:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xcdb190aa, L:/127.0.0.1:33170 ! R:127.0.0.1/127.0.0.1:44691]
2020-08-10 23:21:22,346 - INFO  - [bookie-io-884-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xa6f0efa9, L:/127.0.0.1:44691 ! R:/127.0.0.1:33170]
2020-08-10 23:21:22,356 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-44691 with exitCode 0
2020-08-10 23:21:22,356 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:22,356 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:22,356 - INFO  - [SyncThread-889-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:22,357 - INFO  - [SyncThread-889-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie10652532900160918212test/current/0.log for logId 0.
2020-08-10 23:21:22,361 - INFO  - [pool-522-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie10652532900160918212test/current/1.log for logId 1.
2020-08-10 23:21:22,377 - INFO  - [SyncThread-889-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094481900 , logFileOffset - 16896]}.
2020-08-10 23:21:22,380 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:22,380 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:22,381 - INFO  - [BookieJournal-44691:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:22,381 - INFO  - [BookieJournal-44691:Journal@1144] - Journal exited loop!
2020-08-10 23:21:22,381 - INFO  - [Bookie-44691:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:22,381 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:22,382 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:22,382 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:22,382 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:22,382 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:22,382 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:22,386 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:22,386 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:22,386 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:22,390 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,390 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,390 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,491 - INFO  - [AuditorElector-127.0.0.1:44691:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:22,502 - INFO  - [AuditorBookie-127.0.0.1:32975:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:22,608 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "44691",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie10652532900160918212test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:39025/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie10652532900160918212test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:22,611 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:39025/ledgers : zkServers = localhost:39025, ledgersRootPath = /ledgers.
2020-08-10 23:21:22,615 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:22,616 - INFO  - [AuditorBookie-127.0.0.1:32975:Auditor@1114] - Following are the failed bookies: [127.0.0.1:44691], and searching its ledgers for re-replication
2020-08-10 23:21:22,616 - INFO  - [AuditorBookie-127.0.0.1:32975:Auditor@1132] - Following ledgers: [0, 1] of bookie: [127.0.0.1:44691] are identified as underreplicated
2020-08-10 23:21:22,622 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:22,635 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:22,637 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:22,637 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:22,638 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:22,638 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:22,638 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:22,638 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:22,650 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:44691 to become writable
2020-08-10 23:21:22,650 - INFO  - [Time-limited test:Bookie@931] - Replaying journal 1597094481900 from position 16896
2020-08-10 23:21:22,651 - INFO  - [Time-limited test:JournalChannel@157] - Opening journal /tmp/bookie10652532900160918212test/current/173da3fcfec.txn
2020-08-10 23:21:22,652 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 2 ms.
2020-08-10 23:21:22,653 - INFO  - [SyncThread-920-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094481900 , logFileOffset - 16900]}.
2020-08-10 23:21:22,670 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:22,672 - INFO  - [BookieJournal-44691:Journal@909] - Starting journal on /tmp/bookie10652532900160918212test/current
2020-08-10 23:21:22,673 - INFO  - [BookieJournal-44691:JournalChannel@157] - Opening journal /tmp/bookie10652532900160918212test/current/173da3fcfed.txn
2020-08-10 23:21:22,673 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:22,679 - INFO  - [AuditorBookie-127.0.0.1:32975:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:22,682 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,682 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,682 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:44691
2020-08-10 23:21:22,905 - INFO  - [BookieDeathWatcher-44691:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:22,905 - INFO  - [BookieDeathWatcher-44691:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-44691
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:22,906 - INFO  - [BookieDeathWatcher-44691:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:22,906 - INFO  - [BookieDeathWatcher-44691:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:22,932 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:44691' has been created.
2020-08-10 23:21:22,934 - INFO  - [AuditorElector-127.0.0.1:33345:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:23,040 - INFO  - [Time-limited test:Auditor@1947] - Shutting down auditor
2020-08-10 23:21:23,041 - INFO  - [AuditorElector-127.0.0.1:32975:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:23,148 - INFO  - [Time-limited test:BookKeeperClusterTestCase@185] - TearDown
2020-08-10 23:21:23,149 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:33345
2020-08-10 23:21:23,150 - INFO  - [bookkeeper-io-860-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x988ea42a, L:/127.0.0.1:41218 ! R:127.0.0.1/127.0.0.1:33345]
2020-08-10 23:21:23,150 - INFO  - [bookie-io-874-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x5106bd00, L:/127.0.0.1:33345 ! R:/127.0.0.1:41218]
2020-08-10 23:21:23,150 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:44691
2020-08-10 23:21:23,151 - INFO  - [Time-limited test:PerChannelBookieClient@1029] - Closing the per channel bookie client for 127.0.0.1:32975
2020-08-10 23:21:23,152 - INFO  - [bookkeeper-io-860-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0x6986ed52, L:/127.0.0.1:44020 ! R:127.0.0.1/127.0.0.1:32975]
2020-08-10 23:21:23,152 - INFO  - [bookie-io-864-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xbfbe8022, L:/127.0.0.1:32975 ! R:/127.0.0.1:44020]
2020-08-10 23:21:23,258 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:23,259 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:23,263 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-32975 with exitCode 0
2020-08-10 23:21:23,263 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:23,264 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:23,264 - INFO  - [SyncThread-869-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:23,265 - INFO  - [SyncThread-869-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie2142137487403578308test/current/0.log for logId 0.
2020-08-10 23:21:23,269 - INFO  - [pool-508-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie2142137487403578308test/current/1.log for logId 1.
2020-08-10 23:21:23,289 - INFO  - [SyncThread-869-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094481310 , logFileOffset - 25088]}.
2020-08-10 23:21:23,293 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:23,294 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:23,294 - INFO  - [BookieJournal-32975:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:23,294 - INFO  - [BookieJournal-32975:Journal@1144] - Journal exited loop!
2020-08-10 23:21:23,295 - INFO  - [Bookie-32975:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:23,295 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:23,296 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:23,296 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:23,297 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:23,297 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:23,297 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:23,300 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:23,300 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:23,300 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:23,405 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:23,405 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:23,409 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-33345 with exitCode 0
2020-08-10 23:21:23,409 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:23,409 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:23,409 - INFO  - [SyncThread-879-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:23,411 - INFO  - [SyncThread-879-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie13232765209974842584test/current/0.log for logId 0.
2020-08-10 23:21:23,418 - INFO  - [pool-515-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie13232765209974842584test/current/1.log for logId 1.
2020-08-10 23:21:23,432 - INFO  - [SyncThread-879-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094481602 , logFileOffset - 29184]}.
2020-08-10 23:21:23,436 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:23,446 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:23,446 - INFO  - [BookieJournal-33345:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:23,446 - INFO  - [BookieJournal-33345:Journal@1144] - Journal exited loop!
2020-08-10 23:21:23,447 - INFO  - [Bookie-33345:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:23,447 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:23,449 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:23,449 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:23,449 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:23,450 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:23,450 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:23,453 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:23,453 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:23,454 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:23,558 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:23,558 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:23,564 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-44691 with exitCode 0
2020-08-10 23:21:23,565 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:23,565 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:23,565 - INFO  - [SyncThread-920-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094481900 , logFileOffset - 16900]}.
2020-08-10 23:21:23,569 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:23,570 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:23,570 - INFO  - [BookieJournal-44691:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:23,570 - INFO  - [BookieJournal-44691:Journal@1144] - Journal exited loop!
2020-08-10 23:21:23,570 - INFO  - [Bookie-44691:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:23,570 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:23,571 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:23,571 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:23,571 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:23,572 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:23,572 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:23,572 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:23,572 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:23,572 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:23,608 - INFO  - [BookieDeathWatcher-33345:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:23,608 - INFO  - [BookieDeathWatcher-33345:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-33345
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:23,608 - INFO  - [BookieDeathWatcher-33345:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:23,608 - INFO  - [BookieDeathWatcher-33345:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:23,681 - INFO  - [BookieDeathWatcher-44691:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:23,682 - INFO  - [BookieDeathWatcher-44691:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-44691
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:23,682 - INFO  - [BookieDeathWatcher-44691:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:23,682 - INFO  - [BookieDeathWatcher-44691:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:23,787 - INFO  - [Time-limited test:BookKeeperClusterTestCase@208] - Tearing down test testRestartBookie in 638 ms.
2020-08-10 23:21:23,788 - INFO  - [main:AuditorLedgerCheckerTest@114] - Running test case using ledger manager : org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:23,790 - INFO  - [Time-limited test:BookKeeperClusterTestCase@152] - Setting up test class org.apache.bookkeeper.replication.AuditorLedgerCheckerTest
2020-08-10 23:21:23,808 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:23,815 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41531/ledgers : zkServers = localhost:41531, ledgersRootPath = /ledgers.
2020-08-10 23:21:23,820 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:23,822 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:23,822 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:23,822 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:23,822 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:23,829 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:23,829 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie12699757188181545356test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:41531/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie12699757188181545356test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:23,832 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41531/ledgers : zkServers = localhost:41531, ledgersRootPath = /ledgers.
2020-08-10 23:21:23,836 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:23,838 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:23,844 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie12699757188181545356test/current] [/tmp/bookie12699757188181545356test/current]
2020-08-10 23:21:23,855 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:23,856 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie12699757188181545356test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:23,856 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:23,857 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:23,857 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:23,857 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:23,858 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:23,858 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:23,865 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:41901 to become writable
2020-08-10 23:21:23,865 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:23,866 - INFO  - [SyncThread-936-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:23,870 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:23,876 - INFO  - [BookieJournal-41901:Journal@909] - Starting journal on /tmp/bookie12699757188181545356test/current
2020-08-10 23:21:23,877 - INFO  - [BookieJournal-41901:JournalChannel@157] - Opening journal /tmp/bookie12699757188181545356test/current/173da3fd7a5.txn
2020-08-10 23:21:23,877 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:23,883 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41901
2020-08-10 23:21:24,133 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:41901' has been created.
2020-08-10 23:21:24,134 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:24,135 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie13181104084727051498test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:41531/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie13181104084727051498test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:24,137 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41531/ledgers : zkServers = localhost:41531, ledgersRootPath = /ledgers.
2020-08-10 23:21:24,141 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:24,143 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:24,151 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie13181104084727051498test/current] [/tmp/bookie13181104084727051498test/current]
2020-08-10 23:21:24,158 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:24,158 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie13181104084727051498test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:24,159 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:24,159 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:24,159 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:24,159 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:24,160 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:24,160 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:24,168 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:37151 to become writable
2020-08-10 23:21:24,169 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:24,172 - INFO  - [SyncThread-946-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:24,176 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:24,181 - INFO  - [BookieJournal-37151:Journal@909] - Starting journal on /tmp/bookie13181104084727051498test/current
2020-08-10 23:21:24,182 - INFO  - [BookieJournal-37151:JournalChannel@157] - Opening journal /tmp/bookie13181104084727051498test/current/173da3fd8d7.txn
2020-08-10 23:21:24,182 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:24,188 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:24,322 - INFO  - [BookieDeathWatcher-32975:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:24,322 - INFO  - [BookieDeathWatcher-32975:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-32975
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:24,322 - INFO  - [BookieDeathWatcher-32975:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:24,322 - INFO  - [BookieDeathWatcher-32975:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:24,438 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:37151' has been created.
2020-08-10 23:21:24,439 - INFO  - [Time-limited test:BookKeeperClusterTestCase@636] - Starting new bookie on port: 0
2020-08-10 23:21:24,439 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "0",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie5498201355673677019test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:41531/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie5498201355673677019test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:24,441 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41531/ledgers : zkServers = localhost:41531, ledgersRootPath = /ledgers.
2020-08-10 23:21:24,444 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:24,447 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:24,451 - INFO  - [Time-limited test:Bookie@390] - Stamping new cookies on all dirs [/tmp/bookie5498201355673677019test/current] [/tmp/bookie5498201355673677019test/current]
2020-08-10 23:21:24,457 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:24,458 - ERROR - [Time-limited test:Journal$LastLogMark@251] - Problems reading from /tmp/bookie5498201355673677019test/current/lastMark (this is okay if it is the first time starting this bookie
2020-08-10 23:21:24,458 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:24,459 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:24,459 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:24,460 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:24,460 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:24,460 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:24,472 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:35549 to become writable
2020-08-10 23:21:24,472 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 0 ms.
2020-08-10 23:21:24,473 - INFO  - [SyncThread-956-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 0 , logFileOffset - 0]}.
2020-08-10 23:21:24,477 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:24,479 - INFO  - [BookieJournal-35549:Journal@909] - Starting journal on /tmp/bookie5498201355673677019test/current
2020-08-10 23:21:24,480 - INFO  - [BookieJournal-35549:JournalChannel@157] - Opening journal /tmp/bookie5498201355673677019test/current/173da3fda01.txn
2020-08-10 23:21:24,481 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:24,486 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35549
2020-08-10 23:21:24,736 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:35549' has been created.
2020-08-10 23:21:24,737 - INFO  - [Time-limited test:BookKeeperClusterTestCase@164] - Setup testcase testDelayedAuditWithRollingUpgrade @ metadata service zk://localhost:41531/ledgers in 945 ms.
2020-08-10 23:21:24,756 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41531/ledgers : zkServers = localhost:41531, ledgersRootPath = /ledgers.
2020-08-10 23:21:24,761 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:24,762 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:24,762 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:24,762 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:24,763 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:24,778 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41901
2020-08-10 23:21:24,778 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:24,778 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35549
2020-08-10 23:21:24,787 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41531/ledgers : zkServers = localhost:41531, ledgersRootPath = /ledgers.
2020-08-10 23:21:24,793 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:24,795 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:24,795 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:24,795 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:24,795 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:24,802 - INFO  - [AuditorElector-127.0.0.1:41901:Auditor@467] - AuthProvider used by the Auditor is null
2020-08-10 23:21:24,802 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41901
2020-08-10 23:21:24,803 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:24,803 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35549
2020-08-10 23:21:24,804 - INFO  - [AuditorElector-127.0.0.1:41901:Auditor@471] - Initializing lostBookieRecoveryDelay zNode to the conif value: 0
2020-08-10 23:21:24,805 - INFO  - [AuditorElector-127.0.0.1:41901:Auditor@660] - I'm starting as Auditor Bookie. ID: 127.0.0.1:41901
2020-08-10 23:21:24,808 - INFO  - [AuditorElector-127.0.0.1:41901:Auditor@698] - Auditor periodic bookie checking enabled 'auditorPeriodicBookieCheckInterval' 86400 seconds
2020-08-10 23:21:24,810 - INFO  - [AuditorElector-127.0.0.1:41901:Auditor@708] - Auditor periodic ledger checking enabled 'auditorPeriodicCheckInterval' 604800 seconds
2020-08-10 23:21:24,813 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41531/ledgers : zkServers = localhost:41531, ledgersRootPath = /ledgers.
2020-08-10 23:21:24,813 - INFO  - [AuditorElector-127.0.0.1:41901:Auditor@733] - checkAllLedgers scheduling info.  checkAllLedgersLastExecutedCTime: 1597094484752 durationSinceLastExecutionInSecs: 0 initialDelay: 604800 interval: 604800
2020-08-10 23:21:24,813 - INFO  - [AuditorElector-127.0.0.1:41901:Auditor@889] - Periodic placementPolicy check disabled
2020-08-10 23:21:24,813 - INFO  - [AuditorElector-127.0.0.1:41901:Auditor@897] - Periodic replicas check disabled
2020-08-10 23:21:24,813 - INFO  - [AuditorBookie-127.0.0.1:41901:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:24,817 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:24,821 - ERROR - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@267] - Failed to initialize DNS Resolver org.apache.bookkeeper.net.ScriptBasedMapping, used default subnet resolver : java.lang.RuntimeException: No network topology script is found when using script based DNS resolver.
2020-08-10 23:21:24,821 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@214] - Initialize rackaware ensemble placement policy @ <Bookie:127.0.1.1:0> @ /default-rack : org.apache.bookkeeper.client.TopologyAwareEnsemblePlacementPolicy$DefaultResolver.
2020-08-10 23:21:24,821 - INFO  - [Time-limited test:RackawareEnsemblePlacementPolicyImpl@224] - Not weighted
2020-08-10 23:21:24,821 - INFO  - [Time-limited test:BookKeeper@509] - Weighted ledger placement is not enabled
2020-08-10 23:21:24,824 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:41901
2020-08-10 23:21:24,824 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:24,824 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:35549
2020-08-10 23:21:24,830 - INFO  - [AuditorBookie-127.0.0.1:41901:Auditor@1102] - Completed auditBookies
2020-08-10 23:21:25,832 - WARN  - [Time-limited test:BookieWatcherImpl@251] - New ensemble: [127.0.0.1:37151, 127.0.0.1:41901, 127.0.0.1:35549] is not adhering to Placement Policy. quarantinedBookies: []
2020-08-10 23:21:25,867 - INFO  - [Time-limited test-EventThread:LedgerCreateOp@221] - Ensemble: [127.0.0.1:37151, 127.0.0.1:41901, 127.0.0.1:35549] for ledger: 0
2020-08-10 23:21:25,868 - INFO  - [Time-limited test:AuditorLedgerCheckerTest@865] - Ledger ID: 0
2020-08-10 23:21:25,872 - INFO  - [bookkeeper-io-927-1:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xc97bc804, L:/127.0.0.1:44326 - R:127.0.0.1/127.0.0.1:37151]
2020-08-10 23:21:25,872 - INFO  - [bookkeeper-io-927-1:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:37151
2020-08-10 23:21:25,873 - INFO  - [bookkeeper-io-927-1:PerChannelBookieClient$1@471] - connection [id: 0xc97bc804, L:/127.0.0.1:44326 - R:127.0.0.1/127.0.0.1:37151] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:25,880 - INFO  - [bookkeeper-io-927-2:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0x09e88eac, L:/127.0.0.1:55128 - R:127.0.0.1/127.0.0.1:41901]
2020-08-10 23:21:25,880 - INFO  - [bookkeeper-io-927-2:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:41901
2020-08-10 23:21:25,880 - INFO  - [bookie-io-931-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:25,880 - INFO  - [bookie-io-931-2:BookieRequestHandler@50] - Channel connected  [id: 0x237c7311, L:/127.0.0.1:41901 - R:/127.0.0.1:55128]
2020-08-10 23:21:25,885 - INFO  - [bookie-io-941-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:25,886 - INFO  - [bookie-io-941-2:BookieRequestHandler@50] - Channel connected  [id: 0xe6e97e3a, L:/127.0.0.1:37151 - R:/127.0.0.1:44326]
2020-08-10 23:21:25,886 - INFO  - [bookkeeper-io-927-2:PerChannelBookieClient$1@471] - connection [id: 0x09e88eac, L:/127.0.0.1:55128 - R:127.0.0.1/127.0.0.1:41901] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:25,893 - INFO  - [bookie-io-951-2:AuthHandler$ServerSideHandler$AuthHandshakeCompleteCallback@219] - Authentication success on server side
2020-08-10 23:21:25,894 - INFO  - [bookie-io-951-2:BookieRequestHandler@50] - Channel connected  [id: 0x68823d1c, L:/127.0.0.1:35549 - R:/127.0.0.1:46708]
2020-08-10 23:21:25,895 - INFO  - [bookkeeper-io-927-3:PerChannelBookieClient$ConnectionFutureListener@2417] - Successfully connected to bookie: [id: 0xdbed4714, L:/127.0.0.1:46708 - R:127.0.0.1/127.0.0.1:35549]
2020-08-10 23:21:25,895 - INFO  - [bookkeeper-io-927-3:PerChannelBookieClient$ConnectionFutureListener@2425] - Successfully connected to bookie: 127.0.0.1:35549
2020-08-10 23:21:25,896 - INFO  - [bookkeeper-io-927-3:PerChannelBookieClient$1@471] - connection [id: 0xdbed4714, L:/127.0.0.1:46708 - R:127.0.0.1/127.0.0.1:35549] authenticated as BookKeeperPrincipal{ANONYMOUS}
2020-08-10 23:21:25,929 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:25,929 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:25,929 - INFO  - [bookie-io-941-2:BookieRequestHandler@61] - Channels disconnected: [id: 0xe6e97e3a, L:/127.0.0.1:37151 ! R:/127.0.0.1:44326]
2020-08-10 23:21:25,929 - WARN  - [bookkeeper-io-927-1:PerChannelBookieClient@1270] - Exception caught on:[id: 0xc97bc804, L:/127.0.0.1:44326 - R:127.0.0.1/127.0.0.1:37151] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:25,930 - INFO  - [bookkeeper-io-927-1:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xc97bc804, L:/127.0.0.1:44326 ! R:127.0.0.1/127.0.0.1:37151]
2020-08-10 23:21:25,941 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-37151 with exitCode 0
2020-08-10 23:21:25,941 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:25,941 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:25,942 - INFO  - [SyncThread-946-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:25,942 - INFO  - [SyncThread-946-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie13181104084727051498test/current/0.log for logId 0.
2020-08-10 23:21:25,945 - INFO  - [pool-557-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie13181104084727051498test/current/1.log for logId 1.
2020-08-10 23:21:25,953 - INFO  - [SyncThread-946-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094484183 , logFileOffset - 5632]}.
2020-08-10 23:21:25,957 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:25,958 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:25,958 - INFO  - [BookieJournal-37151:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:25,958 - INFO  - [BookieJournal-37151:Journal@1144] - Journal exited loop!
2020-08-10 23:21:25,958 - INFO  - [Bookie-37151:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:25,959 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:25,960 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:25,960 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:25,960 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:25,960 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:25,960 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:25,964 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:25,965 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:25,965 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:25,972 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:25,972 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:25,972 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:25,972 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:25,976 - INFO  - [AuditorBookie-127.0.0.1:41901:Auditor$9@583] - Delaying bookie audit by 5 secs for [127.0.0.1:37151]
2020-08-10 23:21:26,073 - INFO  - [AuditorElector-127.0.0.1:37151:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:26,189 - INFO  - [BookieDeathWatcher-37151:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:26,189 - INFO  - [BookieDeathWatcher-37151:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-37151
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:26,189 - INFO  - [BookieDeathWatcher-37151:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:26,189 - INFO  - [BookieDeathWatcher-37151:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:28,192 - INFO  - [Time-limited test:BookieServer@99] - {
  "diskUsageWarnThreshold" : "0.99",
  "dbStorage_readAheadCacheMaxSizeMb" : "4",
  "diskUsageThreshold" : "0.999",
  "gcWaitTime" : "1000",
  "journalFormatVersionToWrite" : "5",
  "allocatorPoolingPolicy" : "UnpooledHeap",
  "dbStorage_writeCacheMaxSizeMb" : "4",
  "bookiePort" : "37151",
  "allowEphemeralPorts" : "true",
  "ledgerDirectories" : "/tmp/bookie13181104084727051498test",
  "listeningInterface" : "lo",
  "metadataServiceUri" : "zk://localhost:41531/ledgers",
  "journalFlushWhenQueueEmpty" : "true",
  "enableTaskExecutionStats" : "true",
  "journalDirectories" : "/tmp/bookie13181104084727051498test",
  "ledgerManagerFactoryClass" : "org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory",
  "allowLoopback" : "true",
  "metastoreImplClass" : "org.apache.bookkeeper.metastore.InMemoryMetaStore"
}
2020-08-10 23:21:28,195 - INFO  - [Time-limited test:ZKMetadataDriverBase@187] - Initialize zookeeper metadata driver at metadata service uri zk://localhost:41531/ledgers : zkServers = localhost:41531, ledgersRootPath = /ledgers.
2020-08-10 23:21:28,202 - INFO  - [Time-limited test-EventThread:ZooKeeperWatcherBase@130] - ZooKeeper client is connected now.
2020-08-10 23:21:28,207 - INFO  - [Time-limited test:ZKRegistrationManager@425] - INSTANCEID not exists in zookeeper. Not considering it for data verification
2020-08-10 23:21:28,217 - INFO  - [Time-limited test:Bookie@704] - instantiate ledger manager org.apache.bookkeeper.meta.HierarchicalLedgerManagerFactory
2020-08-10 23:21:28,218 - INFO  - [Time-limited test:Bookie@623] - Using ledger storage: org.apache.bookkeeper.bookie.SortedLedgerStorage
2020-08-10 23:21:28,219 - INFO  - [Time-limited test:IndexPersistenceMgr@99] - openFileLimit = 20000
2020-08-10 23:21:28,219 - INFO  - [Time-limited test:IndexInMemPageMgr@361] - maxDirectMemory = 2147483648, pageSize = 8192, pageLimit = 87381
2020-08-10 23:21:28,220 - INFO  - [Time-limited test:ScanAndCompareGarbageCollector@105] - Over Replicated Ledger Deletion : enabled=true, interval=86400000
2020-08-10 23:21:28,220 - INFO  - [Time-limited test:GarbageCollectorThread@225] - Minor Compaction : enabled=true, threshold=0.20000000298023224, interval=3600000
2020-08-10 23:21:28,220 - INFO  - [Time-limited test:GarbageCollectorThread@227] - Major Compaction : enabled=true, threshold=0.800000011920929, interval=86400000
2020-08-10 23:21:28,228 - INFO  - [Time-limited test:BookKeeperTestClient@90] - Wait for 127.0.0.1:37151 to become writable
2020-08-10 23:21:28,228 - INFO  - [Time-limited test:Bookie@931] - Replaying journal 1597094484183 from position 5632
2020-08-10 23:21:28,228 - INFO  - [Time-limited test:JournalChannel@157] - Opening journal /tmp/bookie13181104084727051498test/current/173da3fd8d7.txn
2020-08-10 23:21:28,229 - INFO  - [Time-limited test:Bookie@901] - Finished replaying journal in 1 ms.
2020-08-10 23:21:28,233 - INFO  - [SyncThread-987-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094484183 , logFileOffset - 5636]}.
2020-08-10 23:21:28,237 - INFO  - [Time-limited test:Bookie@991] - Finished reading journal, starting bookie
2020-08-10 23:21:28,242 - INFO  - [BookieJournal-37151:Journal@909] - Starting journal on /tmp/bookie13181104084727051498test/current
2020-08-10 23:21:28,247 - INFO  - [BookieJournal-37151:JournalChannel@157] - Opening journal /tmp/bookie13181104084727051498test/current/173da3fd8d8.txn
2020-08-10 23:21:28,248 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@478] - ForceWrite Thread started
2020-08-10 23:21:28,255 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:28,255 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:28,255 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@426] - Adding a new node: /default-rack/127.0.0.1:37151
2020-08-10 23:21:28,505 - INFO  - [Time-limited test:BookKeeperClusterTestCase@670] - New bookie '127.0.0.1:37151' has been created.
2020-08-10 23:21:28,509 - INFO  - [Time-limited test:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:28,509 - INFO  - [Time-limited test:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:28,509 - WARN  - [bookkeeper-io-927-3:PerChannelBookieClient@1270] - Exception caught on:[id: 0xdbed4714, L:/127.0.0.1:46708 - R:127.0.0.1/127.0.0.1:35549] cause: syscall:read(..) failed: Connection reset by peer
2020-08-10 23:21:28,509 - INFO  - [bookie-io-951-2:BookieRequestHandler@61] - Channels disconnected: [id: 0x68823d1c, L:/127.0.0.1:35549 ! R:/127.0.0.1:46708]
2020-08-10 23:21:28,509 - INFO  - [bookkeeper-io-927-3:PerChannelBookieClient@1210] - Disconnected from bookie channel [id: 0xdbed4714, L:/127.0.0.1:46708 ! R:127.0.0.1/127.0.0.1:35549]
2020-08-10 23:21:28,515 - INFO  - [Time-limited test:Bookie@1176] - Shutting down Bookie-35549 with exitCode 0
2020-08-10 23:21:28,515 - INFO  - [Time-limited test:Bookie@1185] - Turning bookie to read only during shut down
2020-08-10 23:21:28,515 - INFO  - [Time-limited test:SyncThread@203] - Shutting down SyncThread
2020-08-10 23:21:28,516 - INFO  - [SyncThread-956-1:EntryLogManagerBase@146] - Creating a new entry log file because current active log channel has not initialized yet
2020-08-10 23:21:28,517 - INFO  - [SyncThread-956-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie5498201355673677019test/current/0.log for logId 0.
2020-08-10 23:21:28,520 - INFO  - [pool-564-thread-1:EntryLoggerAllocator@181] - Created new entry log file /tmp/bookie5498201355673677019test/current/1.log for logId 1.
2020-08-10 23:21:28,535 - INFO  - [SyncThread-956-1:SyncThread@135] - Flush ledger storage at checkpoint CheckpointList{checkpoints=[LogMark: logFileId - 1597094484481 , logFileOffset - 11264]}.
2020-08-10 23:21:28,538 - INFO  - [Time-limited test:Journal@1159] - Shutting down Journal
2020-08-10 23:21:28,538 - INFO  - [ForceWriteThread:Journal$ForceWriteThread@533] - ForceWrite thread interrupted
2020-08-10 23:21:28,539 - INFO  - [BookieJournal-35549:Journal@1135] - Journal exits when shutting down
2020-08-10 23:21:28,539 - INFO  - [BookieJournal-35549:Journal@1144] - Journal exited loop!
2020-08-10 23:21:28,540 - INFO  - [Bookie-35549:Bookie@1130] - Journal thread(s) quit.
2020-08-10 23:21:28,540 - INFO  - [Time-limited test:Journal@1170] - Finished Shutting down Journal thread
2020-08-10 23:21:28,540 - INFO  - [Time-limited test:InterleavedLedgerStorage@286] - Shutting down InterleavedLedgerStorage
2020-08-10 23:21:28,540 - INFO  - [Time-limited test:InterleavedLedgerStorage@287] - Shutting down GC thread
2020-08-10 23:21:28,540 - INFO  - [Time-limited test:GarbageCollectorThread@474] - Shutting down GarbageCollectorThread
2020-08-10 23:21:28,540 - INFO  - [Time-limited test:InterleavedLedgerStorage@289] - Shutting down entry logger
2020-08-10 23:21:28,540 - INFO  - [Time-limited test:EntryLogger@1161] - Stopping EntryLogger
2020-08-10 23:21:28,542 - INFO  - [Time-limited test:EntryLoggerAllocator@222] - Stopped entry logger preallocator.
2020-08-10 23:21:28,543 - INFO  - [Time-limited test:InterleavedLedgerStorage@296] - Complete shutting down Ledger Storage
2020-08-10 23:21:28,543 - INFO  - [Time-limited test:LedgerDirsMonitor@202] - Shutting down LedgerDirsMonitor
2020-08-10 23:21:28,546 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35549
2020-08-10 23:21:28,546 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35549
2020-08-10 23:21:28,546 - INFO  - [BookKeeperClientScheduler-OrderedScheduler-0-0:NetworkTopologyImpl@498] - Removing a node: /default-rack/127.0.0.1:35549
2020-08-10 23:21:28,549 - INFO  - [AuditorBookie-127.0.0.1:41901:Auditor$9@583] - Delaying bookie audit by 5 secs for [127.0.0.1:35549]
2020-08-10 23:21:28,650 - INFO  - [AuditorElector-127.0.0.1:35549:AuditorElector$2@260] - Shutting down AuditorElector
2020-08-10 23:21:29,243 - INFO  - [GarbageCollectorThread-988-1:GarbageCollectorThread@553] - Extracting entry log meta from entryLogId: 0
2020-08-10 23:21:29,252 - INFO  - [GarbageCollectorThread-988-1:EntryLogger@1043] - Failed to get ledgers map index from: 0.log : No ledgers map index found on entryLogId0
2020-08-10 23:21:29,258 - INFO  - [GarbageCollectorThread-988-1:GarbageCollectorThread@553] - Extracting entry log meta from entryLogId: 1
2020-08-10 23:21:29,259 - INFO  - [GarbageCollectorThread-988-1:EntryLogger@1043] - Failed to get ledgers map index from: 1.log : readerIndex(0) + length(4) exceeds writerIndex(0): UnpooledByteBufAllocator$InstrumentedUnpooledUnsafeDirectByteBuf(ridx: 0, widx: 0, cap: 1024)
2020-08-10 23:21:29,488 - INFO  - [BookieDeathWatcher-35549:BookieServer$DeathWatcher@285] - BookieDeathWatcher noticed the bookie is not running any more, exiting the watch loop!
2020-08-10 23:21:29,488 - INFO  - [BookieDeathWatcher-35549:BookieServer$DeathWatcher@269] - BookieDeathWatcher exited loop due to uncaught exception from thread BookieDeathWatcher-35549
java.lang.RuntimeException: Bookie is not running any more
	at org.apache.bookkeeper.proto.BookieServer$DeathWatcher.run(BookieServer.java:289)
2020-08-10 23:21:29,489 - INFO  - [BookieDeathWatcher-35549:BookieServer@203] - Shutting down BookieServer
2020-08-10 23:21:29,489 - INFO  - [BookieDeathWatcher-35549:BookieNettyServer@424] - Shutting down BookieNettyServer
2020-08-10 23:21:33,555 - INFO  - [AuditorBookie-127.0.0.1:41901:Auditor@1067] - Starting auditBookies
2020-08-10 23:21:33,571 - INFO  - [AuditorBookie-127.0.0.1:41901:Auditor@1114] - Following are the failed bookies: [127.0.0.1:35549], and searching its ledgers for re-replication
2020-08-10 23:21:33,572 - INFO  - [AuditorBookie-127.0.0.1:41901:Auditor@1132] - Following ledgers: [0] of bookie: [127.0.0.1:35549] are identified as underreplicated
